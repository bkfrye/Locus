!function(b){b.fn.setGroupId=function(t){return this.attr("data-groupId",t),this.each(function(){var e=f(b(this));e&&(e.layoutGroupId=t)}),this},b.fn.setGridColumnSpan=function(t){return null===t?this.css("grid-column","auto / auto"):(this.css("grid-column","span {0}".format(t)),this.each(function(){if(b(this).hasClass("spacer")){var e=b(this).prev(".gfield");(r=f(e)).layoutSpacerGridColumnSpan=t}else(r=f(b(this)))&&(r.layoutGridColumnSpan=t)})),this;var r},b.fn.getGridColumnSpan=function(){var e=parseInt(this.css("gridColumnStart").split(" ")[1]);return isNaN(e)&&void 0!==S&&(e=S),e},String.prototype.format=function(){var r=arguments;return this.replace(/{(\d+)}/g,function(e,t){return void 0!==r[t]?r[t]:e})};var i,h=b("#form_editor_fields_container"),g=b(".gform_editor"),x=b("#gform_fields"),e=b("#no-fields"),t=b("#no-fields-drop"),p=b(".editor-sidebar"),c=b(".gfield-field-action"),m=null,r=".add-buttons button",S=getComputedStyle(x[0])["grid-template-columns"].split(" ").length,w=S/4,y=null,o=!1;function n(e,t){var r='<li data-js-field-loading-placeholder><div class="dropzone__loader"><div class="dropzone__loader-item dropzone__loader-label"></div><div class="dropzone__loader-item dropzone__loader-content"></div></div></li>';void 0!==t?0===t?b("#gform_fields").prepend(r):b("#gform_fields").children().eq(t-1).after(r):b("#gform_fields").append(r),b("[data-js-field-loading-placeholder]").setGridColumnSpan(S),b("#form_editor_fields_container").addClass("dropzone-loader-visible"),s(b("[data-js-field-loading-placeholder]"),j(!1).data("target"),j(!1).data("where"))}function a(){b("#form_editor_fields_container").removeClass("dropzone-loader-visible"),b("[data-js-field-loading-placeholder]").remove()}function d(e){e.hasClass("ui-draggable")&&e.draggable("destroy").resizable("destroy"),e.draggable({helper:"clone",zIndex:999,handle:".gfield-drag",create:function(e,t){if(!C(b(this))){var r,i=b(this).attr("id").replace("field_",""),o=!!i&&GetFieldById(i);o&&o.layoutGroupId&&!g.hasClass("gform_legacy_markup")?r=o.layoutGroupId:I(b(this),!1)||(r=I()),b(this).setGroupId(r)}},start:function(e,t){x.addClass("dragging"),h.addClass("droppable"),(m=b(this)).addClass("placeholder")},drag:function(e,t){t.helper.width(m.width()).height(m.height()).setGridColumnSpan(null),helperLeft=gform.tools.isRtl()?t.position.left+t.helper.outerWidth():t.position.left,l(0,t,t.position.top,helperLeft)},stop:function(e,t){x.removeClass("dragging"),h.removeClass("droppable"),m.removeClass("placeholder"),H().removeClass("hovering"),j().data("target")&&s(m,j().data("target"),j().data("where")),j().remove(),t.helper.remove()}}).resizable({handles:"e, w",start:function(){y=null,x.addClass("resizing")},resize:function(e,t){var r,i,o,n,a,d,l,s,f,u,h=x.outerWidth()/S,g=t.element,p=g.outerWidth(),c=Math.max(w,Math.round(p/h)),m=g.getGridColumnSpan(),v=z(I(g)),_=(i=g,1===(o=(o=v).not(".spacer")).length||o.last()[0]===i[0]),C=v.filter(".spacer"),G=_&&!C.length?null:g.next();null===y&&(y=1<v.length?m+(r=G?A(G):0):S),n=c,a=w,d=y-(1<v.length&&!_?w:0),c=Math.max(a,Math.min(d,n)),b().add(t.helper).add(t.element).css("width","auto").css("left","auto").setGridColumnSpan(c),G&&(r=y-c,G.css("width","auto").setGridColumnSpan(r)),c==S||c==y?W(C):_&&!C.length&&A(v)<S&&(s=I(l=g),f=1,u=b('<div class="spacer gfield"></div>').setGroupId(s).setGridColumnSpan(f),l.after(u))},stop:function(){x.removeClass("resizing")}})}function l(e,s,f,u){H().removeClass("hovering"),function(e,t){if(gform.tools.isRtl())r=x.offset().left;else var r=h.offset().left;var i=x.offset(),o=i.top-h.offset().top,n=i.left-r,a=c.outerWidth()||null,d=-o+a,l=-n+h.outerWidth()-p.outerWidth()-a,s=-o+h.outerHeight(),f=-n;return d<t&&t<s&&f<e&&e<l}(u,f)?f<0?j().css({top:-30,left:0,height:"4px",width:x.outerWidth()}).data({where:"top",target:H().first()}):f>x.outerHeight()?j().css({top:x.outerHeight()-14,left:0,height:"4px",width:x.outerWidth()}).data({where:"bottom",target:H().last()}):H().not(s.helper).not(this).each(function(){var e=b(this),t=e.position(),r={top:t.top,right:t.left+e.outerWidth(),bottom:t.top+e.outerHeight(),left:t.left};if(i=u,(o=f)<(n=r).bottom&&o>n.top&&i<n.right&&i>n.left){var i,o,n;e.addClass("hovering"),C(e)&&(t=(e=e.prev()).position(),a="right");var a=function(e,t,r,i,o){var n=r.left+i/2,a=r.right-i/2,d=r.top+o/5,l=r.bottom-o/5;{if(t>r.top&&t<d)return"top";if(t<r.bottom&&l<t)return"bottom";if(e>r.left&&e<n)return"left";if(e<r.right&&a<e)return"right"}return"center"}(u,f,r,e.outerWidth(),e.outerHeight()),d=z(I(e),!1).length>=S/w;I(e)===I(s.helper)&&(d=!1);var l=function(e,t){var r,i,o,n,a,d;if(n=I(t),d=I(e.helper),o=z(n),n===d)return!0;C(t)?t=(a=t).prev():C(t.next())&&!1!==o.index(t.next())&&(a=t.next());i=(r=a?a.getGridColumnSpan():null)?r:v(o)?S/(o.length+1):(r=t.getGridColumnSpan(),r/2);if(parseInt(i)<3)return!1}(s,e);if("left"===a||"right"===a){if(!function(e,t){if(g.hasClass("gform_legacy_markup"))return;if(e.hasClass("gpage")||e.hasClass("gsection")||e.hasClass("gform_hidden"))return;if(t.hasClass("gpage")||t.hasClass("gsection")||t.hasClass("gform_hidden")||"hidden"===t.data("type"))return;if(t.is("button")&&-1!==b.inArray(t.val().toLowerCase(),["page","section"]))return;return 1}(e,m))return;if(d||!1===l)return}switch(j().data({where:a,target:e}),a){case"left":return j().css({top:t.top,left:t.left-10,height:e.outerHeight(),width:"4px"}),!1;case"right":return j().css({top:t.top,left:t.left+e.outerWidth()+6,right:"auto",height:e.outerHeight(),width:"4px"}),!1;case"bottom":return j().css({top:t.top+e.outerHeight()+26,left:0,height:"4px",width:"100%"}),!1;case"top":return j().css({top:t.top-30,left:0,height:"4px",width:"100%"}),!1}}}):j(!1).remove()}function s(e,t,r){if(t){var i,o,n,a,d,l,s,f;l=I(e),n=z(d=I(t)),C(t)?t=(f=t).prev():(C(t.next())||0<t.next().filter("[data-js-field-loading-placeholder]").length)&&!1!==n.index(t.next())&&(f=t.next()),s="left"===r||"right"===r,f&&s&&(i=f.getGridColumnSpan(),W(f),n=z(d)),"top"==r?t=n.first():"bottom"==r&&(t=n.last());var u=gform.tools.isRtl()?"right":"left";if("top"==r||r==u?e.insertBefore(t):e.insertAfter(t),s)if(i?(a=e,o=i):a=v(n)?(o=S/(n.length+1),n.add(e)):(o=(i=t.getGridColumnSpan())/2,t.add(e)),parseInt(o)==o)a.setGridColumnSpan(o);else{var h=Math.floor(o),g=Math.ceil(o);e.setGridColumnSpan(h),t.setGridColumnSpan(g)}else d=I(),e.setGridColumnSpan(S);e.setGroupId(d),_(l)}}function I(e,t){var r;return void 0!==e&&(r=e.attr("data-groupId")),r||!t&&void 0!==t||(r="xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),r}function z(e,t){return t||void 0===t?H().filter('[data-groupId="{0}"]'.format(e)).not(".ui-draggable-dragging"):H().filter('[data-groupId="{0}"]'.format(e)).not(".ui-draggable-dragging").not(".spacer")}function A(e){var t=0;return e.each(function(){t+=b(this).getGridColumnSpan()}),t}function v(e){var t=e.first().getGridColumnSpan(),r=!0;return e.each(function(){if(b(this).getGridColumnSpan()!==t)return r=!1}),r}function _(e){var t=z(e),r=S/t.length,i=t.filter(".spacer");t[0]===i[0]&&0<t.length&&W(i),t.setGridColumnSpan(r)}function W(e){e.setGridColumnSpan(0).remove()}function C(e){return 0<e.filter(".spacer").length}function f(e){var t=e.attr("id"),r=!(!t||-1===t.indexOf("field_"))&&String(t).replace("field_","");return!!r&&GetFieldById(r)}function u(e){return StartAddField(e,Math.max(0,x.children().index(m)))}function G(){H().removeClass("field_selected"),b(".sidebar").tabs("option","active",0),HideSettings()}function H(){return x.find(".gfield")}function j(e){e=void 0===e;var t=b("#indicator");return!t.length&&e&&(t=b('<div id="indicator"></div>'),x.append(t)),t}d(H()),b(r).on("mousedown touchstart",function(){b(this).attr("title","")}).draggable({helper:"clone",revert:function(){return!1},cancel:!1,appendTo:x,containment:"document",start:function(e,t){if(G(),h.addClass("droppable"),1==gf_vars.currentlyAddingField)return!1;t.helper.width(b(this).width()).height(b(this).height()),x.addClass("dragging"),(m=b(this).clone()).addClass("placeholder"),b(this).addClass("fieldPlaceholder")},drag:function(e,t){if(form.fields.length){var r=+t.position.top+t.helper.outerHeight()/2,i=+t.position.left+t.helper.outerWidth()/2;l(0,t,r,i)}},stop:function(e,t){b(this).removeClass("fieldPlaceholder"),h.removeClass("droppable"),x.removeClass("dragging");var r=!1;!form.fields.length&&o?(o=!1,r=u(t.helper.data("type"))):form.fields.length&&j(!1).data("target")&&(r=u(t.helper.data("type"))),r||(j(!1).remove(),m.remove(),m=null),b(this).attr("title",b(this).attr("data-description"))}}).on("click keypress",function(){m=null}),e.droppable({accept:r,activate:function(e,t){b(this).addClass("ready")},over:function(){b(this).addClass("hovering"),t.addClass("hovering")},out:function(){b(this).removeClass("hovering"),t.removeClass("hovering")},drop:function(){o=!0,b(this).removeClass("hovering"),t.removeClass("hovering")},deactivate:function(){b(this).removeClass("ready")}}),h.on("click",function(){G()}),b(document).on("gform_field_added",function(e,t,r){var i=b("#field_"+r.id);null===m?i.setGroupId(I()):(s(i,j().data("target"),j().data("where")),m.remove(),m=null),j().remove(),d(i)}),b(document).on("gform_field_deleted",function(e,t,r){i=I(b("#field_"+r))}),gform.addAction("gform_after_field_removed",function(e,t){_(i)}),gform.addAction("gform_field_duplicated",function(e,t,r,i){z(I(b("#field_"+i))).last().after(r),r.setGridColumnSpan(S).setGroupId(I()),d(r)}),gform.addAction("gform_after_refresh_field_preview",function(e){d(b("#field_"+e))}),gform.addAction("gform_before_get_field_markup",function(e,t,r){n(0,r)}),gform.addAction("gform_after_get_field_markup",function(e,t,r){a()}),gform.addAction("gform_before_field_duplicated",function(e){var t=b("#field_"+e);n(0,x.children().index(t)+1)}),gform.addAction("gform_field_duplicated",function(){a()}),gform.addAction("gform_before_refresh_field_preview",function(e){jQuery("#field_"+e).addClass("loading")}),gform.addAction("gform_after_refresh_field_preview",function(e){jQuery("#field_"+e).removeClass("loading")})}(jQuery);