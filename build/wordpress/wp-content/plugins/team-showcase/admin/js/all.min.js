var AwesomeUtil={detect_os:function(){var e="Unknown OS";return-1!=navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(e="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(e="Linux"),e},toObject:function(e){for(var n={},t=0;t<e.length;++t)"object"==typeof e[t]?n[t]=AwesomeUtil.toObject(e[t]):n[t]=e[t];return n},find_in_array_of_objects:function(e,n,t){var r=!1;return jQuery.each(e,function(e,i){i.hasOwnProperty(n)&&i[n]==t&&(r=!0)}),r},hex_to_rgb:function(e){e=parseInt(e,16);var n=e>>16,t=e>>8&255,r=255&e;return[n,t,r]},calc_size:function(e){if(e=""+e,e.endsWith("%")||e.endsWith("px"))return e;var n=e.replace("/[^0-9]/","");return n+"px"},clean_number:function(e){return parseInt(e.replace(/\D+/g,""))},get_keys:function(e){var n={},t=0;return _.each(e,function(e,r,i){"object"==typeof e?n[t]=AwesomeUtil.get_keys(e):n[t]=r,t++}),n},find_key_by_value:function(e,n){var t;return _.find(n,function(n,r){return"object"!=typeof n?n===e?(t=r,!0):!1:void(t=AwesomeUtil.find_key_by_value(e,n))}),t},find_index_by_value:function(e,n){var t=AwesomeUtil.get_keys(n),r=AwesomeUtil.find_key_by_value(e,n),i=AwesomeUtil.find_key_by_value(r,t);return i},removeClass:function(e,n){jQuery(e).removeClass(function(e,t){var r=new RegExp("(^|\\s)"+n+"\\S+","g");return(t.match(r)||[]).join(" ")})}};String.prototype.replace_all=function(e,n){return this.replace(new RegExp(e,"g"),n)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]});var $=jQuery;$.fn.isVisible=function(e){var n=$("undefined"!==e?e:window),t=n.scrollTop(),r=$(this).height();return r>=t};
!function(n){"use strict";var t=AwesomeUtil.detect_os();"MacOS"==t&&n("html").addClass("mac"),n(function(){var t=new AwesomeAjax("ats"),e=new ATS_Ajax;self.spinner=n("#main-spinner"),self.content=n("#a-team-showcase"),self.animation_start=function(){self.spinner.addClass("fade-animation-in")},self.animation_end=function(){self.spinner.removeClass("fade-animation-in")},self.hide_content=function(){self.content.removeClass("fade-animation-in")},self.show_content=function(){self.content.addClass("fade-animation-in")},self.animation_start(),t.ajax({action:"ats_get_settings",success_handler:function(n){self.show_content(),self.animation_end(),window.settings_model=new AwesomeModel(n)}}),n('[data-action="add-model"]').on("keypress",function(n){return 13!=n.keyCode}),n('input[data-action="add-model"]').on("keyup",function(e){var a=n(this),i=n(this).parents(".panel-footer").find(".a-spinner"),o=n(this).parent("form"),s=n(this).attr("data-model");13==e.keyCode&&(i.show(),t.ajax({action:"ats_update_or_new_"+s,data:{data:{name:o.find("input").val()},model:s},success_handler:function(n){a.val(""),setTimeout(function(){window.location.reload()},500)}}))}),n('[data-action="modal"]').lightbox({minWidth:50,minHeight:100,labels:{close:'<svg viewBox="0 0 56 56"><use xlink:href="#icon-delete"></use></svg>'}});var a={id:"ats",container:"#action-add-buttons",content:"#action-add-buttons-tooltip",width:180,data:{}},i=new AwesomeTooltip(a);i.init(),e.get_templates()})}(jQuery);
!function(e){"function"==typeof define&&define.amd?define(["underscore","backbone","exports"],e):"object"==typeof exports?e(require("underscore"),require("backbone"),exports):e(_,Backbone,{})}(function(e,t,i){t.Stickit=i,i._handlers=[],i.addHandler=function(t){t=e.map(e.flatten([t]),function(t){return e.defaults({},t,{updateModel:!0,updateView:!0,updateMethod:"text"})}),this._handlers=this._handlers.concat(t)},i.ViewMixin={_modelBindings:null,unstickit:function(t,i){if(e.isObject(i))return void e.each(i,function(e,i){this.unstickit(t,i)},this);var n=[],a=[];this._modelBindings=e.reject(this._modelBindings,function(e){return t&&e.model!==t||i&&e.config.selector!=i?void 0:(e.model.off(e.event,e.fn),a.push(e.config._destroy),n.push(e.model),!0)}),e.invoke(e.uniq(n),"trigger","stickit:unstuck",this.cid),e.each(e.uniq(a),function(e){e.call(this)},this),this.$el.off(".stickit"+(t?"."+t.cid:""),i)},stickit:function(t,i){var n=t||this.model,a=i||e.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(n,a);var o=this.remove;return o.stickitWrapped||(this.remove=function(){var e=this;return this.unstickit(),o&&(e=o.apply(this,arguments)),e}),this.remove.stickitWrapped=!0,this},addBinding:function(t,i,a){var v=t||this.model,g=".stickit."+v.cid;if(a=a||{},e.isObject(i)){var b=i;return void e.each(b,function(e,t){this.addBinding(v,t,e)},this)}var k=":el"===i?this.$el:this.$(i);if(this.unstickit(v,i),k.length){e.isString(a)&&(a={observe:a}),e.isFunction(a.observe)&&(a.observe=a.observe.call(this));var m=u(k,a),_=m.observe;m.selector=i,m.view=this;var y=m.bindId=e.uniqueId(),w=e.extend({stickitChange:m},m.setOptions);if(m._destroy=function(){o.call(this,m.destroy,k,v,m)},d(k,m,v,_),h(k,m,v,_),f(k,m,v,_),_){e.each(m.events,function(t){var a=t+g,s=function(e){var t=o.call(this,m.getVal,k,e,m,n.call(arguments,1)),i=r(m.updateModel,t,e,m);i&&c(v,_,t,w,m)},l=":el"===i?"":i;this.$el.on(a,l,e.bind(s,this))},this),e.each(e.flatten([_]),function(e){s(v,"change:"+e,m,function(e,t,i){var n=i&&i.stickitChange&&i.stickitChange.bindId;if(n!==y){var a=l(v,_,m);p(k,m,a,v)}})});var V=l(v,_,m);p(k,m,V,v,!0)}o.call(this,m.initialize,k,v,m)}}},e.extend(t.View.prototype,i.ViewMixin);var n=[].slice,a=function(t,i){var n=(i||"").split("."),a=e.reduce(n,function(e,t){return e[t]},t);return null==a?t:a},o=function(t){return t=e.isString(t)?a(this,t):t,t?t.apply(this,n.call(arguments,1)):void 0},r=function(t,i,n){if(e.isBoolean(t))return t;if(e.isFunction(t)||e.isString(t)){var a=e.last(arguments).view;return o.apply(a,arguments)}return!1},s=function(e,t,i,n){var a=i.view;e.on(t,n,a),a._modelBindings.push({model:e,event:t,fn:n,config:i})},c=function(t,i,n,a,r){var s={},c=r.view;r.onSet&&(n=o.call(c,r.onSet,n,r)),r.set?o.call(c,r.set,i,n,a,r):(s[i]=n,e.isArray(i)&&e.isArray(n)&&(s=e.reduce(i,function(t,i,a){return t[i]=e.has(n,a)?n[a]:null,t},{})),t.set(s,a))},l=function(t,i,n){var a=n.view,r=function(e){return t[n.escape?"escape":"get"](e)},s=function(e){return null==e?"":e},c=e.isArray(i)?e.map(i,r):r(i);return n.onGet&&(c=o.call(a,n.onGet,c,n)),e.isArray(c)?e.map(c,s):s(c)},u=i.getConfiguration=function(t,n){var a=[{updateModel:!1,updateMethod:"text",update:function(e,t,i,n){e[n.updateMethod]&&e[n.updateMethod](t)},getVal:function(e,t,i){return e[i.updateMethod]()}}];a=a.concat(e.filter(i._handlers,function(e){return t.is(e.selector)})),a.push(n);var o=e.extend.apply(e,a);return e.has(o,"updateView")||(o.updateView=!o.visible),o},d=function(t,i,n,a){var o=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"],r=i.view;e.each(i.attributes||[],function(c){c=e.clone(c),c.view=r;var u="",d=c.observe||(c.observe=a),f=function(){var i=e.contains(o,c.name)?"prop":"attr",a=l(n,d,c);"class"===c.name?(t.removeClass(u).addClass(a),u=a):t[i](c.name,a)};e.each(e.flatten([d]),function(e){s(n,"change:"+e,i,f)}),f()})},f=function(t,i,n,a){e.each(i.classes||[],function(a,o){e.isString(a)&&(a={observe:a}),a.view=i.view;var r=a.observe,c=function(){var e=l(n,r,a);t.toggleClass(o,!!e)};e.each(e.flatten([r]),function(e){s(n,"change:"+e,i,c)}),c()})},h=function(t,i,n,a){if(null!=i.visible){var r=i.view,c=function(){var s=i.visible,c=i.visibleFn,u=l(n,a,i),d=!!u;(e.isFunction(s)||e.isString(s))&&(d=!!o.call(r,s,u,i)),c?o.call(r,c,t,d,i):t.toggle(d)};e.each(e.flatten([a]),function(e){s(n,"change:"+e,i,c)}),c()}},p=function(e,t,i,n,a){var s=t.view;r(t.updateView,i,t)&&(o.call(s,t.update,e,i,n,t),a||o.call(s,t.afterUpdate,e,i,t))};return i.addHandler([{selector:"[contenteditable]",updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:'input[type="radio"]',events:["change"],update:function(e,t){e.filter('[value="'+t+'"]').prop("checked",!0)},getVal:function(e){return e.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(i,n,a,o){if(i.length>1)n||(n=[]),i.each(function(i,a){var o=t.$(a),r=o.val(),s=e.some(n,function(e){return""+e===r});o.prop("checked",s)});else{var r=e.isBoolean(n)?n:""+n===i.val();i.prop("checked",r)}},getVal:function(i){var n;if(i.length>1)n=e.reduce(i,function(e,i){var n=t.$(i);return n.prop("checked")&&e.push(n.val()),e},[]);else{n=i.prop("checked");var a=i.val();"on"!==a&&null!=a&&(n=n?i.val():null)}return n}},{selector:"select",events:["change"],update:function(i,n,r,s){var c,u=s.selectOptions,d=u&&u.collection||void 0,f=i.prop("multiple");if(!u){u={};var h=function(e){return e.map(function(e,i){var n=t.$(i).data("stickit-bind-val");return{value:void 0!==n?n:i.value,label:i.text}}).get()};i.find("optgroup").length?(d={opt_labels:[]},i.find("> option").length&&(d.opt_labels.push(void 0),e.each(i.find("> option"),function(e){d[void 0]=h(t.$(e))})),e.each(i.find("optgroup"),function(e){var i=t.$(e).attr("label");d.opt_labels.push(i),d[i]=h(t.$(e).find("option"))})):d=h(i.find("option"))}u.valuePath=u.valuePath||"value",u.labelPath=u.labelPath||"label",u.disabledPath=u.disabledPath||"disabled";var p=function(i,n,o){e.each(i,function(i){var r,s,c,l=t.$("<option/>"),d=i,h=function(t,i,n){l.text(t),d=i,l.data("stickit-bind-val",d),e.isArray(d)||e.isObject(d)||l.val(d),n===!0&&l.prop("disabled","disabled")};"__default__"===i?(r=o.label,s=o.value,c=o.disabled):(r=a(i,u.labelPath),s=a(i,u.valuePath),c=a(i,u.disabledPath)),h(r,s,c);var p=function(){return f||null==d||null==o||d!==o?e.isObject(o)&&e.isEqual(d,o)?!0:!1:!0};p()?l.prop("selected",!0):f&&e.isArray(o)&&e.each(o,function(t){e.isObject(t)&&(t=a(t,u.valuePath)),(t===d||e.isObject(t)&&e.isEqual(d,t))&&l.prop("selected",!0)}),n.append(l)})};if(i.find("*").remove(),e.isString(d)){var v=window;0===d.indexOf("this.")&&(v=this),d=d.replace(/^[a-z]*\.(.+)$/,"$1"),c=a(v,d)}else c=e.isFunction(d)?o.call(this,d,i,s):d;if(c instanceof t.Collection){var g=c,b=function(){var e=l(r,s.observe,s);o.call(this,s.update,i,e,r,s)},k=function(){g.off("add remove reset sort",b)},m=function(){k(),g.off("stickit:selectRefresh"),g.off("stickit:selectRefreshForView"),r.off("stickit:selectRefresh")};g.trigger("stickit:selectRefreshForView",this.cid),g.once("stickit:selectRefreshForView",function(e){this.cid==e&&g.trigger("stickit:selectRefresh")},this),g.once("stickit:selectRefresh",k,this),g.on("add remove reset sort",b,this),r.trigger("stickit:selectRefresh"),r.once("stickit:selectRefresh",function(){r.off("stickit:unstuck",m)}),r.once("stickit:unstuck",m,this),c=c.toJSON()}if(u.defaultOption){var _=e.isFunction(u.defaultOption)?u.defaultOption.call(this,i,s):u.defaultOption;p(["__default__"],i,_)}if(e.isArray(c))p(c,i,n);else if(c.opt_labels)e.each(c.opt_labels,function(e){var a=t.$("<optgroup/>").attr("label",e);p(c[e],a,n),i.append(a)});else{var y,w=[];for(var V in c)y={},y[u.valuePath]=V,y[u.labelPath]=c[V],w.push(y);w=e.sortBy(w,u.comparator||u.labelPath),p(w,i,n)}},getVal:function(i){var n=i.find("option:selected");return i.prop("multiple")?e.map(n,function(e){return t.$(e).data("stickit-bind-val")}):n.data("stickit-bind-val")}}]),i});
!function(e,t){"undefined"!=typeof exports?module.exports=t(require("jquery"),require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["jquery","underscore","backbone"],t):t(e.$,e._,e.Backbone)}(this,function(e,t,r){"use strict";var i,n=[];return r.NestedModel=r.Model.extend({get:function(e){return r.NestedModel.walkThenGet(this.attributes,e)},previous:function(e){return r.NestedModel.walkThenGet(this._previousAttributes,e)},has:function(e){var r=this.get(e);return!(null===r||t.isUndefined(r))},set:function(e,n,s){var a,d,l,h=r.NestedModel.deepClone(this.attributes);if(t.isString(e)?a=r.NestedModel.attrPath(e):t.isArray(e)&&(a=e),a)s=s||{},this._setAttr(h,a,n,s);else{s=n||{};var u=e;for(var o in u)u.hasOwnProperty(o)&&this._setAttr(h,r.NestedModel.attrPath(o),s.unset?void 0:u[o],s)}return i=r.NestedModel.__super__.changedAttributes.call(this),s.unset&&a&&1===a.length?(d={},d[e]=void 0,i=t.omit(i,t.keys(d)),l=r.NestedModel.__super__.set.call(this,d,s)):(d=h,s.unset&&a?(s=t.extend({},s),delete s.unset):s.unset&&t.isObject(e)&&(d=e),i=t.omit(i,t.keys(d)),l=r.NestedModel.__super__.set.call(this,d,s)),l?(this._runDelayedTriggers(),this):(this.changed={},i={},!1)},unset:function(e,r){return this.set(e,void 0,t.extend({},r,{unset:!0}))},clear:function(e){i={},e=e||{};var r=t.clone(this.attributes);if(!e.silent&&this.validate&&!this.validate(r,e))return!1;var n=this.changed={},s=this,a=function(e,r,i){t.each(e,function(d,l){var h=r;t.isArray(e)?h+="["+l+"]":r?h+="."+l:h=l,d=e[l],t.isObject(d)&&a(d,h,i),i.silent||s._delayedChange(h,null,i),n[h]=null})};return a(this.attributes,"",e),this.attributes={},e.silent||this._delayedTrigger("change"),this._runDelayedTriggers(),this},add:function(e,r,i){var n=this.get(e);if(!t.isArray(n))throw new Error("current value is not an array");return this.set(e+"["+n.length+"]",r,i)},remove:function(e,i){i=i||{};var n=r.NestedModel.attrPath(e),s=t.initial(n),a=this.get(s),d=t.last(n);if(!t.isArray(a))throw new Error("remove() must be called on a nested array");var l=!i.silent&&a.length>=d+1,h=a[d];if(a.splice(d,1),i.silent=!0,this.set(s,a,i),l){e=r.NestedModel.createAttrStr(s),this.trigger("remove:"+e,this,h);for(var u=s.length;u>=1;u--)e=r.NestedModel.createAttrStr(t.first(s,u)),this.trigger("change:"+e,this,h);this.trigger("change",this,h)}return this},changedAttributes:function(e){var n=r.NestedModel.__super__.changedAttributes.call(this,e);return t.isObject(n)?t.extend({},i,n):!1},toJSON:function(){return r.NestedModel.deepClone(this.attributes)},_delayedTrigger:function(){n.push(arguments)},_delayedChange:function(e,t,r){this._delayedTrigger("change:"+e,this,t,r),this.changed||(this.changed={}),this.changed[e]=t},_runDelayedTriggers:function(){for(;n.length>0;)this.trigger.apply(this,n.shift())},_setAttr:function(e,i,n,s){s=s||{};var a=i.length,d=this;r.NestedModel.walkPath(e,i,function(e,l,h){var u=t.last(l),o=r.NestedModel.createAttrStr(l),c=!t.isEqual(e[u],n);if(l.length===a){if(s.unset){if(delete e[u],t.isArray(e)){var g=r.NestedModel.createAttrStr(t.initial(i));d._delayedTrigger("remove:"+g,d,e[u])}}else e[u]=n;if(!s.silent&&t.isObject(n)&&c){var f=[],v=function(e,r){if(!(t.indexOf(f,e)>-1)){f.push(e);var i,n;for(var a in e)e.hasOwnProperty(a)&&(i=r+"."+a,n=e[a],t.isEqual(d.get(i),n)||d._delayedChange(i,n,s),t.isObject(n)&&v(n,i))}};v(n,o)}}else e[u]||(t.isNumber(h)?e[u]=[]:e[u]={});s.silent||(l.length>1&&c&&d._delayedChange(o,e[u],s),t.isArray(e[u])&&d._delayedTrigger("add:"+o,d,e[u]))})}},{attrPath:function(e){var r;return t.isString(e)?(r=""===e?[""]:e.match(/[^\.\[\]]+/g),r=t.map(r,function(e){return e.match(/^\d+$/)?parseInt(e,10):e})):r=e,r},createAttrStr:function(e){var r=e[0];return t.each(t.rest(e),function(e){r+=t.isNumber(e)?"["+e+"]":"."+e}),r},deepClone:function(t){return e.extend(!0,{},t)},walkPath:function(e,t,r,i){for(var n,s=e,a=0;a<t.length&&(r.call(i||this,s,t.slice(0,a+1),t[a+1]),n=t[a],s=s[n],s);a++);},walkThenGet:function(e,i){var n,s=r.NestedModel.attrPath(i);return r.NestedModel.walkPath(e,s,function(e,r){var i=t.last(r);r.length===s.length&&(n=e[i])}),n}}),r});
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(t){f.Plugins[t].initialized||(f.Plugins[t].methods._setup.call(document),f.Plugins[t].initialized=!0)}function n(t,e,n,s){var i,r={raw:{}};s=s||{};for(i in s)s.hasOwnProperty(i)&&("classes"===t?(r.raw[s[i]]=e+"-"+s[i],r[s[i]]="."+e+"-"+s[i]):(r.raw[i]=s[i],r[i]=s[i]+"."+e));for(i in n)n.hasOwnProperty(i)&&("classes"===t?(r.raw[i]=n[i].replace(/{ns}/g,e),r[i]=n[i].replace(/{ns}/g,"."+e)):(r.raw[i]=n[i].replace(/.{ns}/g,""),r[i]=n[i].replace(/{ns}/g,e)));return r}function s(){var t,e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},n=["transition","-webkit-transition"],s={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},i="transitionend",r="",o="",a=document.createElement("div");for(t in e)if(e.hasOwnProperty(t)&&t in a.style){i=e[t],f.support.transition=!0;break}w.transitionEnd=i+".{ns}";for(t in n)if(n.hasOwnProperty(t)&&n[t]in a.style){r=n[t];break}f.transition=r;for(t in s)if(s.hasOwnProperty(t)&&s[t]in a.style){f.support.transform=!0,o=s[t];break}f.transform=o}function i(){f.windowWidth=f.$window.width(),f.windowHeight=f.$window.height(),m=d.startTimer(m,y,r)}function r(){for(var t in f.ResizeHandlers)f.ResizeHandlers.hasOwnProperty(t)&&f.ResizeHandlers[t].callback.call(window,f.windowWidth,f.windowHeight)}function o(){if(f.support.raf){f.window.requestAnimationFrame(o);for(var t in f.RAFHandlers)f.RAFHandlers.hasOwnProperty(t)&&f.RAFHandlers[t].callback.call(window)}}function a(t,e){return parseInt(t.priority)-parseInt(e.priority)}var c="undefined"!=typeof window?window:this,l=c.document,u=function(){this.Version="1.0.1",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=c,this.$window=t(c),this.document=l,this.$document=t(l),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},d={killEvent:function(t,e){try{t.preventDefault(),t.stopPropagation(),e&&t.stopImmediatePropagation()}catch(n){}},startTimer:function(t,e,n,s){return d.clearTimer(t),s?setInterval(n,e):setTimeout(n,e)},clearTimer:function(t,e){t&&(e?clearInterval(t):clearTimeout(t),t=null)},sortAsc:function(t,e){return parseInt(t,10)-parseInt(e,10)},sortDesc:function(t,e){return parseInt(e,10)-parseInt(t,10)},decodeEntities:function(t){var e=f.document.createElement("textarea");return e.innerHTML=t,e.value},parseQueryString:function(t){for(var e={},n=t.slice(t.indexOf("?")+1).split("&"),s=0;s<n.length;s++){var i=n[s].split("=");e[i[0]]=i[1]}return e}},f=new u,p=t.Deferred(),h={base:"{ns}",element:"{ns}-element"},w={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"};u.prototype.NoConflict=function(){f.DontConflict=!0;for(var e in f.Plugins)f.Plugins.hasOwnProperty(e)&&(t[e]=f.Conflicts[e],t.fn[e]=f.Conflicts.fn[e])},u.prototype.Plugin=function(s,i){return f.Plugins[s]=function(e,s){function i(n){var i,r,a,c="object"===t.type(n),l=this,u=t();for(n=t.extend(!0,{},s.defaults||{},c?n:{}),r=0,a=l.length;a>r;r++)if(i=l.eq(r),!o(i)){var d="__"+s.guid++,f=s.classes.raw.base+d,p=i.data(e+"-options"),h=t.extend(!0,{$el:i,guid:d,rawGuid:f,dotGuid:"."+f},n,"object"===t.type(p)?p:{});i.addClass(s.classes.raw.element).data(y,h),s.methods._construct.apply(i,[h].concat(Array.prototype.slice.call(arguments,c?1:0))),u=u.add(i)}for(r=0,a=u.length;a>r;r++)i=u.eq(r),s.methods._postConstruct.apply(i,[o(i)]);return l}function r(){s.functions.iterate.apply(this,[s.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(s.classes.raw.element).removeData(y)}function o(t){return t.data(y)}function c(e){if(this instanceof t){var n=s.methods[e];return"object"!==t.type(e)&&e?n&&0!==e.indexOf("_")?s.functions.iterate.apply(this,[n].concat(Array.prototype.slice.call(arguments,1))):this:i.apply(this,arguments)}}function l(e){var n=s.utilities[e]||s.utilities._initialize||!1;return n?n.apply(window,Array.prototype.slice.call(arguments,"object"===t.type(e)?0:1)):void 0}function u(e){s.defaults=t.extend(!0,s.defaults,e||{})}function p(e){for(var n=this,s=0,i=n.length;i>s;s++){var r=n.eq(s),a=o(r)||{};"undefined"!==t.type(a.$el)&&e.apply(r,[a].concat(Array.prototype.slice.call(arguments,1)))}return n}var m="fs-"+e,y="fs"+e.replace(/(^|\s)([a-z])/g,function(t,e,n){return e+n.toUpperCase()});return s.initialized=!1,s.priority=s.priority||10,s.classes=n("classes",m,h,s.classes),s.events=n("events",e,w,s.events),s.functions=t.extend({getData:o,iterate:p},d,s.functions),s.methods=t.extend(!0,{_setup:t.noop,_construct:t.noop,_postConstruct:t.noop,_destruct:t.noop,_resize:!1,destroy:r},s.methods),s.utilities=t.extend(!0,{_initialize:!1,_delegate:!1,defaults:u},s.utilities),s.widget&&(f.Conflicts.fn[e]=t.fn[e],t.fn[y]=c,f.DontConflict||(t.fn[e]=t.fn[y])),f.Conflicts[e]=t[e],t[y]=s.utilities._delegate||l,f.DontConflict||(t[e]=t[y]),s.namespace=e,s.namespaceClean=y,s.guid=0,s.methods._resize&&(f.ResizeHandlers.push({namespace:e,priority:s.priority,callback:s.methods._resize}),f.ResizeHandlers.sort(a)),s.methods._raf&&(f.RAFHandlers.push({namespace:e,priority:s.priority,callback:s.methods._raf}),f.RAFHandlers.sort(a)),s}(s,i),p.then(function(){e(s)}),f.Plugins[s]};var m=null,y=20;return f.$window.on("resize.fs",i),i(),o(),t(function(){f.$body=t("body"),p.resolve(),f.support.nativeMatchMedia=f.support.matchMedia&&!t("html").hasClass("no-matchmedia")}),w.clickTouchStart=w.click+" "+w.touchStart,s(),window.Formstone=f,f});
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function a(e){if(e.touches=[],e.touching=!1,this.on(X.dragStart,Y.killEvent),e.swipe&&(e.pan=!0),e.scale&&(e.axis=!1),e.axisX="x"===e.axis,e.axisY="y"===e.axis,t.support.pointer){var a="";!e.axis||e.axisX&&e.axisY?a="none":(e.axisX&&(a+=" pan-y"),e.axisY&&(a+=" pan-x")),g(this,a),this.on(X.pointerDown,e,i)}else this.on(X.touchStart,e,i).on(X.mouseDown,e,s)}function n(){this.off(X.namespace),g(this,"")}function i(e){e.preventManipulation&&e.preventManipulation();var t=e.data,a=e.originalEvent;if(a.type.match(/(up|end|cancel)$/i))return void r(e);if(a.pointerId){var n=!1;for(var i in t.touches)t.touches[i].id===a.pointerId&&(n=!0,t.touches[i].pageX=a.pageX,t.touches[i].pageY=a.pageY);n||t.touches.push({id:a.pointerId,pageX:a.pageX,pageY:a.pageY})}else t.touches=a.touches;a.type.match(/(down|start)$/i)?s(e):a.type.match(/move$/i)&&o(e)}function s(a){var n=a.data,s="undefined"!==e.type(n.touches)?n.touches[0]:null;n.touching||(n.startE=a.originalEvent,n.startX=s?s.pageX:a.pageX,n.startY=s?s.pageY:a.pageY,n.startT=(new Date).getTime(),n.scaleD=1,n.passed=!1),n.$links&&n.$links.off(X.click);var p=u(n.scale?X.scaleStart:X.panStart,a,n.startX,n.startY,n.scaleD,0,0,"","");if(n.scale&&n.touches&&n.touches.length>=2){var c=n.touches;n.pinch={startX:l(c[0].pageX,c[1].pageX),startY:l(c[0].pageY,c[1].pageY),startD:h(c[1].pageX-c[0].pageX,c[1].pageY-c[0].pageY)},p.pageX=n.startX=n.pinch.startX,p.pageY=n.startY=n.pinch.startY}n.touching||(n.touching=!0,n.pan&&v.on(X.mouseMove,n,o).on(X.mouseUp,n,r),t.support.pointer?v.on([X.pointerMove,X.pointerUp,X.pointerCancel].join(" "),n,i):v.on([X.touchMove,X.touchEnd,X.touchCancel].join(" "),n,i),n.$el.trigger(p))}function o(t){var a=t.data,n="undefined"!==e.type(a.touches)?a.touches[0]:null,i=n?n.pageX:t.pageX,s=n?n.pageY:t.pageY,o=i-a.startX,p=s-a.startY,c=o>0?"right":"left",g=p>0?"down":"up",d=Math.abs(o)>x,f=Math.abs(p)>x;if(!a.passed&&a.axis&&(a.axisX&&f||a.axisY&&d))r(t);else{!a.passed&&(!a.axis||a.axis&&a.axisX&&d||a.axisY&&f)&&(a.passed=!0),a.passed&&(Y.killEvent(t),Y.killEvent(a.startE));var v=!0,w=u(a.scale?X.scale:X.pan,t,i,s,a.scaleD,o,p,c,g);if(a.scale)if(a.touches&&a.touches.length>=2){var M=a.touches;a.pinch.endX=l(M[0].pageX,M[1].pageX),a.pinch.endY=l(M[0].pageY,M[1].pageY),a.pinch.endD=h(M[1].pageX-M[0].pageX,M[1].pageY-M[0].pageY),a.scaleD=a.pinch.endD/a.pinch.startD,w.pageX=a.pinch.endX,w.pageY=a.pinch.endY,w.scale=a.scaleD,w.deltaX=a.pinch.endX-a.pinch.startX,w.deltaY=a.pinch.endY-a.pinch.startY}else a.pan||(v=!1);v&&a.$el.trigger(w)}}function p(t,a){t.on(X.click,a,c);var n=e._data(t[0],"events").click;n.unshift(n.pop())}function c(e){Y.killEvent(e,!0),e.data.$links.off(X.click)}function r(t){var a=t.data,n="undefined"!==e.type(a.touches)?a.touches[0]:null,i=n?n.pageX:t.pageX,s=n?n.pageY:t.pageY,o=i-a.startX,c=s-a.startY,r=(new Date).getTime(),l=a.scale?X.scaleEnd:X.panEnd,h=o>0?"right":"left",g=c>0?"down":"up",d=Math.abs(o)>1,f=Math.abs(c)>1;if(a.swipe&&Math.abs(o)>x&&r-a.startT<w&&(l=X.swipe),a.axis&&(a.axisX&&f||a.axisY&&d)||d||f){a.$links=a.$el.find("a");for(var Y=0,M=a.$links.length;M>Y;Y++)p(a.$links.eq(Y),a)}var m=u(l,t,i,s,a.scaleD,o,c,h,g);v.off([X.touchMove,X.touchEnd,X.touchCancel,X.mouseMove,X.mouseUp,X.pointerMove,X.pointerUp,X.pointerCancel].join(" ")),a.$el.trigger(m),a.touches=[],a.scale,a.touching=!1}function u(t,a,n,i,s,o,p,c,r){return e.Event(t,{originalEvent:a,bubbles:!0,pageX:n,pageY:i,scale:s,deltaX:o,deltaY:p,directionX:c,directionY:r})}function l(e,t){return(e+t)/2}function h(e,t){return Math.sqrt(e*e+t*t)}function g(e,t){e.css({"-ms-touch-action":t,"touch-action":t})}var d=!t.window.PointerEvent,f=t.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1},methods:{_construct:a,_destruct:n},events:{pointerDown:d?"MSPointerDown":"pointerdown",pointerUp:d?"MSPointerUp":"pointerup",pointerMove:d?"MSPointerMove":"pointermove",pointerCancel:d?"MSPointerCancel":"pointercancel"}}),X=f.events,Y=f.functions,v=t.$window,x=10,w=50;X.pan="pan",X.panStart="panstart",X.panEnd="panend",X.scale="scale",X.scaleStart="scalestart",X.scaleEnd="scaleend",X.swipe="swipe"});
!function(t){"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery,Formstone)}(function(t,e){"use strict";function r(t,r){if(r){t.$target=this.find(t.target),t.$check=t.target?t.$target:this,t.callback=r,t.styles=s(t.$check),t.timer=null;var n=t.$check.css(e.transition+"-duration"),i=parseFloat(n);e.support.transition&&n&&i?this.on(u.transitionEnd,t,a):t.timer=f.startTimer(t.timer,50,function(){o(t)},!0)}}function n(t){f.clearTimer(t.timer,!0),this.off(u.namespace)}function a(e){e.stopPropagation(),e.preventDefault();var r=e.data,n=e.originalEvent,a=r.target?r.$target:r.$el;r.property&&n.propertyName!==r.property||!t(n.target).is(a)||i(r)}function i(t){t.always||t.$el[l.namespaceClean]("destroy"),t.callback.apply(t.$el)}function o(t){var e=s(t.$check);c(t.styles,e)||i(t),t.styles=e}function s(e){var r,n,a,i={};if(e instanceof t&&(e=e[0]),p.getComputedStyle){r=p.getComputedStyle(e,null);for(var o=0,s=r.length;s>o;o++)n=r[o],a=r.getPropertyValue(n),i[n]=a}else if(e.currentStyle){r=e.currentStyle;for(n in r)r[n]&&(i[n]=r[n])}return i}function c(e,r){if(t.type(e)!==t.type(r))return!1;for(var n in e)if(!e.hasOwnProperty(n)||!r.hasOwnProperty(n)||e[n]!==r[n])return!1;return!0}var l=e.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:r,_destruct:n,resolve:i}}),u=l.events,f=l.functions,p=e.window});
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./scrollbar","./touch"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(){K=t.$body}function s(i){i.multiple=this.prop("multiple"),i.disabled=this.is(":disabled")||this.is("[readonly]"),i.lastIndex=!1,i.multiple?i.links=!1:i.external&&(i.links=!0);var s=this.find("[selected]").not(":disabled"),l=this.find(":selected").not(":disabled"),o=l.text(),d=this.find("option").index(l);i.multiple||""===i.label||s.length?i.label="":(l=this.prepend('<option value="" class="'+q.item_placeholder+'" selected>'+i.label+"</option>"),o=i.label,d=0);var n=this.find("option, optgroup"),p=n.filter("option"),c=e("[for="+this.attr("id")+"]");i.tabIndex=this[0].tabIndex,this[0].tabIndex=-1,c.length&&(c[0].tabIndex=-1);var f=[q.base,i.theme,i.customClass];i.mobile||t.isMobile?f.push(q.mobile):i.cover&&f.push(q.cover),i.multiple&&f.push(q.multiple),i.disabled&&f.push(q.disabled);var u='<div class="'+f.join(" ")+'" tabindex="'+i.tabIndex+'"></div>',x="";i.multiple||(x+='<button type="button" class="'+q.selected+'" tabindex="-1">',x+=e("<span></span>").text(_(o,i.trim)).html(),x+="</button>"),x+='<div class="'+q.options+'">',x+="</div>",this.wrap(u).after(x),i.$dropdown=this.parent(E.base),i.$label=c,i.$allOptions=n,i.$options=p,i.$selected=i.$dropdown.find(E.selected),i.$wrapper=i.$dropdown.find(E.options),i.$placeholder=i.$dropdown.find(E.placeholder),i.index=-1,i.closed=!0,i.focused=!1,a(i),i.links?this.attr("aria-hidden","true"):i.$selected.add(i.$wrapper).attr("aria-hidden","true"),i.multiple||w(d,i),void 0!==e.fn.fsScrollbar&&i.$wrapper.fsScrollbar({theme:i.theme}),i.$selected.on(S.click,i,r),i.$dropdown.on(S.click,E.item,i,b).on(S.close,i,m),this.on(S.change,i,$),t.isMobile||(this.on(S.focusIn,i,function(e){e.data.$dropdown.trigger(S.raw.focus)}),i.$dropdown.on(S.focusIn,i,v).on(S.focusOut,i,h))}function l(t){t.$dropdown.hasClass(q.open)&&t.$selected.trigger(S.click),void 0!==e.fn.fsScrollbar&&t.$wrapper.fsScrollbar("destroy"),t.links&&this.removeAttr("aria-hidden"),t.$el[0].tabIndex=t.tabIndex,t.$label.length&&(t.$label[0].tabIndex=t.tabIndex),t.$dropdown.off(S.namespace),t.$options.off(S.namespace),t.$placeholder.remove(),t.$selected.remove(),t.$wrapper.remove(),t.$el.off(S.namespace).show().unwrap()}function o(e,t){if("undefined"!=typeof t){var i=e.$items.index(e.$items.filter("[data-value="+t+"]"));e.$items.eq(i).addClass(q.item_disabled),e.$options.eq(i).prop("disabled",!0)}else e.$dropdown.hasClass(q.open)&&e.$selected.trigger(S.click),e.$dropdown.addClass(q.disabled),e.$el.prop("disabled",!0),e.disabled=!0}function d(e,t){if("undefined"!=typeof t){var i=e.$items.index(e.$items.filter("[data-value="+t+"]"));e.$items.eq(i).removeClass(q.item_disabled),e.$options.eq(i).prop("disabled",!1)}else e.$dropdown.removeClass(q.disabled),e.$el.prop("disabled",!1),e.disabled=!1}function n(t){void 0!==e.fn.fsScrollbar&&t.$wrapper.fsScrollbar("destroy");var i=t.index;t.$allOptions=t.$el.find("option, optgroup"),t.$options=t.$allOptions.filter("option"),t.index=-1,i=t.$options.index(t.$options.filter(":selected")),a(t),t.multiple||w(i,t),void 0!==e.fn.fsScrollbar&&t.$wrapper.fsScrollbar()}function a(t){for(var i="",s=0,l=0,o=t.$allOptions.length;o>l;l++){var d=t.$allOptions.eq(l),n=[];if("OPTGROUP"===d[0].tagName)n.push(q.group),d.is(":disabled")&&n.push(q.disabled),i+='<span class="'+n.join(" ")+'">'+d.attr("label")+"</span>";else{var a=d.val(),r=d.data("label"),p=t.links?"a":'button type="button"';d.attr("value")||d.attr("value",a),n.push(q.item),d.hasClass(q.item_placeholder)&&(n.push(q.item_placeholder),p="span"),d.is(":selected")&&n.push(q.item_selected),d.is(":disabled")&&n.push(q.item_disabled),i+="<"+p+' class="'+n.join(" ")+'"',t.links?"span"===p?i+=' aria-hidden="true"':(i+=' href="'+a+'"',t.external&&(i+=' target="_blank"')):i+=' data-value="'+a+'"',i+=' tabindex="-1">',i+=r?r:T.decodeEntities(_(d.text(),t.trim)),i+="</"+p+">",s++}}t.$items=t.$wrapper.html(e.parseHTML(i)).find(E.item)}function r(e){T.killEvent(e);var i=e.data;if(!i.disabled)if(i.mobile||!t.isMobile||t.isFirefoxMobile||t.isIEMobile)i.closed?c(i):f(i);else{var s=i.$el[0];if(M.createEvent){var l=M.createEvent("MouseEvents");l.initMouseEvent("mousedown",!1,!0,O,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(l)}else s.fireEvent&&s.fireEvent("onmousedown")}p(i)}function p(t){e(E.base).not(t.$dropdown).trigger(S.close,[t])}function c(e){if(e.closed){var t=e.$dropdown.offset(),i=K.outerHeight(),s=e.$wrapper.outerHeight(!0);e.index>=0?e.$items.eq(e.index).position():{left:0,top:0};t.top+s>i-e.bottomEdge&&e.$dropdown.addClass(q.bottom),K.on(S.click+e.dotGuid,":not("+E.options+")",e,u),e.$dropdown.trigger(S.focusIn),e.$dropdown.addClass(q.open),g(e),e.closed=!1}}function f(e){e&&!e.closed&&(K.off(S.click+e.dotGuid),e.$dropdown.removeClass([q.open,q.bottom].join(" ")),e.closed=!0)}function u(t){T.killEvent(t);var i=t.data;i&&0===e(t.currentTarget).parents(E.base).length&&(f(i),i.$dropdown.trigger(S.focusOut))}function m(e){var t=e.data;t&&(f(t),t.$dropdown.trigger(S.focusOut))}function b(t){var i=e(this),s=t.data;if(T.killEvent(t),!s.disabled){var l=s.$items.index(i);s.focusIndex=l,s.$wrapper.is(":visible")&&(w(l,s,t.shiftKey,t.metaKey||t.ctrlKey),C(s)),s.multiple||f(s),s.$dropdown.trigger(S.focus)}}function $(t,i){var s=e(this),l=t.data;if(!i&&!l.multiple){var o=l.$options.index(l.$options.filter("[value='"+y(s.val())+"']"));l.focusIndex=o,w(o,l),C(l)}}function v(t){T.killEvent(t);var i=(e(t.currentTarget),t.data);i.disabled||i.multiple||i.focused||(p(i),i.focused=!0,i.focusIndex=i.index,i.input="",i.$dropdown.addClass(q.focus).on(S.keyDown+i.dotGuid,i,x))}function h(t,i){T.killEvent(t);var s=(e(t.currentTarget),t.data);s.focused&&s.closed&&(s.focused=!1,s.$dropdown.removeClass(q.focus).off(S.keyDown+s.dotGuid),s.multiple||(f(s),s.index!==s.focusIndex&&(C(s),s.focusIndex=s.index)))}function x(i){var s=i.data;if(s.keyTimer=T.startTimer(s.keyTimer,1e3,function(){s.input=""}),13===i.keyCode)s.closed||(f(s),w(s.index,s)),C(s);else if(!(9===i.keyCode||i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)){T.killEvent(i);var l=s.$items.length-1,o=s.index<0?0:s.index;if(e.inArray(i.keyCode,t.isFirefox?[38,40,37,39]:[38,40])>-1)o+=38===i.keyCode||t.isFirefox&&37===i.keyCode?-1:1,0>o&&(o=0),o>l&&(o=l);else{var d,n,a=String.fromCharCode(i.keyCode).toUpperCase();for(s.input+=a,n=s.index+1;l>=n;n++)if(d=s.$options.eq(n).text().substr(0,s.input.length).toUpperCase(),d===s.input){o=n;break}if(0>o||o===s.index)for(n=0;l>=n;n++)if(d=s.$options.eq(n).text().substr(0,s.input.length).toUpperCase(),d===s.input){o=n;break}}o>=0&&(w(o,s),g(s))}}function w(e,i,s,l){var o=i.$items.eq(e),d=i.$options.eq(e),n=o.hasClass(q.item_selected),a=o.hasClass(q.item_disabled);if(!a)if(i.multiple)if(t.isMobile)a||(n?(d.prop("selected",null),o.removeClass(q.item_selected)):(d.prop("selected",!0),o.addClass(q.item_selected)));else if(s&&i.lastIndex!==!1){var r=i.lastIndex>e?e:i.lastIndex,p=(i.lastIndex>e?i.lastIndex:e)+1;i.$options.prop("selected",null),i.$items.filter(E.item_selected).removeClass(q.item_selected),i.$options.slice(r,p).not("[disabled]").prop("selected",!0),i.$items.slice(r,p).not(E.item_disabled).addClass(q.item_selected)}else l?(n?(d.prop("selected",null),o.removeClass(q.item_selected)):(d.prop("selected",!0),o.addClass(q.item_selected)),i.lastIndex=e):(i.$options.prop("selected",null),i.$items.filter(E.item_selected).removeClass(q.item_selected),d.prop("selected",!0),o.addClass(q.item_selected),i.lastIndex=e);else if(e>-1&&e<i.$items.length){if(e!==i.index){var c=d.data("label")||o.html();i.$selected.html(c).removeClass(E.item_placeholder),i.$items.filter(E.item_selected).removeClass(q.item_selected),i.$el[0].selectedIndex=e,o.addClass(q.item_selected),i.index=e}}else""!==i.label&&i.$selected.html(i.label)}function g(t){var i=t.$items.eq(t.index),s=t.index>=0&&!i.hasClass(q.item_placeholder)?i.position():{left:0,top:0},l=(t.$wrapper.outerHeight()-i.outerHeight())/2;void 0!==e.fn.fsScrollbar?t.$wrapper.fsScrollbar("resize").fsScrollbar("scroll",t.$wrapper.find(".fs-scrollbar-content").scrollTop()+s.top):t.$wrapper.scrollTop(t.$wrapper.scrollTop()+s.top-l)}function C(e){e.links?k(e):e.$el.trigger(S.raw.change,[!0])}function k(e){var t=e.$el.val();e.external?O.open(t):O.location.href=t}function _(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}function y(e){return"string"==typeof e?e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):e}var I=t.Plugin("fsdropdown",{widget:!0,defaults:{bottomEdge:0,cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,theme:"fs-light",trim:0},methods:{_setup:i,_construct:s,_destruct:l,disable:o,enable:d,update:n,open:c,close:f},classes:["cover","bottom","multiple","mobile","open","disabled","focus","selected","options","group","item","item_disabled","item_selected","item_placeholder"],events:{close:"close"}}),E=I.classes,q=E.raw,S=I.events,T=I.functions,O=t.window,M=(t.$window,t.document),K=null});
!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./touch","./transition"],t):t(jQuery,Formstone)}(function(t,e){"use strict";function i(){G=e.$body,J=t("html, body"),U=e.window.location.hash.replace("#","")}function a(){tt&&g()}function o(t){this.on(K.click,t,l);var e=this.data(S+"-gallery");!Z&&U&&e===U&&(Z=!0,this.trigger(K.click))}function n(){s(),this.off(K.namespace)}function r(e,i){e instanceof t&&l.apply(N,[{data:t.extend(!0,{},{$object:e},B,i||{})}])}function l(i){if(!tt){var a=i.data;tt=t.extend({},{visible:!1,gallery:{active:!1},isMobile:e.isMobile||a.mobile,isTouch:e.support.touch,isAnimating:!0,oldContentHeight:0,oldContentWidth:0},a);var o=a.$el,n=a.$object,r=o&&o[0].href?o[0].href||"":"",l=o&&o[0].hash?o[0].hash||"":"",g=(r.toLowerCase().split(".").pop().split(/\#|\?/),o?o.data(S+"-type"):""),d="image"===g||r.match(a.fileTypes)||"data:image"===r.substr(0,10),c=E(r),p="url"===g||!d&&!c&&"http"===r.substr(0,4)&&!l,u="element"===g||!d&&!c&&!p&&"#"===l.substr(0,1),H="undefined"!=typeof n;if(u&&(r=l),!(d||c||p||u||H))return void(tt=null);if(D.killEvent(i),tt.touch=a.touch&&tt.isMobile&&tt.isTouch,tt.margin*=2,tt.type=d?"image":c?"video":"element",d||c){var w=o.data(S+"-gallery");w&&(tt.gallery.active=!0,tt.gallery.id=w,tt.gallery.$items=t("a[data-lightbox-gallery= "+tt.gallery.id+"], a[rel= "+tt.gallery.id+"]"),tt.gallery.index=tt.gallery.$items.index(tt.$el),tt.gallery.total=tt.gallery.$items.length-1)}var v="";tt.isMobile||(v+='<div class="'+[A.raw.overlay,tt.theme,tt.customClass].join(" ")+'"></div>');var $=[A.raw.base,A.raw.loading,A.raw.animating,tt.theme,tt.customClass];tt.fixed&&$.push(A.raw.fixed),tt.isMobile&&$.push(A.raw.mobile),tt.isTouch&&$.push(A.raw.touch),p&&$.push(A.raw.iframed),(u||H)&&$.push(A.raw.inline),v+='<div class="'+$.join(" ")+'">',v+='<button type="button" class="'+A.raw.close+'">'+tt.labels.close+"</button>",v+='<span class="'+A.raw.loading_icon+'"></span>',v+='<div class="'+A.raw.container+'">',v+='<div class="'+A.raw.content+'">',(d||c)&&(v+='<div class="'+A.raw.tools+'">',v+='<div class="'+A.raw.controls+'">',tt.gallery.active&&(v+='<button type="button" class="'+[A.raw.control,A.raw.control_previous].join(" ")+'">'+tt.labels.previous+"</button>",v+='<button type="button" class="'+[A.raw.control,A.raw.control_next].join(" ")+'">'+tt.labels.next+"</button>"),tt.isMobile&&tt.isTouch&&(v+='<button type="button" class="'+[A.raw.caption_toggle].join(" ")+'">'+tt.labels.captionClosed+"</button>"),v+="</div>",v+='<div class="'+A.raw.meta+'">',tt.gallery.active&&(v+='<p class="'+A.raw.position+'"',tt.gallery.total<1&&(v+=' style="display: none;"'),v+=">",v+='<span class="'+A.raw.position_current+'">'+(tt.gallery.index+1)+"</span> ",v+=tt.labels.count,v+=' <span class="'+A.raw.position_total+'">'+(tt.gallery.total+1)+"</span>",v+="</p>"),v+='<div class="'+A.raw.caption+'">',v+=tt.formatter.call(o,a),v+="</div></div>",v+="</div>"),v+="</div></div></div>",G.append(v),tt.$overlay=t(A.overlay),tt.$lightbox=t(A.base),tt.$close=t(A.close),tt.$container=t(A.container),tt.$content=t(A.content),tt.$tools=t(A.tools),tt.$meta=t(A.meta),tt.$position=t(A.position),tt.$caption=t(A.caption),tt.$controlBox=t(A.controls),tt.$controls=t(A.control),tt.isMobile?(tt.paddingVertical=tt.$close.outerHeight(),tt.paddingHorizontal=0,tt.mobilePaddingVertical=parseInt(tt.$content.css("paddingTop"),10)+parseInt(tt.$content.css("paddingBottom"),10),tt.mobilePaddingHorizontal=parseInt(tt.$content.css("paddingLeft"),10)+parseInt(tt.$content.css("paddingRight"),10)):(tt.paddingVertical=parseInt(tt.$lightbox.css("paddingTop"),10)+parseInt(tt.$lightbox.css("paddingBottom"),10),tt.paddingHorizontal=parseInt(tt.$lightbox.css("paddingLeft"),10)+parseInt(tt.$lightbox.css("paddingRight"),10),tt.mobilePaddingVertical=0,tt.mobilePaddingHorizontal=0),tt.contentHeight=tt.$lightbox.outerHeight()-tt.paddingVertical,tt.contentWidth=tt.$lightbox.outerWidth()-tt.paddingHorizontal,tt.controlHeight=tt.$controls.outerHeight(),h(),tt.gallery.active&&(tt.$lightbox.addClass(F.has_controls),P()),Q.on(K.keyDown,j),G.on(K.click,[A.overlay,A.close].join(", "),s),tt.gallery.active&&tt.$lightbox.on(K.click,A.control,V),tt.isMobile&&tt.isTouch&&tt.$lightbox.on(K.click,A.caption_toggle,m),tt.$lightbox.fsTransition({property:"opacity"},function(){d?f(r):c?C(r):p?L(r):u?z(r):H&&X(tt.$object)}).addClass(A.raw.open),tt.$overlay.addClass(A.raw.open)}}function g(t){"object"!=typeof t&&(tt.targetHeight=arguments[0],tt.targetWidth=arguments[1]),"element"===tt.type?Y(tt.$content.find("> :first-child")):"image"===tt.type?y():"video"===tt.type&&_(),c()}function s(t){D.killEvent(t),tt&&(tt.$lightbox.fsTransition("destroy"),tt.$container.fsTransition("destroy"),w(),tt.$lightbox.addClass(A.raw.animating).fsTransition({property:"opacity"},function(){"undefined"!=typeof tt.$inlineTarget&&tt.$inlineTarget.length&&k(),tt.$lightbox.off(K.namespace),tt.$container.off(K.namespace),Q.off(K.keyDown),G.off(K.namespace),tt.$overlay.remove(),tt.$lightbox.remove(),tt=null,Q.trigger(K.close)}),tt.$lightbox.removeClass(A.raw.open),tt.$overlay.removeClass(A.raw.open),tt.isMobile&&J.removeClass(F.lock))}function d(){var t=p();tt.isMobile?0:tt.duration,tt.isMobile||tt.$controls.css({marginTop:(tt.contentHeight-tt.controlHeight-tt.metaHeight)/2}),tt.$lightbox.fsTransition({property:tt.contentHeight!==tt.oldContentHeight?"height":"width"},function(){tt.$container.fsTransition({property:"opacity"},function(){tt.$lightbox.removeClass(A.raw.animating),tt.isAnimating=!1}),tt.$lightbox.removeClass(A.raw.loading),tt.visible=!0,Q.trigger(K.open),tt.gallery.active&&T()}),tt.isMobile||tt.$lightbox.css({height:tt.contentHeight+tt.paddingVertical,width:tt.contentWidth+tt.paddingHorizontal,top:tt.fixed?0:t.top});var e=tt.oldContentHeight!==tt.contentHeight||tt.oldContentWidth!==tt.contentWidth;(tt.isMobile||!e)&&tt.$lightbox.fsTransition("resolve"),tt.oldContentHeight=tt.contentHeight,tt.oldContentWidth=tt.contentWidth,tt.isMobile&&J.addClass(F.lock)}function c(){if(tt.visible&&!tt.isMobile){var t=p();tt.$controls.css({marginTop:(tt.contentHeight-tt.controlHeight-tt.metaHeight)/2}),tt.$lightbox.css({height:tt.contentHeight+tt.paddingVertical,width:tt.contentWidth+tt.paddingHorizontal,top:tt.fixed?0:t.top})}}function h(){var t=p();tt.$lightbox.css({top:tt.fixed?0:t.top})}function p(){if(tt.isMobile)return{left:0,top:0};var t={left:(e.windowWidth-tt.contentWidth-tt.paddingHorizontal)/2,top:tt.top<=0?(e.windowHeight-tt.contentHeight-tt.paddingVertical)/2:tt.top};return tt.fixed!==!0&&(t.top+=Q.scrollTop()),t}function m(t){D.killEvent(t),tt.captionOpen?u():(tt.$lightbox.addClass(A.raw.caption_open).find(A.caption_toggle).text(tt.labels.captionOpen),tt.captionOpen=!0)}function u(){tt.$lightbox.removeClass(A.raw.caption_open).find(A.caption_toggle).text(tt.labels.captionClosed),tt.captionOpen=!1}function H(){var t=this.attr("title"),e=void 0!==t&&t?t.replace(/^\s+|\s+$/g,""):!1;return e?'<p class="caption">'+e+"</p>":""}function f(e){tt.hasScaled=!1,tt.$imageContainer=t('<div class="'+A.raw.image_container+'"><img></div>'),tt.$image=tt.$imageContainer.find("img"),tt.$image.one(K.load,function(){var t=q(tt.$image);tt.naturalHeight=t.naturalHeight,tt.naturalWidth=t.naturalWidth,tt.retina&&(tt.naturalHeight/=2,tt.naturalWidth/=2),tt.$content.prepend(tt.$imageContainer),""===tt.$caption.html()?(tt.$caption.hide(),tt.$lightbox.removeClass(F.has_caption)):(tt.$caption.show(),tt.$lightbox.addClass(F.has_caption)),y(),d(),tt.touch&&(v(),W({scale:1,deltaX:0,deltaY:0}),b(),tt.$container.fsTouch({pan:!0,scale:!0}).on(K.scaleStart,$).on(K.scaleEnd,b).on(K.scale,W))}).error(O).attr("src",e).addClass(A.raw.image),(tt.$image[0].complete||4===tt.$image[0].readyState)&&tt.$image.trigger(K.load)}function w(){tt.$image&&tt.$image.length&&tt.$container.fsTouch("destroy")}function v(){tt.scalePosition=tt.$imageContainer.position(),tt.scaleY=tt.scalePosition.top,tt.scaleX=tt.scalePosition.left,tt.scaleHeight=tt.$image.outerHeight(),tt.scaleWidth=tt.$image.outerWidth()}function $(){v(),tt.$lightbox.removeClass(A.raw.animating)}function W(t){tt.targetContainerY=tt.scaleY+t.deltaY,tt.targetContainerX=tt.scaleX+t.deltaX,tt.targetImageHeight=tt.scaleHeight*t.scale,tt.targetImageWidth=tt.scaleWidth*t.scale,tt.targetImageHeight<tt.scaleMinHeight&&(tt.targetImageHeight=tt.scaleMinHeight),tt.targetImageHeight>tt.scaleMaxHeight&&(tt.targetImageHeight=tt.scaleMaxHeight),tt.targetImageWidth<tt.scaleMinWidth&&(tt.targetImageWidth=tt.scaleMinWidth),tt.targetImageWidth>tt.scaleMaxWidth&&(tt.targetImageWidth=tt.scaleMaxWidth),tt.hasScaled=!0,tt.isScaling=!0,tt.$imageContainer.css({top:tt.targetContainerY,left:tt.targetContainerX}),tt.$image.css({height:tt.targetImageHeight,width:tt.targetImageWidth,top:-(tt.targetImageHeight/2),left:-(tt.targetImageWidth/2)})}function b(){v(),tt.isScaling=!1;var t=tt.$container.outerHeight()-tt.metaHeight,e=tt.$container.outerWidth();tt.scaleMinY=t-tt.scaleHeight/2,tt.scaleMinX=e-tt.scaleWidth/2,tt.scaleMaxY=tt.scaleHeight/2,tt.scaleMaxX=tt.scaleWidth/2,tt.scaleHeight<t?tt.scalePosition.top=t/2:(tt.scalePosition.top<tt.scaleMinY&&(tt.scalePosition.top=tt.scaleMinY),tt.scalePosition.top>tt.scaleMaxY&&(tt.scalePosition.top=tt.scaleMaxY)),tt.scaleWidth<e?tt.scalePosition.left=e/2:(tt.scalePosition.left<tt.scaleMinX&&(tt.scalePosition.left=tt.scaleMinX),tt.scalePosition.left>tt.scaleMaxX&&(tt.scalePosition.left=tt.scaleMaxX)),tt.$lightbox.addClass(A.raw.animating),tt.$imageContainer.css({left:tt.scalePosition.left,top:tt.scalePosition.top})}function y(){if(tt.$image){var t=0;for(tt.windowHeight=tt.viewportHeight=e.windowHeight-tt.mobilePaddingVertical-tt.paddingVertical,tt.windowWidth=tt.viewportWidth=e.windowWidth-tt.mobilePaddingHorizontal-tt.paddingHorizontal,tt.contentHeight=1/0,tt.contentWidth=1/0,tt.imageMarginTop=0,tt.imageMarginLeft=0;tt.contentHeight>tt.viewportHeight&&2>t;)tt.imageHeight=0===t?tt.naturalHeight:tt.$image.outerHeight(),tt.imageWidth=0===t?tt.naturalWidth:tt.$image.outerWidth(),tt.metaHeight=0===t?0:tt.metaHeight,tt.spacerHeight=0===t?0:tt.spacerHeight,0===t&&(tt.ratioHorizontal=tt.imageHeight/tt.imageWidth,tt.ratioVertical=tt.imageWidth/tt.imageHeight,tt.isWide=tt.imageWidth>tt.imageHeight),tt.imageHeight<tt.minHeight&&(tt.minHeight=tt.imageHeight),tt.imageWidth<tt.minWidth&&(tt.minWidth=tt.imageWidth),tt.isMobile?(tt.isTouch?(tt.$controlBox.css({width:e.windowWidth}),tt.spacerHeight=tt.$controls.outerHeight(!0)):(tt.$tools.css({width:e.windowWidth}),tt.spacerHeight=tt.$tools.outerHeight(!0)),tt.contentHeight=tt.viewportHeight,tt.contentWidth=tt.viewportWidth,x(),tt.imageMarginTop=(tt.contentHeight-tt.targetImageHeight-tt.spacerHeight)/2,tt.imageMarginLeft=(tt.contentWidth-tt.targetImageWidth)/2):(0===t&&(tt.viewportHeight-=tt.margin+tt.paddingVertical,tt.viewportWidth-=tt.margin+tt.paddingHorizontal),tt.viewportHeight-=tt.metaHeight,x(),tt.contentHeight=tt.targetImageHeight,tt.contentWidth=tt.targetImageWidth),tt.isMobile||tt.isTouch||tt.$meta.css({width:tt.contentWidth}),tt.hasScaled||(tt.$image.css({height:tt.targetImageHeight,width:tt.targetImageWidth}),tt.$image.css(tt.touch?{top:-(tt.targetImageHeight/2),left:-(tt.targetImageWidth/2)}:{marginTop:tt.imageMarginTop,marginLeft:tt.imageMarginLeft})),tt.isMobile||(tt.metaHeight=tt.$meta.outerHeight(!0),tt.contentHeight+=tt.metaHeight),t++;tt.touch&&(tt.scaleMinHeight=tt.targetImageHeight,tt.scaleMinWidth=tt.targetImageWidth,tt.scaleMaxHeight=tt.naturalHeight,tt.scaleMaxWidth=tt.naturalWidth)}}function x(){var t=tt.isMobile?tt.contentHeight-tt.spacerHeight:tt.viewportHeight,e=tt.isMobile?tt.contentWidth:tt.viewportWidth;tt.isWide?(tt.targetImageWidth=e,tt.targetImageHeight=tt.targetImageWidth*tt.ratioHorizontal,tt.targetImageHeight>t&&(tt.targetImageHeight=t,tt.targetImageWidth=tt.targetImageHeight*tt.ratioVertical)):(tt.targetImageHeight=t,tt.targetImageWidth=tt.targetImageHeight*tt.ratioVertical,tt.targetImageWidth>e&&(tt.targetImageWidth=e,tt.targetImageHeight=tt.targetImageWidth*tt.ratioHorizontal)),(tt.targetImageWidth>tt.imageWidth||tt.targetImageHeight>tt.imageHeight)&&(tt.targetImageHeight=tt.imageHeight,tt.targetImageWidth=tt.imageWidth),(tt.targetImageWidth<tt.minWidth||tt.targetImageHeight<tt.minHeight)&&(tt.targetImageWidth<tt.minWidth?(tt.targetImageWidth=tt.minWidth,tt.targetImageHeight=tt.targetImageWidth*tt.ratioHorizontal):(tt.targetImageHeight=tt.minHeight,tt.targetImageWidth=tt.targetImageHeight*tt.ratioVertical))}function M(t){return"//www.youtube.com/embed/"+t[1]}function I(t){return"//player.vimeo.com/video/"+t[3]}function C(e){var i=E(e),a=e.split("?");i?(a.length>=2&&(i+="?"+a.slice(1)[0].trim()),tt.$videoWrapper=t('<div class="'+A.raw.video_wrapper+'"></div>'),tt.$video=t('<iframe class="'+A.raw.video+'" frameborder="0" seamless="seamless" allowfullscreen></iframe>'),tt.$video.attr("src",i).addClass(A.raw.video).prependTo(tt.$videoWrapper),tt.$content.prepend(tt.$videoWrapper),_(),d()):O()}function _(){tt.windowHeight=tt.viewportHeight=e.windowHeight-tt.mobilePaddingVertical-tt.paddingVertical,tt.windowWidth=tt.viewportWidth=e.windowWidth-tt.mobilePaddingHorizontal-tt.paddingHorizontal,tt.videoMarginTop=0,tt.videoMarginLeft=0,tt.isMobile?(tt.isTouch?(tt.$controlBox.css({width:e.windowWidth}),tt.spacerHeight=tt.$controls.outerHeight(!0)):(tt.$tools.css({width:e.windowWidth}),tt.spacerHeight=tt.$tools.outerHeight(!0)),tt.viewportHeight-=tt.spacerHeight,tt.targetVideoWidth=tt.viewportWidth,tt.targetVideoHeight=tt.targetVideoWidth*tt.videoRatio,tt.targetVideoHeight>tt.viewportHeight&&(tt.targetVideoHeight=tt.viewportHeight,tt.targetVideoWidth=tt.targetVideoHeight/tt.videoRatio),tt.videoMarginTop=(tt.viewportHeight-tt.targetVideoHeight)/2,tt.videoMarginLeft=(tt.viewportWidth-tt.targetVideoWidth)/2):(tt.viewportHeight=tt.windowHeight-tt.margin,tt.viewportWidth=tt.windowWidth-tt.margin,tt.targetVideoWidth=tt.videoWidth>tt.viewportWidth?tt.viewportWidth:tt.videoWidth,tt.targetVideoWidth<tt.minWidth&&(tt.targetVideoWidth=tt.minWidth),tt.targetVideoHeight=tt.targetVideoWidth*tt.videoRatio,tt.contentHeight=tt.targetVideoHeight,tt.contentWidth=tt.targetVideoWidth),tt.isMobile||tt.isTouch||tt.$meta.css({width:tt.contentWidth}),tt.$videoWrapper.css({height:tt.targetVideoHeight,width:tt.targetVideoWidth,marginTop:tt.videoMarginTop,marginLeft:tt.videoMarginLeft}),tt.isMobile||(tt.metaHeight=tt.$meta.outerHeight(!0),tt.contentHeight=tt.targetVideoHeight+tt.metaHeight)}function T(){var e="";tt.gallery.index>0&&(e=tt.gallery.$items.eq(tt.gallery.index-1).attr("href"),E(e)||t('<img src="'+e+'">')),tt.gallery.index<tt.gallery.total&&(e=tt.gallery.$items.eq(tt.gallery.index+1).attr("href"),E(e)||t('<img src="'+e+'">'))}function V(e){D.killEvent(e);var i=t(e.currentTarget);tt.isAnimating||i.hasClass(A.raw.control_disabled)||(tt.isAnimating=!0,w(),u(),tt.gallery.index+=i.hasClass(A.raw.control_next)?1:-1,tt.gallery.index>tt.gallery.total&&(tt.gallery.index=tt.infinite?0:tt.gallery.total),tt.gallery.index<0&&(tt.gallery.index=tt.infinite?tt.gallery.total:0),tt.$lightbox.addClass(A.raw.animating),tt.$container.fsTransition({property:"opacity"},function(){"undefined"!=typeof tt.$imageContainer&&tt.$imageContainer.remove(),"undefined"!=typeof tt.$videoWrapper&&tt.$videoWrapper.remove(),tt.$el=tt.gallery.$items.eq(tt.gallery.index),tt.$caption.html(tt.formatter.call(tt.$el,tt)),tt.$position.find(A.position_current).html(tt.gallery.index+1);var t=tt.$el.attr("href"),e=E(t);e?(tt.type="video",C(t)):(tt.type="image",f(t)),P()}),tt.$lightbox.addClass(A.raw.loading))}function P(){tt.$controls.removeClass(A.raw.control_disabled),tt.infinite||(0===tt.gallery.index&&tt.$controls.filter(A.control_previous).addClass(F.control_disabled),tt.gallery.index===tt.gallery.total&&tt.$controls.filter(A.control_next).addClass(F.control_disabled))}function j(t){!tt.gallery.active||37!==t.keyCode&&39!==t.keyCode?27===t.keyCode&&tt.$close.trigger(K.click):(D.killEvent(t),tt.$controls.filter(37===t.keyCode?A.control_previous:A.control_next).trigger(K.click))}function z(e){tt.$inlineTarget=t(e),tt.$inlineContents=tt.$inlineTarget.children().detach(),X(tt.$inlineContents)}function k(){tt.$inlineTarget.append(tt.$inlineContents.detach())}function L(e){e+=e.indexOf("?")>-1?"&"+tt.requestKey+"=true":"?"+tt.requestKey+"=true";var i=t('<iframe class="'+A.raw.iframe+'" src="'+e+'"></iframe>');X(i)}function X(t){tt.$content.append(t),Y(t),d()}function Y(t){tt.windowHeight=e.windowHeight-tt.mobilePaddingVertical-tt.paddingVertical,tt.windowWidth=e.windowWidth-tt.mobilePaddingHorizontal-tt.paddingHorizontal,tt.objectHeight=t.outerHeight(!0),tt.objectWidth=t.outerWidth(!0),tt.targetHeight=tt.targetHeight||(tt.$el?tt.$el.data(S+"-height"):null),tt.targetWidth=tt.targetWidth||(tt.$el?tt.$el.data(S+"-width"):null),tt.maxHeight=tt.windowHeight<0?tt.minHeight:tt.windowHeight,tt.isIframe=t.is("iframe"),tt.objectMarginTop=0,tt.objectMarginLeft=0,tt.isMobile||(tt.windowHeight-=tt.margin,tt.windowWidth-=tt.margin),tt.contentHeight=tt.targetHeight?tt.targetHeight:tt.isIframe||tt.isMobile?tt.windowHeight:tt.objectHeight,tt.contentWidth=tt.targetWidth?tt.targetWidth:tt.isIframe||tt.isMobile?tt.windowWidth:tt.objectWidth,(tt.isIframe||tt.isObject)&&tt.isMobile?(tt.contentHeight=tt.windowHeight,tt.contentWidth=tt.windowWidth):tt.isObject&&(tt.contentHeight=tt.contentHeight>tt.windowHeight?tt.windowHeight:tt.contentHeight,tt.contentWidth=tt.contentWidth>tt.windowWidth?tt.windowWidth:tt.contentWidth)}function O(){var e=t('<div class="'+A.raw.error+'"><p>Error Loading Resource</p></div>');tt.type="element",tt.$tools.remove(),tt.$image.off(K.namespace),X(e)}function q(t){var e=t[0],i=new Image;return"undefined"!=typeof e.naturalHeight?{naturalHeight:e.naturalHeight,naturalWidth:e.naturalWidth}:"img"===e.tagName.toLowerCase()?(i.src=e.src,{naturalHeight:i.height,naturalWidth:i.width}):!1}function E(t){var e,i=tt.videoFormatter;for(var a in i)if(i.hasOwnProperty(a)&&(e=t.match(i[a].pattern),null!==e))return i[a].format.call(tt,e);return!1}var R=e.Plugin("lightbox",{widget:!0,defaults:{customClass:"",fileTypes:/\.(jpg|sjpg|jpeg|png|gif)$/i,fixed:!1,formatter:H,infinite:!1,labels:{close:"Close",count:"of",next:"Next",previous:"Previous",captionClosed:"View Caption",captionOpen:"Close Caption"},margin:50,minHeight:100,minWidth:100,mobile:!1,retina:!1,requestKey:"fs-lightbox",theme:"fs-light",top:0,touch:!0,videoFormatter:{youtube:{pattern:/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/,format:M},vimeo:{pattern:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,format:I}},videoRatio:.5625,videoWidth:800},classes:["loading","animating","fixed","mobile","touch","inline","iframed","open","overlay","close","loading_icon","container","content","image","image_container","video","video_wrapper","tools","meta","controls","control","control_previous","control_next","control_disabled","position","position_current","position_total","caption_toggle","caption","caption_open","has_controls","has_caption","iframe","error","lock"],events:{open:"open",close:"close"},methods:{_setup:i,_construct:o,_destruct:n,_resize:a,resize:g},utilities:{_initialize:r,close:s}}),S=R.namespace,B=R.defaults,A=R.classes,F=A.raw,K=R.events,D=R.functions,N=e.window,Q=e.$window,G=null,J=null,U=!1,Z=!1,tt=null});
!function(t){"use strict";"object"==typeof exports?module.exports=t(window.jQuery):"function"==typeof define&&define.amd?define(["jquery"],t):window.jQuery&&!window.jQuery.fn.colorpicker&&t(window.jQuery)}(function(t){"use strict";var e=function(e,o){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,o&&t.extend(this.colors,o),e&&(void 0!==e.toLowerCase?(e+="",this.setColor(e)):void 0!==e.h&&(this.value=e))};e.prototype={constructor:e,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(t){return"number"==typeof t?t:isNaN(t)||null===t||""===t||void 0===t?1:void 0!==t.toLowerCase?parseFloat(t):1},isTransparent:function(t){return t?(t=t.toLowerCase().trim(),"transparent"===t||t.match(/#?00000000/)||t.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/)):!1},rgbaIsTransparent:function(t){return 0===t.r&&0===t.g&&0===t.b&&0===t.a},setColor:function(t){t=t.toLowerCase().trim(),t&&(this.isTransparent(t)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(t)||{h:0,s:0,b:0,a:1})},stringToHSB:function(e){e=e.toLowerCase();var o;"undefined"!=typeof this.colors[e]&&(e=this.colors[e],o="alias");var i=this,r=!1;return t.each(this.stringParsers,function(t,s){var a=s.re.exec(e),n=a&&s.parse.apply(i,[a]),l=o||s.format||"rgba";return n?(r=l.match(/hsla?/)?i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,n)):i.RGBtoHSB.apply(i,n),i.origFormat=l,!1):!0}),r},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setBrightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,o,i){t||(t=this.value.h,e=this.value.s,o=this.value.b),t*=360;var r,s,a,n,l;return t=t%360/60,l=o*e,n=l*(1-Math.abs(t%2-1)),r=s=a=o-l,t=~~t,r+=[l,n,0,0,n,l][t],s+=[n,l,l,n,0,0][t],a+=[0,0,n,l,l,n][t],{r:Math.round(255*r),g:Math.round(255*s),b:Math.round(255*a),a:i||this.value.a}},toHex:function(t,e,o,i){var r=this.toRGB(t,e,o,i);return this.rgbaIsTransparent(r)?"transparent":"#"+(1<<24|parseInt(r.r)<<16|parseInt(r.g)<<8|parseInt(r.b)).toString(16).substr(1)},toHSL:function(t,e,o,i){t=t||this.value.h,e=e||this.value.s,o=o||this.value.b,i=i||this.value.a;var r=t,s=(2-e)*o,a=e*o;return a/=s>0&&1>=s?s:2-s,s/=2,a>1&&(a=1),{h:isNaN(r)?0:r,s:isNaN(a)?0:a,l:isNaN(s)?0:s,a:isNaN(i)?0:i}},toAlias:function(t,e,o,i){var r=this.toHex(t,e,o,i);for(var s in this.colors)if(this.colors[s]===r)return s;return!1},RGBtoHSB:function(t,e,o,i){t/=255,e/=255,o/=255;var r,s,a,n;return a=Math.max(t,e,o),n=a-Math.min(t,e,o),r=0===n?null:a===t?(e-o)/n:a===e?(o-t)/n+2:(t-e)/n+4,r=(r+360)%6*60/360,s=0===n?0:n/a,{h:this._sanitizeNumber(r),s:s,b:a,a:this._sanitizeNumber(i)}},HueToRGB:function(t,e,o){return 0>o?o+=1:o>1&&(o-=1),1>6*o?t+(e-t)*o*6:1>2*o?e:2>3*o?t+(e-t)*(2/3-o)*6:t},HSLtoRGB:function(t,e,o,i){0>e&&(e=0);var r;r=.5>=o?o*(1+e):o+e-o*e;var s=2*o-r,a=t+1/3,n=t,l=t-1/3,c=Math.round(255*this.HueToRGB(s,r,a)),h=Math.round(255*this.HueToRGB(s,r,n)),p=Math.round(255*this.HueToRGB(s,r,l));return[c,h,p,this._sanitizeNumber(i)]},toString:function(t){t=t||"rgba";var e=!1;switch(t){case"rgb":return e=this.toRGB(),this.rgbaIsTransparent(e)?"transparent":"rgb("+e.r+","+e.g+","+e.b+")";case"rgba":return e=this.toRGB(),"rgba("+e.r+","+e.g+","+e.b+","+e.a+")";case"hsl":return e=this.toHSL(),"hsl("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%)";case"hsla":return e=this.toHSL(),"hsla("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%,"+e.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return e}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(t){return[t[1],t[2],t[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}}],colorNameToHex:function(t){return"undefined"!=typeof this.colors[t.toLowerCase()]?this.colors[t.toLowerCase()]:!1}};var o={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},i=function(i,r){if(this.element=t(i).addClass("colorpicker-element"),this.options=t.extend(!0,{},o,this.element.data(),r),this.component=this.options.component,this.component=this.component!==!1?this.element.find(this.component):!1,this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1?t(this.container):!1,this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):!1,this.input&&0===this.input.length&&(this.input=!1),this.color=new e(this.options.color!==!1?this.options.color:this.getValue(),this.options.colorSelectors),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.picker=t(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format||this.options.format===!1)&&this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.options.colorSelectors){var s=this;t.each(this.options.colorSelectors,function(e,o){var i=t("<i />").css("background-color",o).data("class",e);i.click(function(){s.setValue(t(this).css("background-color"))}),s.picker.find(".colorpicker-selectors").append(i)}),this.picker.find(".colorpicker-selectors").show()}this.picker.on("mousedown.colorpicker touchstart.colorpicker",t.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:t("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":t.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":t.proxy(this.change,this)}),this.component===!1&&this.element.on({"focus.colorpicker":t.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":t.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":t.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":t.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":t.proxy(this.show,this),"focus.colorpicker":t.proxy(this.show,this)}),this.update(),t(t.proxy(function(){this.element.trigger("create")},this))};i.Color=e,i.prototype={constructor:i,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var t=this.container&&this.container[0]!==document.body?"position":"offset",e=this.component||this.element,o=e[t]();"right"===this.options.align&&(o.left-=this.picker.outerWidth()-e.outerWidth()),this.picker.css({top:o.top+e.outerHeight(),left:o.left})},show:function(e){return this.isDisabled()?!1:(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),t(window).on("resize.colorpicker",t.proxy(this.reposition,this)),!e||this.hasInput()&&"color"!==this.input.attr("type")||e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault()),this.options.inline===!1&&t(window.document).on({"mousedown.colorpicker":t.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),t(window).off("resize.colorpicker",this.reposition),t(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(t){return t=t||this.color.toString(this.format),this.element.data("color",t),t},updateInput:function(t){if(t=t||this.color.toString(this.format),this.input!==!1){if(this.options.colorSelectors){var o=new e(t,this.options.colorSelectors),i=o.toAlias();"undefined"!=typeof this.options.colorSelectors[i]&&(t=i)}this.input.prop("value",t)}return t},updatePicker:function(t){void 0!==t&&(this.color=new e(t,this.options.colorSelectors));var o=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,i=this.picker.find("i");return 0!==i.length?(this.options.horizontal===!1?(o=this.options.sliders,i.eq(1).css("top",o.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",o.alpha.maxTop*(1-this.color.value.a))):(o=this.options.slidersHorz,i.eq(1).css("left",o.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",o.alpha.maxLeft*(1-this.color.value.a))),i.eq(0).css({top:o.saturation.maxTop-this.color.value.b*o.saturation.maxTop,left:this.color.value.s*o.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),t):void 0},updateComponent:function(t){if(t=t||this.color.toString(this.format),this.component!==!1){var e=this.component.find("i").eq(0);e.length>0?e.css({backgroundColor:t}):this.component.css({backgroundColor:t})}return t},update:function(t){var e;return(this.getValue(!1)!==!1||t===!0)&&(e=this.updateComponent(),this.updateInput(e),this.updateData(e),this.updatePicker()),e},setValue:function(t){this.color=new e(t,this.options.colorSelectors),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:t})},getValue:function(t){t=void 0===t?"#000000":t;var e;return e=this.hasInput()?this.input.val():this.element.data("color"),(void 0===e||""===e||null===e)&&(e=t),e},hasInput:function(){return this.input!==!1},isDisabled:function(){return this.hasInput()?this.input.prop("disabled")===!0:!1},disable:function(){return this.hasInput()?(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0):!1},enable:function(){return this.hasInput()?(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0):!1},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var o=t(e.target),i=o.closest("div"),r=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!i.is(".colorpicker")){if(i.is(".colorpicker-saturation"))this.currentSlider=t.extend({},r.saturation);else if(i.is(".colorpicker-hue"))this.currentSlider=t.extend({},r.hue);else{if(!i.is(".colorpicker-alpha"))return!1;this.currentSlider=t.extend({},r.alpha)}var s=i.offset();this.currentSlider.guide=i.find("i")[0].style,this.currentSlider.left=e.pageX-s.left,this.currentSlider.top=e.pageY-s.top,this.mousePointer={left:e.pageX,top:e.pageY},t(document).on({"mousemove.colorpicker":t.proxy(this.mousemove,this),"touchmove.colorpicker":t.proxy(this.mousemove,this),"mouseup.colorpicker":t.proxy(this.mouseup,this),"touchend.colorpicker":t.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((t.pageX||this.mousePointer.left)-this.mousePointer.left))),o=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((t.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=e+"px",this.currentSlider.guide.top=o+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,e/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,o/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&this.options.format===!1&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),t(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(t){this.keyup(t)},keyup:function(t){38===t.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===t.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new e(this.input.val(),this.options.colorSelectors),this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},t.colorpicker=i,t.fn.colorpicker=function(e){var o,r=arguments,s=this.each(function(){var s=t(this),a=s.data("colorpicker"),n="object"==typeof e?e:{};a||"string"==typeof e?"string"==typeof e&&(o=a[e].apply(a,Array.prototype.slice.call(r,1))):s.data("colorpicker",new i(this,n))});return"getValue"===e?o:s},t.fn.colorpicker.constructor=i});
!function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=i(String(e||"").toLowerCase()),!e||!e.length)return[];var t,n,r,a,l=[],u=e.split(/ +/);for(t=0,n=u.length;n>t;t++){if(r=o(u[t]),this.settings.diacritics)for(a in s)s.hasOwnProperty(a)&&(r=r.replace(new RegExp(a,"g"),s[a]));l.push({string:u[t],regex:new RegExp(r,"i")})}return l},e.prototype.iterator=function(e,t){var n;n=r(e)?Array.prototype.forEach||function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},n.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var n,i,o,r;n=this,e=n.prepareSearch(e,t),o=e.tokens,i=e.options.fields,r=o.length;var s=function(e,t){var n,i;return e?(e=String(e||""),i=e.search(t.regex),-1===i?0:(n=t.string.length/e.length,0===i&&(n+=.5),n)):0},a=function(){var e=i.length;return e?1===e?function(e,t){return s(t[i[0]],e)}:function(t,n){for(var o=0,r=0;e>o;o++)r+=s(n[i[o]],t);return r/e}:function(){return 0}}();return r?1===r?function(e){return a(o[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,i=0;r>n;n++){if(t=a(o[n],e),0>=t)return 0;i+=t}return i/r}:function(e){for(var t=0,n=0;r>t;t++)n+=a(o[t],e);return n/r}:function(){return 0}},e.prototype.getSortFunction=function(e,n){var i,o,r,s,a,l,u,p,c,d,h;if(r=this,e=r.prepareSearch(e,n),h=!e.query&&n.sort_empty||n.sort,c=function(e,t){return"$score"===e?t.score:r.items[t.id][e]},a=[],h)for(i=0,o=h.length;o>i;i++)(e.query||"$score"!==h[i].field)&&a.push(h[i]);if(e.query){for(d=!0,i=0,o=a.length;o>i;i++)if("$score"===a[i].field){d=!1;break}d&&a.unshift({field:"$score",direction:"desc"})}else for(i=0,o=a.length;o>i;i++)if("$score"===a[i].field){a.splice(i,1);break}for(p=[],i=0,o=a.length;o>i;i++)p.push("desc"===a[i].direction?-1:1);return l=a.length,l?1===l?(s=a[0].field,u=p[0],function(e,n){return u*t(c(s,e),c(s,n))}):function(e,n){var i,o,r;for(i=0;l>i;i++)if(r=a[i].field,o=p[i]*t(c(r,e),c(r,n)))return o;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=n({},t);var i=t.fields,o=t.sort,s=t.sort_empty;return i&&!r(i)&&(t.fields=[i]),o&&!r(o)&&(t.sort=[o]),s&&!r(s)&&(t.sort_empty=[s]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var n,i,o,r,s=this;return i=this.prepareSearch(e,t),t=i.options,e=i.query,r=t.score||s.getScoreFunction(i),e.length?s.iterator(s.items,function(e,o){n=r(e),(t.filter===!1||n>0)&&i.items.push({score:n,id:o})}):s.iterator(s.items,function(e,t){i.items.push({score:1,id:t})}),o=s.getSortFunction(i,t),o&&i.items.sort(o),i.total=i.items.length,"number"==typeof t.limit&&(i.items=i.items.slice(0,t.limit)),i};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=a(String(e||"")),t=a(String(t||"")),e>t?1:t>e?-1:0)},n=function(e,t){var n,i,o,r;for(n=1,i=arguments.length;i>n;n++)if(r=arguments[n])for(o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);return e},i=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},o=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},a=function(){var e,t,n,i,o="",r={};for(n in s)if(s.hasOwnProperty(n))for(i=s[n].substring(2,s[n].length-1),o+=i,e=0,t=i.length;t>e;e++)r[i.charAt(e)]=n;var a=new RegExp("["+o+"]","g");return function(e){return e.replace(a,function(e){return r[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var n,i,o,r=this,s=[];if(r.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(n=0,i=e.length;i>n;n++)"string"==typeof e[n]?s.push(e[n]):(r.plugins.settings[e[n].name]=e[n].options,s.push(e[n].name));else if(e)for(o in e)e.hasOwnProperty(o)&&(r.plugins.settings[o]=e[o],s.push(o));for(;s.length;)r.require(s.shift())},e.prototype.loadPlugin=function(t){var n=this,i=n.plugins,o=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=o.fn.apply(n,[n.plugins.settings[t]||{}]),i.names.push(t)},e.prototype.require=function(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]},e.define=function(t,n){e.plugins[t]={name:t,fn:n}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,n){"use strict";var i=function(e,t){if("string"!=typeof t||t.length){var n="string"==typeof t?new RegExp(t,"i"):t,i=function(e){var t=0;if(3===e.nodeType){var o=e.data.search(n);if(o>=0&&e.data.length>0){var r=e.data.match(n),s=document.createElement("span");s.className="highlight";var a=e.splitText(o),l=(a.splitText(r[0].length),a.cloneNode(!0));s.appendChild(l),a.parentNode.replaceChild(s,a),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var u=0;u<e.childNodes.length;++u)u+=i(e.childNodes[u]);return t};return e.each(function(){i(this)})}},o=function(){};o.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},o.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=o.prototype[t[n]]};var r=/Mac/.test(navigator.userAgent),s=65,a=13,l=27,u=37,p=38,c=80,d=39,h=40,g=78,f=8,v=46,m=16,y=r?91:17,w=r?18:17,O=9,$=1,C=2,b=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,x=function(e){return"undefined"!=typeof e},S=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},I=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},_=function(e){return(e+"").replace(/\$/g,"$$$$")},F={};F.before=function(e,t,n){var i=e[t];e[t]=function(){return n.apply(e,arguments),i.apply(e,arguments)}},F.after=function(e,t,n){var i=e[t];e[t]=function(){var t=i.apply(e,arguments);return n.apply(e,arguments),t}};var D=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},k=function(e,t){var n;return function(){var i=this,o=arguments;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(i,o)},t)}},A=function(e,t,n){var i,o=e.trigger,r={};e.trigger=function(){var n=arguments[0];return-1===t.indexOf(n)?o.apply(e,arguments):void(r[n]=arguments)},n.apply(e,[]),e.trigger=o;for(i in r)r.hasOwnProperty(i)&&o.apply(e,r[i])},P=function(e,t,n,i){e.on(t,n,function(t){for(var n=t.target;n&&n.parentNode!==e[0];)n=n.parentNode;return t.currentTarget=n,i.apply(this,[t])})},z=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t.start=n.text.length-i,t.length=i}return t},T=function(e,t,n){var i,o,r={};if(n)for(i=0,o=n.length;o>i;i++)r[n[i]]=e.css(n[i]);else r=e.css();t.css(r)},j=function(t,n){if(!t)return 0;var i=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");T(n,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var o=i.width();return i.remove(),o},q=function(e){var t=null,n=function(n,i){var o,r,s,a,l,u,p,c;n=n||window.event||{},i=i||{},n.metaKey||n.altKey||(i.force||e.data("grow")!==!1)&&(o=e.val(),n.type&&"keydown"===n.type.toLowerCase()&&(r=n.keyCode,s=r>=97&&122>=r||r>=65&&90>=r||r>=48&&57>=r||32===r,r===v||r===f?(c=z(e[0]),c.length?o=o.substring(0,c.start)+o.substring(c.start+c.length):r===f&&c.start?o=o.substring(0,c.start-1)+o.substring(c.start+1):r===v&&"undefined"!=typeof c.start&&(o=o.substring(0,c.start)+o.substring(c.start+1))):s&&(u=n.shiftKey,p=String.fromCharCode(n.keyCode),p=u?p.toUpperCase():p.toLowerCase(),o+=p)),a=e.attr("placeholder"),!o&&a&&(o=a),l=j(o,e)+4,l!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",n),n()},E=function(n,i){var o,r,s,a,l=this;a=n[0],a.selectize=l;var u=window.getComputedStyle&&window.getComputedStyle(a,null);if(s=u?u.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction,s=s||n.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:i,$input:n,tabIndex:n.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?$:C,rtl:/rtl/i.test(s),eventNS:".selectize"+ ++E.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:n.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===i.loadThrottle?l.onSearchChange:k(l.onSearchChange,i.loadThrottle)}),l.sifter=new t(this.options,{diacritics:i.diacritics}),l.settings.options){for(o=0,r=l.settings.options.length;r>o;o++)l.registerOption(l.settings.options[o]);delete l.settings.options}if(l.settings.optgroups){for(o=0,r=l.settings.optgroups.length;r>o;o++)l.registerOptionGroup(l.settings.optgroups[o]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return o.mixin(E),n.mixin(E),e.extend(E.prototype,{setup:function(){var t,n,i,o,s,a,l,u,p,c=this,d=c.settings,h=c.eventNS,g=e(window),f=e(document),v=c.$input;if(l=c.settings.mode,u=v.attr("class")||"",t=e("<div>").addClass(d.wrapperClass).addClass(u).addClass(l),n=e("<div>").addClass(d.inputClass).addClass("items").appendTo(t),i=e('<input type="text" autocomplete="off" />').appendTo(n).attr("tabindex",v.is(":disabled")?"-1":c.tabIndex),a=e(d.dropdownParent||t),o=e("<div>").addClass(d.dropdownClass).addClass(l).hide().appendTo(a),s=e("<div>").addClass(d.dropdownContentClass).appendTo(o),c.settings.copyClassesToDropdown&&o.addClass(u),t.css({width:v[0].style.width}),c.plugins.names.length&&(p="plugin-"+c.plugins.names.join(" plugin-"),t.addClass(p),o.addClass(p)),(null===d.maxItems||d.maxItems>1)&&c.tagType===$&&v.attr("multiple","multiple"),c.settings.placeholder&&i.attr("placeholder",d.placeholder),!c.settings.splitOn&&c.settings.delimiter){var O=c.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");c.settings.splitOn=new RegExp("\\s*"+O+"+\\s*")}v.attr("autocorrect")&&i.attr("autocorrect",v.attr("autocorrect")),v.attr("autocapitalize")&&i.attr("autocapitalize",v.attr("autocapitalize")),c.$wrapper=t,c.$control=n,c.$control_input=i,c.$dropdown=o,c.$dropdown_content=s,o.on("mouseenter","[data-selectable]",function(){return c.onOptionHover.apply(c,arguments)}),o.on("mousedown click","[data-selectable]",function(){return c.onOptionSelect.apply(c,arguments)}),P(n,"mousedown","*:not(input)",function(){return c.onItemSelect.apply(c,arguments)}),q(i),n.on({mousedown:function(){return c.onMouseDown.apply(c,arguments)},click:function(){return c.onClick.apply(c,arguments)}}),i.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return c.onKeyDown.apply(c,arguments)},keyup:function(){return c.onKeyUp.apply(c,arguments)},keypress:function(){return c.onKeyPress.apply(c,arguments)},resize:function(){c.positionDropdown.apply(c,[])},blur:function(){return c.onBlur.apply(c,arguments)},focus:function(){return c.ignoreBlur=!1,c.onFocus.apply(c,arguments)},paste:function(){return c.onPaste.apply(c,arguments)}}),f.on("keydown"+h,function(e){c.isCmdDown=e[r?"metaKey":"ctrlKey"],c.isCtrlDown=e[r?"altKey":"ctrlKey"],c.isShiftDown=e.shiftKey}),f.on("keyup"+h,function(e){e.keyCode===w&&(c.isCtrlDown=!1),e.keyCode===m&&(c.isShiftDown=!1),e.keyCode===y&&(c.isCmdDown=!1)}),f.on("mousedown"+h,function(e){if(c.isFocused){if(e.target===c.$dropdown[0]||e.target.parentNode===c.$dropdown[0])return!1;c.$control.has(e.target).length||e.target===c.$control[0]||c.blur(e.target)}}),g.on(["scroll"+h,"resize"+h].join(" "),function(){c.isOpen&&c.positionDropdown.apply(c,arguments)}),g.on("mousemove"+h,function(){c.ignoreHover=!1}),this.revertSettings={$children:v.children().detach(),tabindex:v.attr("tabindex")},v.attr("tabindex",-1).hide().after(c.$wrapper),e.isArray(d.items)&&(c.setValue(d.items),delete d.items),b&&v.on("invalid"+h,function(e){e.preventDefault(),c.isInvalid=!0,c.refreshState()}),c.updateOriginalInput(),c.refreshItems(),c.refreshState(),c.updatePlaceholder(),c.isSetup=!0,v.is(":disabled")&&c.disable(),c.on("change",this.onChange),v.data("selectize",c),v.addClass("selectized"),c.trigger("initialize"),d.preload===!0&&c.onSearchChange("")},setupTemplates:function(){var t=this,n=t.settings.labelField,i=t.settings.optgroupLabelField,o={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[i])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[n])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[n])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},o,t.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var n=this,i=t.isDefaultPrevented();e(t.target);if(n.isFocused){if(t.target!==n.$control_input[0])return"single"===n.settings.mode?n.isOpen?n.close():n.open():i||n.setActiveItem(null),!1}else i||window.setTimeout(function(){n.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var n=this;n.isFull()||n.isInputHidden||n.isLocked?t.preventDefault():n.settings.splitOn&&setTimeout(function(){for(var t=e.trim(n.$control_input.val()||"").split(n.settings.splitOn),i=0,o=t.length;o>i;i++)n.createItem(t[i])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==O&&e.preventDefault());switch(e.keyCode){case s:if(t.isCmdDown)return void t.selectAll();break;case l:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case g:if(!e.ctrlKey||e.altKey)break;case h:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case c:if(!e.ctrlKey||e.altKey)break;case p:if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,-1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case a:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case u:return void t.advanceSelection(-1,e);case d:return void t.advanceSelection(1,e);case O:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case f:case v:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(r?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(e){var t=this,n=t.settings.load;n&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(i){n.apply(t,[e,i])})))},onFocus:function(e){var t=this,n=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),n||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(e);var i=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),(t||document.body).focus(),n.ignoreFocus=!1,n.trigger("blur")};n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,i):i()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var n,i,o=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),i=e(t.currentTarget),i.hasClass("create")?o.createItem(null,function(){o.settings.closeAfterSelect&&o.close()}):(n=i.attr("data-value"),"undefined"!=typeof n&&(o.lastQuery=null,o.setTextboxValue(""),o.addItem(n),o.settings.closeAfterSelect?o.close():!o.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&o.setActiveOption(o.getOption(n))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,n=t.val()!==e;n&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===$&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var n=t?[]:["change"];A(this,n,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,n){var i,o,r,s,a,l,u,p,c=this;if("single"!==c.settings.mode){if(t=e(t),!t.length)return e(c.$activeItems).removeClass("active"),c.$activeItems=[],void(c.isFocused&&c.showInput());if(i=n&&n.type.toLowerCase(),"mousedown"===i&&c.isShiftDown&&c.$activeItems.length){for(p=c.$control.children(".active:last"),s=Array.prototype.indexOf.apply(c.$control[0].childNodes,[p[0]]),a=Array.prototype.indexOf.apply(c.$control[0].childNodes,[t[0]]),s>a&&(u=s,s=a,a=u),o=s;a>=o;o++)l=c.$control[0].childNodes[o],-1===c.$activeItems.indexOf(l)&&(e(l).addClass("active"),c.$activeItems.push(l));n.preventDefault()}else"mousedown"===i&&c.isCtrlDown||"keydown"===i&&this.isShiftDown?t.hasClass("active")?(r=c.$activeItems.indexOf(t[0]),c.$activeItems.splice(r,1),t.removeClass("active")):c.$activeItems.push(t.addClass("active")[0]):(e(c.$activeItems).removeClass("active"),c.$activeItems=[t.addClass("active")[0]]);c.hideInput(),this.isFocused||c.focus()}},setActiveOption:function(t,n,i){var o,r,s,a,l,u=this;u.$activeOption&&u.$activeOption.removeClass("active"),u.$activeOption=null,t=e(t),t.length&&(u.$activeOption=t.addClass("active"),(n||!x(n))&&(o=u.$dropdown_content.height(),r=u.$activeOption.outerHeight(!0),n=u.$dropdown_content.scrollTop()||0,s=u.$activeOption.offset().top-u.$dropdown_content.offset().top+n,a=s,l=s-o+r,s+r>o+n?u.$dropdown_content.stop().animate({scrollTop:l},i?u.settings.scrollDuration:0):n>s&&u.$dropdown_content.stop().animate({scrollTop:a},i?u.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var n,i,o,r=this,s=r.settings,a=this.getSearchOptions();if(s.score&&(o=r.settings.score.apply(this,[t]),"function"!=typeof o))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==r.lastQuery?(r.lastQuery=t,i=r.sifter.search(t,e.extend(a,{score:o})),r.currentResults=i):i=e.extend(!0,{},r.currentResults),s.hideSelected)for(n=i.items.length-1;n>=0;n--)-1!==r.items.indexOf(S(i.items[n].id))&&i.items.splice(n,1);return i},refreshOptions:function(t){var n,o,r,s,a,l,u,p,c,d,h,g,f,v,m,y;"undefined"==typeof t&&(t=!0);var w=this,O=e.trim(w.$control_input.val()),$=w.search(O),C=w.$dropdown_content,b=w.$activeOption&&S(w.$activeOption.attr("data-value"));for(s=$.items.length,"number"==typeof w.settings.maxOptions&&(s=Math.min(s,w.settings.maxOptions)),a={},l=[],n=0;s>n;n++)for(u=w.options[$.items[n].id],p=w.render("option",u),c=u[w.settings.optgroupField]||"",d=e.isArray(c)?c:[c],o=0,r=d&&d.length;r>o;o++)c=d[o],w.optgroups.hasOwnProperty(c)||(c=""),a.hasOwnProperty(c)||(a[c]=[],l.push(c)),a[c].push(p);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){var n=w.optgroups[e].$order||0,i=w.optgroups[t].$order||0;return n-i}),h=[],n=0,s=l.length;s>n;n++)c=l[n],w.optgroups.hasOwnProperty(c)&&a[c].length?(g=w.render("optgroup_header",w.optgroups[c])||"",g+=a[c].join(""),h.push(w.render("optgroup",e.extend({},w.optgroups[c],{html:g})))):h.push(a[c].join(""));if(C.html(h.join("")),w.settings.highlight&&$.query.length&&$.tokens.length)for(n=0,s=$.tokens.length;s>n;n++)i(C,$.tokens[n].regex);if(!w.settings.hideSelected)for(n=0,s=w.items.length;s>n;n++)w.getOption(w.items[n]).addClass("selected");f=w.canCreate(O),f&&(C.prepend(w.render("option_create",{input:O})),y=e(C[0].childNodes[0])),w.hasOptions=$.items.length>0||f,w.hasOptions?($.items.length>0?(m=b&&w.getOption(b),m&&m.length?v=m:"single"===w.settings.mode&&w.items.length&&(v=w.getOption(w.items[0])),v&&v.length||(v=y&&!w.settings.addPrecedence?w.getAdjacentOption(y,1):C.find("[data-selectable]:first"))):v=y,w.setActiveOption(v),t&&!w.isOpen&&w.open()):(w.setActiveOption(null),t&&w.isOpen&&w.close())},addOption:function(t){var n,i,o,r=this;if(e.isArray(t))for(n=0,i=t.length;i>n;n++)r.addOption(t[n]);else(o=r.registerOption(t))&&(r.userOptions[o]=!0,r.lastQuery=null,r.trigger("option_add",o,t))},registerOption:function(e){var t=S(e[this.settings.valueField]);return!t||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=S(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,n){var i,o,r,s,a,l,u,p=this;if(t=S(t),r=S(n[p.settings.valueField]),null!==t&&p.options.hasOwnProperty(t)){if("string"!=typeof r)throw new Error("Value must be set in option data");u=p.options[t].$order,r!==t&&(delete p.options[t],s=p.items.indexOf(t),-1!==s&&p.items.splice(s,1,r)),n.$order=n.$order||u,p.options[r]=n,a=p.renderCache.item,l=p.renderCache.option,a&&(delete a[t],delete a[r]),l&&(delete l[t],delete l[r]),-1!==p.items.indexOf(r)&&(i=p.getItem(t),o=e(p.render("item",n)),i.hasClass("active")&&o.addClass("active"),i.replaceWith(o)),p.lastQuery=null,p.isOpen&&p.refreshOptions(!1)}},removeOption:function(e,t){var n=this;e=S(e);var i=n.renderCache.item,o=n.renderCache.option;i&&delete i[e],o&&delete o[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,n){var i=this.$dropdown.find("[data-selectable]"),o=i.index(t)+n;return o>=0&&o<i.length?i.eq(o):e()},getElementWithValue:function(t,n){if(t=S(t),"undefined"!=typeof t&&null!==t)for(var i=0,o=n.length;o>i;i++)if(n[i].getAttribute("data-value")===t)return e(n[i]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,n){for(var i=e.isArray(t)?t:[t],o=0,r=i.length;r>o;o++)this.isPending=r-1>o,this.addItem(i[o],n)},addItem:function(t,n){var i=n?[]:["change"];A(this,i,function(){var i,o,r,s,a,l=this,u=l.settings.mode;return t=S(t),-1!==l.items.indexOf(t)?void("single"===u&&l.close()):void(l.options.hasOwnProperty(t)&&("single"===u&&l.clear(n),"multi"===u&&l.isFull()||(i=e(l.render("item",l.options[t])),a=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(i),(!l.isPending||!a&&l.isFull())&&l.refreshState(),l.isSetup&&(r=l.$dropdown_content.find("[data-selectable]"),l.isPending||(o=l.getOption(t),s=l.getAdjacentOption(o,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==u),s&&l.setActiveOption(l.getOption(s))),!r.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,i),l.updateOriginalInput({silent:n})))))})},removeItem:function(e,t){var n,i,o,r=this;n="object"==typeof e?e:r.getItem(e),e=S(n.attr("data-value")),i=r.items.indexOf(e),-1!==i&&(n.remove(),n.hasClass("active")&&(o=r.$activeItems.indexOf(n[0]),r.$activeItems.splice(o,1)),r.items.splice(i,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(e)&&r.removeOption(e,t),i<r.caretPos&&r.setCaret(r.caretPos-1),r.refreshState(),r.updatePlaceholder(),r.updateOriginalInput({silent:t}),r.positionDropdown(),r.trigger("item_remove",e,n))},createItem:function(t,n){var i=this,o=i.caretPos;t=t||e.trim(i.$control_input.val()||"");var r=arguments[arguments.length-1];if("function"!=typeof r&&(r=function(){}),"boolean"!=typeof n&&(n=!0),!i.canCreate(t))return r(),!1;i.lock();var s="function"==typeof i.settings.create?this.settings.create:function(e){var t={};return t[i.settings.labelField]=e,t[i.settings.valueField]=e,t},a=D(function(e){if(i.unlock(),!e||"object"!=typeof e)return r();var t=S(e[i.settings.valueField]);return"string"!=typeof t?r():(i.setTextboxValue(""),i.addOption(e),i.setCaret(o),i.addItem(t),i.refreshOptions(n&&"single"!==i.settings.mode),void r(e))}),l=s.apply(this,[t,a]);return"undefined"!=typeof l&&a(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",e)),t.refreshClasses()},refreshClasses:function(){var t=this,n=t.isFull(),i=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",i).toggleClass("full",n).toggleClass("not-full",!n).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!n&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,n,i,o,r=this;if(e=e||{},r.tagType===$){for(i=[],t=0,n=r.items.length;n>t;t++)o=r.options[r.items[t]][r.settings.labelField]||"",i.push('<option value="'+I(r.items[t])+'" selected="selected">'+I(o)+"</option>");i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),r.$input.html(i.join(""))}else r.$input.val(r.getValue()),r.$input.attr("value",r.$input.val());r.isSetup&&(e.silent||r.trigger("change",r.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(t):e(this.$control[0].childNodes[n]).before(t),this.setCaret(n+1)},deleteSelection:function(t){var n,i,o,r,s,a,l,u,p,c=this;if(o=t&&t.keyCode===f?-1:1,r=z(c.$control_input[0]),c.$activeOption&&!c.settings.hideSelected&&(l=c.getAdjacentOption(c.$activeOption,-1).attr("data-value")),s=[],c.$activeItems.length){for(p=c.$control.children(".active:"+(o>0?"last":"first")),
a=c.$control.children(":not(input)").index(p),o>0&&a++,n=0,i=c.$activeItems.length;i>n;n++)s.push(e(c.$activeItems[n]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(c.isFocused||"single"===c.settings.mode)&&c.items.length&&(0>o&&0===r.start&&0===r.length?s.push(c.items[c.caretPos-1]):o>0&&r.start===c.$control_input.val().length&&s.push(c.items[c.caretPos]));if(!s.length||"function"==typeof c.settings.onDelete&&c.settings.onDelete.apply(c,[s])===!1)return!1;for("undefined"!=typeof a&&c.setCaret(a);s.length;)c.removeItem(s.pop());return c.showInput(),c.positionDropdown(),c.refreshOptions(!0),l&&(u=c.getOption(l),u.length&&c.setActiveOption(u)),!0},advanceSelection:function(e,t){var n,i,o,r,s,a,l=this;0!==e&&(l.rtl&&(e*=-1),n=e>0?"last":"first",i=z(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(r=l.$control_input.val().length,s=0>e?0===i.start&&0===i.length:i.start===r,s&&!r&&l.advanceCaret(e,t)):(a=l.$control.children(".active:"+n),a.length&&(o=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(e>0?o+1:o))))},advanceCaret:function(e,t){var n,i,o=this;0!==e&&(n=e>0?"next":"prev",o.isShiftDown?(i=o.$control_input[n](),i.length&&(o.hideInput(),o.setActiveItem(i),t&&t.preventDefault())):o.setCaret(o.caretPos+e))},setCaret:function(t){var n=this;if(t="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,t)),!n.isPending){var i,o,r,s;for(r=n.$control.children(":not(input)"),i=0,o=r.length;o>i;i++)s=e(r[i]).detach(),t>i?n.$control_input.before(s):n.$control.append(s)}n.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,n=t.eventNS,i=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(n),e(document).off(n),e(document.body).off(n),delete t.$input[0].selectize},render:function(e,t){var n,i,o="",r=!1,s=this,a=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(n=S(t[s.settings.valueField]),r=!!n),r&&(x(s.renderCache[e])||(s.renderCache[e]={}),s.renderCache[e].hasOwnProperty(n))?s.renderCache[e][n]:(o=s.settings.render[e].apply(this,[t,I]),("option"===e||"option_create"===e)&&(o=o.replace(a,"<$1 data-selectable")),"optgroup"===e&&(i=t[s.settings.optgroupValueField]||"",o=o.replace(a,'<$1 data-group="'+_(I(i))+'"')),("option"===e||"item"===e)&&(o=o.replace(a,'<$1 data-value="'+_(I(n||""))+'"')),r&&(s.renderCache[e][n]=o),o)},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var n=t.settings.createFilter;return e.length&&("function"!=typeof n||n.apply(t,[e]))&&("string"!=typeof n||new RegExp(n).test(e))&&(!(n instanceof RegExp)||n.test(e))}}),E.count=0,E.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var n=e.fn.selectize.defaults,i=e.extend({},n,t),o=i.dataAttr,r=i.labelField,s=i.valueField,a=i.optgroupField,l=i.optgroupLabelField,u=i.optgroupValueField,p=function(t,n){var a,l,u,p,c=t.attr(o);if(c)for(n.options=JSON.parse(c),a=0,l=n.options.length;l>a;a++)n.items.push(n.options[a][s]);else{var d=e.trim(t.val()||"");if(!i.allowEmptyOption&&!d.length)return;for(u=d.split(i.delimiter),a=0,l=u.length;l>a;a++)p={},p[r]=u[a],p[s]=u[a],n.options.push(p);n.items=u}},c=function(t,n){var p,c,d,h,g=n.options,f={},v=function(e){var t=o&&e.attr(o);return"string"==typeof t&&t.length?JSON.parse(t):null},m=function(t,o){t=e(t);var l=S(t.attr("value"));if(l||i.allowEmptyOption)if(f.hasOwnProperty(l)){if(o){var u=f[l][a];u?e.isArray(u)?u.push(o):f[l][a]=[u,o]:f[l][a]=o}}else{var p=v(t)||{};p[r]=p[r]||t.text(),p[s]=p[s]||l,p[a]=p[a]||o,f[l]=p,g.push(p),t.is(":selected")&&n.items.push(l)}},y=function(t){var i,o,r,s,a;for(t=e(t),r=t.attr("label"),r&&(s=v(t)||{},s[l]=r,s[u]=r,n.optgroups.push(s)),a=e("option",t),i=0,o=a.length;o>i;i++)m(a[i],r)};for(n.maxItems=t.attr("multiple")?null:1,h=t.children(),p=0,c=h.length;c>p;p++)d=h[p].tagName.toLowerCase(),"optgroup"===d?y(h[p]):"option"===d&&m(h[p])};return this.each(function(){if(!this.selectize){var o,r=e(this),s=this.tagName.toLowerCase(),a=r.attr("placeholder")||r.attr("data-placeholder");a||i.allowEmptyOption||(a=r.children('option[value=""]').text());var l={placeholder:a,options:[],optgroups:[],items:[]};"select"===s?c(r,l):p(r,l),o=new E(r,e.extend(!0,{},n,l,t))}})},e.fn.selectize.defaults=E.defaults,e.fn.selectize.support={validity:b},E.define("drag_drop",function(t){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var n=this;n.lock=function(){var e=n.lock;return function(){var t=n.$control.data("sortable");return t&&t.disable(),e.apply(n,arguments)}}(),n.unlock=function(){var e=n.unlock;return function(){var t=n.$control.data("sortable");return t&&t.enable(),e.apply(n,arguments)}}(),n.setup=function(){var t=n.setup;return function(){t.apply(this,arguments);var i=n.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:n.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var t=n.$activeItems?n.$activeItems.slice():null,o=[];i.children("[data-value]").each(function(){o.push(e(this).attr("data-value"))}),n.setValue(o),n.setActiveItem(t)}})}}()}}),E.define("dropdown_header",function(t){var n=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),n.setup=function(){var i=n.setup;return function(){i.apply(n,arguments),n.$dropdown_header=e(t.html(t)),n.$dropdown.prepend(n.$dropdown_header)}}()}),E.define("optgroup_columns",function(t){var n=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,n){var i=t.closest("[data-group]").find("[data-selectable]"),o=i.index(t)+n;return o>=0&&o<i.length?i.eq(o):e()},this.onKeyDown=function(){var e=n.onKeyDown;return function(t){var i,o,r,s;return!this.isOpen||t.keyCode!==u&&t.keyCode!==d?e.apply(this,arguments):(n.ignoreHover=!0,s=this.$activeOption.closest("[data-group]"),i=s.find("[data-selectable]").index(this.$activeOption),s=t.keyCode===u?s.prev("[data-group]"):s.next("[data-group]"),r=s.find("[data-selectable]"),o=r.eq(Math.min(r.length-1,i)),void(o.length&&this.setActiveOption(o)))}}();var i=function(){var e,t=i.width,n=document;return"undefined"==typeof t&&(e=n.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,n.body.appendChild(e),t=i.width=e.offsetWidth-e.clientWidth,n.body.removeChild(e)),t},o=function(){var o,r,s,a,l,u,p;if(p=e("[data-group]",n.$dropdown_content),r=p.length,r&&n.$dropdown_content.width()){if(t.equalizeHeight){for(s=0,o=0;r>o;o++)s=Math.max(s,p.eq(o).height());p.css({height:s})}t.equalizeWidth&&(u=n.$dropdown_content.innerWidth()-i(),a=Math.round(u/r),p.css({width:a}),r>1&&(l=u-a*(r-1),p.eq(r-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(F.after(this,"positionDropdown",o),F.after(this,"refreshOptions",o))}),E.define("remove_button",function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var n=this,i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+I(t.title)+'">'+t.label+"</a>",o=function(e,t){var n=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,n)+t+e.substring(n)};this.setup=function(){var r=n.setup;return function(){if(t.append){var s=n.settings.render.item;n.settings.render.item=function(e){return o(s.apply(this,arguments),i)}}r.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!n.isLocked){var i=e(t.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()}}),E.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var n=t.onKeyDown;return function(t){var i,o;return t.keyCode===f&&""===this.$control_input.val()&&!this.$activeItems.length&&(i=this.caretPos-1,i>=0&&i<this.items.length)?(o=this.options[this.items[i]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[o])),this.refreshOptions(!0)),void t.preventDefault()):n.apply(this,arguments)}}()}),E});
!function(a,n,e){function t(a,n){return typeof a===n}function i(){var a,n,e,i,o,l,s;for(var r in x)if(x.hasOwnProperty(r)){if(a=[],n=x[r],n.name&&(a.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(e=0;e<n.options.aliases.length;e++)a.push(n.options.aliases[e].toLowerCase());for(i=t(n.fn,"function")?n.fn():n.fn,o=0;o<a.length;o++)l=a[o],s=l.split("."),1===s.length?y[s[0]]=i:(!y[s[0]]||y[s[0]]instanceof Boolean||(y[s[0]]=new Boolean(y[s[0]])),y[s[0]][s[1]]=i),w.push((i?"":"no-")+s.join("-"))}}function o(a){var n=M.className,e=y._config.classPrefix||"";if(j&&(n=n.baseVal),y._config.enableJSClass){var t=new RegExp("(^|\\s)"+e+"no-js(\\s|$)");n=n.replace(t,"$1"+e+"js$2")}y._config.enableClasses&&(n+=" "+e+a.join(" "+e),j?M.className.baseVal=n:M.className=n)}function l(a,n){return!!~(""+a).indexOf(n)}function s(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):j?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function r(a){return a.replace(/([a-z])-([a-z])/g,function(a,n,e){return n+e.toUpperCase()}).replace(/^-/,"")}function c(a,n){return function(){return a.apply(n,arguments)}}function d(a,n,e){var i;for(var o in a)if(a[o]in n)return e===!1?a[o]:(i=n[a[o]],t(i,"function")?c(i,e||n):i);return!1}function p(a){return a.replace(/([A-Z])/g,function(a,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function u(){var a=n.body;return a||(a=s(j?"svg":"body"),a.fake=!0),a}function f(a,e,t,i){var o,l,r,c,d="modernizr",p=s("div"),f=u();if(parseInt(t,10))for(;t--;)r=s("div"),r.id=i?i[t]:d+(t+1),p.appendChild(r);return o=s("style"),o.type="text/css",o.id="s"+d,(f.fake?f:p).appendChild(o),f.appendChild(p),o.styleSheet?o.styleSheet.cssText=a:o.appendChild(n.createTextNode(a)),p.id=d,f.fake&&(f.style.background="",f.style.overflow="hidden",c=M.style.overflow,M.style.overflow="hidden",M.appendChild(f)),l=e(p,a),f.fake?(f.parentNode.removeChild(f),M.style.overflow=c,M.offsetHeight):p.parentNode.removeChild(p),!!l}function b(n,t){var i=n.length;if("CSS"in a&&"supports"in a.CSS){for(;i--;)if(a.CSS.supports(p(n[i]),t))return!0;return!1}if("CSSSupportsRule"in a){for(var o=[];i--;)o.push("("+p(n[i])+":"+t+")");return o=o.join(" or "),f("@supports ("+o+") { #modernizr { position: absolute; } }",function(a){return"absolute"==getComputedStyle(a,null).position})}return e}function m(a,n,i,o){function c(){p&&(delete S.style,delete S.modElem)}if(o=t(o,"undefined")?!1:o,!t(i,"undefined")){var d=b(a,i);if(!t(d,"undefined"))return d}for(var p,u,f,m,v,h=["modernizr","tspan"];!S.style;)p=!0,S.modElem=s(h.shift()),S.style=S.modElem.style;for(f=a.length,u=0;f>u;u++)if(m=a[u],v=S.style[m],l(m,"-")&&(m=r(m)),S.style[m]!==e){if(o||t(i,"undefined"))return c(),"pfx"==n?m:!0;try{S.style[m]=i}catch(w){}if(S.style[m]!=v)return c(),"pfx"==n?m:!0}return c(),!1}function v(a,n,e,i,o){var l=a.charAt(0).toUpperCase()+a.slice(1),s=(a+" "+C.join(l+" ")+l).split(" ");return t(n,"string")||t(n,"undefined")?m(s,n,i,o):(s=(a+" "+A.join(l+" ")+l).split(" "),d(s,n,e))}function h(a,n,t){return v(a,e,e,n,t)}var w=[],x=[],g={_version:"3.2.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,n){var e=this;setTimeout(function(){n(e[a])},0)},addTest:function(a,n,e){x.push({name:a,fn:n,options:e})},addAsyncTest:function(a){x.push({name:null,fn:a})}},y=function(){};y.prototype=g,y=new y;var M=n.documentElement,j="svg"===M.nodeName.toLowerCase(),q="Moz O ms Webkit",C=g._config.usePrefixes?q.split(" "):[];g._cssomPrefixes=C;var A=g._config.usePrefixes?q.toLowerCase().split(" "):[];g._domPrefixes=A;var P={elem:s("modernizr")};y._q.push(function(){delete P.elem});var S={style:P.elem.style};y._q.unshift(function(){delete S.style}),g.testAllProps=v,g.testAllProps=h,y.addTest("cssanimations",h("animationName","a",!0)),i(),o(w),delete g.addTest,delete g.addAsyncTest;for(var k=0;k<y._q.length;k++)y._q[k]();a.LA_Modernizr=y}(window,document),eval(function(a,n,e,t,i,o){if(i=function(a){return(n>a?"":i(parseInt(a/n)))+((a%=n)>35?String.fromCharCode(a+29):a.toString(36))},!"".replace(/^/,String)){for(;e--;)o[i(e)]=t[e]||i(e);t=[function(a){return o[a]}],i=function(){return"\\w+"},e=1}for(;e--;)t[e]&&(a=a.replace(new RegExp("\\b"+i(e)+"\\b","g"),t[e]));return a}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",62,206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{}));var _T={rotate:function(a){var n=parseFloat(a)*(Math.PI/180),e=Math.cos(n),t=Math.sin(n),i=e,o=t,l=-t,s=e;return $M([[i,l,0],[o,s,0],[0,0,1]])},skew:function(a,n){var e=parseFloat(a)*(Math.PI/180),t=parseFloat(n)*(Math.PI/180),i=Math.tan(e),o=Math.tan(t);return $M([[1,i,0],[o,1,0],[0,0,1]])},translate:function(a,n){var e=a||0,t=n||0;return $M([[1,0,e],[0,1,t],[0,0,1]])},scale:function(a,n){var e=a||0,t=n||0;return $M([[e,0,0],[0,t,0],[0,0,1]])},toString:function(a){var n,e,t="matrix(";for(e=1;3>=e;e++)for(n=1;2>=n;n++)t+=a.e(n,e)+", ";return t=t.substr(0,t.length-2)+")"},fromString:function(a){var n=/^matrix\((\S*), (\S*), (\S*), (\S*), (\S*), (\S*)\)$/g.exec(a),e=parseFloat(n?n[1]:1),t=parseFloat(n?n[2]:0),i=parseFloat(n?n[3]:0),o=parseFloat(n?n[4]:1),l=parseFloat(n?n[5]:0),s=parseFloat(n?n[6]:0);return $M([[e,i,l],[t,o,s],[0,0,1]])}},AwesomePanel=function(a){"use strict";function n(a,n,e,t,o,r){var f,m,v,h,w,x,g,y,M,j,q=i(n);if("fixed"===q.css("position"))if(q.addClass("at_fixed_inner_el"),c)m=q.css(p),"none"!==m?(q.attr("ncf-old-matrix",m),m=_T.fromString(m),v=m.x(u),q.css(p,_T.toString(v)).attr("ncf-transformed",1)):q.css(p,_T.toString(u)).attr("ncf-transformed",1);else{for(f=q;(f=f.parent())&&(j=f.css(p),!(j&&"none"!==j||f.is("body"))););h=f.offset(),w=h.left,x=h.top,d&&q.is(":visible")&&q.hide().attr("ncf-ff-hidden",1),g={left:q.css("left"),right:q.css("right"),top:q.css("top"),bottom:q.css("bottom"),transition:window.getComputedStyle(q.get(0)).transition},d&&q.attr("ncf-ff-hidden")&&q.show(),y={},M=parseInt(g.bottom),M=isNaN(M)?0:M,"auto"!==g.left?(g.toChangeHor="left",y[g.toChangeHor]="-="+(w-t)):"auto"!==g.right?(g.toChangeHor="right",y[g.toChangeHor]="-="+(w-t)):g.toChangeHor="left","auto"!==g.top?(g.toChangeVert="top",y[g.toChangeVert]=x-e>0?parseInt(g.top)-(x-e):parseInt(g.top)+(e-x)):"auto"!==g.bottom?(g.toChangeVert="bottom",y[g.toChangeVert]=l.height()+b.top+b.bottom+M-s.height()-e+"px"):(g.toChangeVert="top",y[g.toChangeVert]=e),y.transitionProperty="none",q.css(y).attr("ncf-old-pos",JSON.stringify(g)),q.css("tra")}}function e(a,n){var e,t,o=i(n);c?(setTimeout(function(){o.removeClass("at_fixed_inner_el")},500),o.attr("ncf-old-matrix")?o.css(p,o.attr("ncf-old-matrix")).attr("ncf-old-matrix",""):o.css(p,f).attr("ncf-transformed","")):(setTimeout(function(){o.removeClass("at_fixed_inner_el"),e=JSON.parse(o.attr("ncf-old-pos")),t={},e?(t[e.toChangeHor]=e[e.toChangeHor],t[e.toChangeVert]=e[e.toChangeVert],"bottom"===e.toChangeVert&&(t.top=""),o.css(t),o.attr("ncf-old-pos","")):o.css({left:"",top:"",bottom:"",right:"",transitionProperty:""})},500),setTimeout(function(){o.css("transition",e.transition)},700))}function t(a){var n,e,t=["Moz","Webkit","O","ms"],i=document.createElement("div"),o=a.charAt(0).toUpperCase()+a.substr(1);if(a in i.style)return a;for(e=0;e<t.length;++e)if(n=t[e]+o,n in i.style)return n;this.div=null}var i=jQuery,o=this;o.options=a,o.id=a.id,o.item_id=a.item_id,o.model_name=a.model_name,o.content_url=a.content_url,o.overlayvisible=!0;var l=i("body"),s=i(window),r=i("html"),c=/msie|trident.*rv\:11\./.test(navigator.userAgent.toLowerCase()),d=/firefox/.test(navigator.userAgent.toLowerCase()),p=t("transform"),u=_T.translate("left"===o.direction?parseInt(o.width):-parseInt(o.width),0),f=_T.toString(_T.translate(0,0)),b={top:parseInt(r.css("marginTop")),bottom:parseInt(r.css("marginBottom"))};o.panel=i('<div class="a-slide-panel" id="a-slide-panel-'+o.id+'"></div>'),o.overlay=i("<div></div>").addClass("a-slide-panel-overlay"),o.spinner=i('<div class="a-slide-panel-spinner a-spinner at-transition"></div>'),o.parent=a.parent||"body",o.position="body"==o.parent?"fixed":"absolute",o.direction=a.direction||"left",o.animation=a.animation||"over",o.width=a.width||"100%",o.height=a.height||"100%",o.animation_start=function(){o.spinner.addClass("fade-animation-in")},o.animation_end=function(){o.spinner.removeClass("fade-animation-in")},o.hide_content=function(){o.panel.find(".a-slide-panel-content-wrapper").removeClass("fade-animation-in")},o.show_content=function(){o.panel.find(".a-slide-panel-content-wrapper").addClass("fade-animation-in")},o.open=function(){var a=i(o.parent);window[o.id+"_panel_openinig"]=!0,window[o.id+"_overlayvisible"]=!0,a.append(o.overlay),a.addClass("a-slide-panel-parent"),window[o.id+"_panel_object"]=o,window[o.id+"_panel"]=o.panel,a.append(o.panel),o.panel.css("width",o.width),o.panel.css("height",o.height),o.panel.addClass("a-slide-to-"+o.direction),setTimeout(function(){if("push"==o.animation){var e="left"==o.direction?"-"+o.width:o.width,t='<style type="text/css" id="a-slide-panel-styles">                            .a-slide-panel-push > *{                            -webkit-transform:translateX('+e+");                            -moz-transform:translateX("+e+");                            -ms-transform:translateX("+e+");                            -o-transform:translateX("+e+");                            transform:translateX("+e+");                            }                            </style>";a.append(t)}if(a.addClass("a-slide-panel-"+o.animation),o.panel.addClass("a-slide-panel-active"),i(o.overlay).addClass("open"),i(o.overlay).css("position",o.position),"push"==o.animation){var l=s.scrollTop(),r=s.scrollLeft();("left"==o.direction||"right"==o.direction)&&(r=+r),a.find("*").each(function(a,e){i(e).hasClass("a-slide-panel")||i(e).hasClass("a-slide-panel-overlay")||i(e).parent().is(i(o.parent))||0!==i(e).closest(".a-slide-panel").length||n(a,e,l,r)})}setTimeout(function(){window[o.id+"_panel_openinig"]=!1,a.addClass("at-overflow-hidden"),i(window).height()<i(document).height()&&a.addClass("at-overflow-hidden-"+o.direction)},400)},14)},o.close=function(){if(i(".close-panel",i(o.parent)).off("click"),"push"==o.animation){var a=i(".at_fixed_inner_el");a.each(function(a,n){e(a,n)})}LA_Modernizr.cssanimations?(i(o.overlay).remove(),window[o.id+"_overlayvisible"]=!1):i(o.parent).find(o.overlay).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){i(o.overlay).remove()}).addClass("remove-overlay"),o.panel.removeClass("a-slide-panel-active"),i(o.parent).removeClass("a-slide-panel-"+o.animation),i(o.parent).removeClass("at-overflow-hidden"),i(o.parent).removeClass("at-overflow-hidden-"+o.direction),"function"==typeof o.options.callback_close&&o.options.callback_close(),setTimeout(function(){"push"==o.animation&&i("#a-slide-panel-styles",o.parent).remove(),i(o.parent).removeClass("a-slide-panel-parent"),i(o.html_pool)&&i(o.html_pool).append(i(o.html)),o.hide_content(),i(o.panel).remove(),delete window[o.id+"_panel"]},500)},o.appendHTML=function(){o.html=o.html||a.html,o.html_pool=i(o.html).parent();var n=i(o.html)||o.html;o.panel.append(n),o.panel.append(o.spinner),o.animation_start(),o.hide_content()},o.showHTML=function(){o.animation_end(),o.show_content(),"function"==typeof o.options.callback_open&&o.options.callback_open()},o.bindActions=function(){var a=i(o.parent);i(o.overlay,a).on("click",function(){window[o.id+"_overlayvisible"]&&o.close()}),i(".close-panel",a).on("click",function(){window[o.id+"_overlayvisible"]&&o.close()})},o.init=function(){return o.open(),o.bindActions(),"function"==typeof o.options.load_model?(o.appendHTML(),void o.options.load_model(o.item_id,o.model_name).then(function(){o.showHTML()})):"object"==typeof o.options.load_content?(o.panel.append(o.spinner),o.animation_start(),void o.options.load_content.then(function(a){o.html=a,o.appendHTML(),o.showHTML()})):(o.appendHTML(),void o.showHTML())}};
var AwesomeAjax=function(e){"use strict";var a=jQuery,r=this,e=e+"_";r.result={},r.load_model=function(a,n,s,o){return r.ajax({action:e+"get_"+a,data:{id:n},success_handler:s,error_handler:o})},r.publish_model=function(a,n,s){return r.ajax({action:e+"publish_model",data:{id:a},success_handler:n,error_handler:s})},r.delete_model=function(a,n){return r.ajax({action:e+"delete_model",data:{id:a,model_name:n},success_handler:function(e){return e}})},r.ajax=function(r){return a.ajax({url:window[e+"localize"].ajaxurl,type:"post",data:{action:r.action,security:window[e+"localize"].ajax_nonce,data:r.data||{}},success:function(e){var a=wpAjax.parseAjaxResponse(e);if(a.errors){var n=a.responses[0].errors;r.success_error_handler(n)}else{var s=JSON.parse(a.responses[0].data);r.success_handler(s)}},error:function(e){r.error_handler(e)}})}};
var AwesomeDrag=function(){"use strict";var e=jQuery,t=this;t.sortableEl=".connected-sortable",t.employers_panel="#panel-employers",t.cloneEmployers=function(){var l=e(t.employers_panel).clone().removeAttr("id").attr("panel","employers-clone").addClass("at-transition");window.ats_employers_clone=ats_employers.clone(),setTimeout(function(){e(t.employers_panel).fadeOut()},100);var a=l.find("li"),o=model.get("employers")||[];e.each(a,function(){var t=parseInt(e(this).attr("employer-id"));if(AwesomeUtil.find_in_array_of_objects(o,"ID",t)){var a=ats_employers_clone.findWhere({id:t});e(this,l).remove(),ats_employers_clone.remove(a)}});var s=e('<li><button data-action="push-all-employers"><span title="Push all">Push all</span></button></li>');l.find(".panel-heading .panel-actions").prepend(s),e(".employers-list",ats_panel).html(l),t.bind_clone(),e(document).on("click",'[data-action="remove-employer"]',function(){var l=e(this).parents("li[employer-id]"),a=+l.attr("employer-id"),o=ats_employers.findWhere({id:a});e("#employers-list",ats_panel).append(l),ats_employers_clone.add(o),t.updateElements()})},t.bind_clone=function(){e(document).on("mouseenter",".panel-pop-up #employers-list",function(){e("#team-sortable",ats_panel).addClass("pulsate")}),e(document).on("mouseleave",".panel-pop-up #employers-list",function(){e("#team-sortable",ats_panel).removeClass("pulsate")}),e(document).on("click",'[data-action="push-all-employers"]',function(){ats_employers_clone.reset();var l=e("ul.employers-list > li",ats_panel);_.clone(model.get("employers_ids"));e.each(l,function(t,l){e("#team-sortable",ats_panel).append(l)}),t.updateElements()}),e(document).on("click",'[data-action="remove-all-employers"]',function(){var l=e("#team-sortable > li",ats_panel);e.each(l,function(t,l){e("ul.employers-list",ats_panel).append(l);var a=parseInt(e(l).attr("employer-id")),o=ats_employers.findWhere({id:a});ats_employers_clone.add(o)}),t.updateElements()})},t.initSortable=function(){e(t.sortableEl).addClass("sortable-placeholder"),e("#team-sortable, #employers-list").sortable({appendTo:"body",zIndex:99999,connectWith:t.sortableEl,forcePlaceholderSize:!0,placeholder:"sortable-placeholder-inner",cursor:"move",cursorAt:{top:25,left:25},helper:function(t,l){var a=e(l).find(".foto").clone(),o=e('<li class="item"></li>').append(a);return o},create:function(e,t){},start:function(t,l){e(l.helper).addClass("pop-up"),e(".a-slide-panel #team-sortable").addClass("drop-highlight")},stop:function(t,l){e(".a-slide-panel #team-sortable").removeClass("drop-highlight")},update:function(l,a){e(a.item).attr("style","");var o=e(a.item[0].parentElement).attr("id"),s=parseInt(e(a.item[0]).attr("employer-id")),n=ats_employers.findWhere({id:s});"team-sortable"==o?ats_employers_clone.remove(n):"employers-list"==o&&ats_employers_clone.add(n),t.updateElements()}})},t.updateElements=function(){var t=e("#team-employers",ats_panel);t.val("");var l=[],a=[];e("#team-sortable li",ats_panel).each(function(){var t=parseInt(e(this).attr("employer-id")),o=e(this).find("img").attr("src"),s=e(this).find(".name").html(),n=e(this).find(".position").html(),r=e(this).find(".teams_count").html();a.push(t),l.push({ID:t,foto:o,post_title:s,position:n,teams_count:r})});var o=JSON.stringify(a);t.val(o),model.set("employers_ids",a),model.set("employers",l)},t.destroy=function(){e(t.employers_panel).show(),e(".panel.panel-pop-up").remove(),e(".connected-sortable").removeClass("sortable-placeholder"),e("#employers-list").sortable({disabled:!0}),e(".employers-list",ats_panel).html(""),e(".panel-pop-up #employers-list").off()},t.init=function(){t.cloneEmployers(),t.updateElements(),t.initSortable()}};
var ATS_Ajax=function(){"use strict";var i=jQuery,l="ats",e=new AwesomeAjax(l),t=this;t.result={},t.load_model=function(t,_){if(i.isNumeric(t))return e.load_model(_,t,function(i){window.model=new AwesomeModel(i)});if("#"==t){if("settings"==_)return e.ajax({action:l+"_get_settings",success_handler:function(i){window.settings_model=new AwesomeModel(i)}});if("team"==_)return e.ajax({action:l+"_get_team_defaults",success_handler:function(i){window.model=new AwesomeModel(i)}});if("employer"==_)return e.ajax({action:l+"_get_employer_defaults",success_handler:function(i){window.model=new AwesomeModel(i)}})}},t.fill_blocks_order=function(i,l,e){var t=JSON.stringify(e);i.find('[name="team_'+l+'"]').val(t)},t.fill_team_grid_blocks_order=t.fill_blocks_order.bind(t),t.fill_team_table_blocks_order=t.fill_blocks_order.bind(t),t.fill_team_employers=function(e,t,o){var s="",n=[];i.each(o,function(i,e){n.push(e.ID);var t=e.foto?'<img width="40" height="40" src="'+e.foto+'">':'<img src="'+window[l+"_localize"].default_avatar+'" alt="" />',o='                <li data-action="edit-employer" class="clearfix" employer-id="{ID}" title="{name}">                    <div class="foto" data-wr_replaced="true">                        {foto}                    </div>                    <span class="name">{name}</span>                    <span class="position">{position}</span>                    <div class="teams"><span class="teams_count">{teams_count}</span> Teams</div>                    <button class="btn-action remove-employer at-transition at-transition-fast" title="Remove" data-action="remove-employer">                        <svg viewBox="0 0 20 20">                            <use xlink:href="#icon-delete"></use>                        </svg>                    </button>                </li>';s+=o.replace_all("{name}",_.escape(e.post_title)).replace_all("{foto}",t).replace_all("{ID}",e.ID).replace_all("{position}",_.escape(e.position)).replace_all("{teams_count}",e.teams_count)}),i(e).find("#team-employers").val(JSON.stringify(n)),i(e).find("#team-sortable").html("").append(s)},t.fill_color=function(l,e,t){e=e.replace_all("team_",""),i(l).find("."+e).find("input").val(t),i(l).find("."+e).find("span.color > i").css("background-color",t)},t.fill_team_styles_button_color=t.fill_color.bind(t),t.fill_team_styles_button_hover_color=t.fill_color.bind(t),t.fill_team_styles_button_text_color=t.fill_color.bind(t),t.fill_team_styles_button_text_hover_color=t.fill_color.bind(t),t.fill_team_styles_base_color=t.fill_color.bind(t),t.fill_team_styles_card_base_color=t.fill_color.bind(t),t.fill_team_styles_card_border_color=t.fill_color.bind(t),t.fill_team_styles_card_divider_color=t.fill_color.bind(t),t.fill_team_styles_card_shadow_color=t.fill_color.bind(t),t.fill_team_styles_card_even_row_color=t.fill_color.bind(t),t.fill_team_styles_panel_color=t.fill_color.bind(t),t.fill_visibility=function(l,e,t){i(l).find('[name="'+e+'"]').attr("data-checked",t).val(t)},t.fill_team_styles_slider=t.fill_visibility.bind(t),t.fill_team_styles_slider_autoplay=t.fill_visibility.bind(t),t.fill_team_styles_slider_adaptive=t.fill_visibility.bind(t),t.fill_team_styles_filter=t.fill_visibility.bind(t),t.fill_team_styles_search=t.fill_visibility.bind(t),t.fill_team_styles_panel=t.fill_visibility.bind(t),t.fill_team_styles_panel_contacts_visible=t.fill_visibility.bind(t),t.fill_team_styles_panel_social_visible=t.fill_visibility.bind(t),t.fill_team_styles_reveal=t.fill_visibility.bind(t),t.fill_team_styles_body_visible=t.fill_visibility.bind(t),t.fill_team_styles_photo_visible=t.fill_visibility.bind(t),t.fill_team_styles_name_visible=t.fill_visibility.bind(t),t.fill_team_styles_divider_visible=t.fill_visibility.bind(t),t.fill_team_styles_position_visible=t.fill_visibility.bind(t),t.fill_team_styles_short_bio_visible=t.fill_visibility.bind(t),t.fill_team_styles_phone_visible=t.fill_visibility.bind(t),t.fill_team_styles_email_visible=t.fill_visibility.bind(t),t.fill_team_styles_skype_visible=t.fill_visibility.bind(t),t.fill_team_styles_link_visible=t.fill_visibility.bind(t),t.fill_team_styles_location_visible=t.fill_visibility.bind(t),t.fill_team_styles_social_visible=t.fill_visibility.bind(t),t.fill_team_styles_skills_visible=t.fill_visibility.bind(t),t.fill_employer_foto=function(l,e,t){i("#employer-form-foto-remove",ats_panel).show(),""===t&&i("#employer-form-foto-remove",ats_panel).hide();var _=i("<img />").attr("src",t);i(l).find("#employer-form-foto").html("").append(_)},t.fill_employer_panel_text=function(t,_,o){window.employer_panel_text_dfd=i.Deferred(),e.ajax({action:l+"_get_tiny_mce",data:{id:_,content:o},success_handler:function(l){i("."+_,t).html(l),tinyMCE.get(_)&&(tinymce.editors=[]),tinyMCEPreInit.mceInit[_].setup=function(i){i.on("init",function(i){employer_panel_text_dfd.resolve("tinymce init")}),i.on("change",function(l){model.set("custom_fields.panel_text",i.getContent())}),i.on("PostRender")},tinyMCEPreInit.mceInit[_].external_plugins={},tinyMCE.init(tinyMCEPreInit.mceInit[_]),quicktags(tinyMCEPreInit.qtInit[_])}})},t.fill_checkbox=function(l,e,t){i(l).find('[name="'+e+'"]').attr("data-checked",t).val(t)},t.fill_team_styles_filter_bold=t.fill_checkbox.bind(t),t.fill_team_styles_name_bold=t.fill_checkbox.bind(t),t.fill_team_styles_position_bold=t.fill_checkbox.bind(t),t.fill_team_styles_short_bio_bold=t.fill_checkbox.bind(t),t.fill_team_styles_contacts_bold=t.fill_checkbox.bind(t),t.fill_team_styles_filter_italic=t.fill_checkbox.bind(t),t.fill_team_styles_name_italic=t.fill_checkbox.bind(t),t.fill_team_styles_position_italic=t.fill_checkbox.bind(t),t.fill_team_styles_short_bio_italic=t.fill_checkbox.bind(t),t.fill_team_styles_contacts_italic=t.fill_checkbox.bind(t),t.fill_select=function(l,e,t){i(l).find('[name="'+e+'"]').val(t),i(l).find('[name="'+e+'"]').fsdropdown("update")},t.fill_team_template=function(l,e,t){var _="",o=window.model.get("layout");i.each(window.templates.get(o),function(i,l){_+='<option value="'+i+'">'+l.label+"</option>"}),i(l).find('[name="'+e+'"]').html("").html(_).val(t),i(l).find('[name="'+e+'"]').fsdropdown("update")},t.set_employer_photo=function(i,t,_){return e.ajax({action:l+"_get_team_preview_photo",data:{id:i,size:t},success_handler:function(i){var e=""!==i?i:'<img src="'+window[l+"_localize"].default_avatar+'"/>';_(e)}})},t.set_team_employers=function(i,t,_){return e.ajax({action:l+"_get_team_employers_photos",data:{ids:i,size:t},success_handler:function(i){_(i)}})},t.get_templates=function(){return e.ajax({action:l+"_get_templates",success_handler:function(i){window.templates=new Backbone.NestedModel(i)}})},t.init_departments=function(){return e.ajax({action:l+"_get_taxonomy_terms",data:{taxonomy:l+"-employer-taxonomy"},success_handler:function(i){window.ats_employers_taxonomy_terms=i}})},t.get_employer_form=function(i){return e.ajax({action:l+"_get_employer_form",data:{},success_handler:function(l){i(l)}})}};
var AwesomeForm=function(){"use sctrict";var t=new ATS_Ajax,e=jQuery,a=this;a.clear=function(){a.content=e(".a-slide-panel-content",ats_panel);var t=e(a.content).find('input[type!="button"], textarea');e.each(t,function(t,a){e(a).val(""),e(a).html("")}),e("#team-sortable",ats_panel).html(""),e(".alert",ats_panel).html("").attr("class","alert")},a.fill=function(l,n,r,i){var o=e.Deferred();if(i=i||"",r=r||l.fill_rules,!e.isEmptyObject(l)){var s=r[i]||r;e.each(l,function(o,c){if("object"!=typeof c||c instanceof Array||"styles"!=o)if("object"!=typeof c||c instanceof Array){if(!_.contains(s,o)){var f=n+"_"+o;return void e('[name="'+f+'"]',ats_panel).val("").val(c)}if(null!==c){var f=i?n+"_"+i+"_"+o:n+"_"+o,u="fill_"+f;return console.log(u),void t[u](ats_panel,f,c)}}else a.fill(c,n,r,o);else a.fill(c[l.layout],n,r,"styles")})}return o.resolve(),o},a.init=function(t){a.clear(),a.fill(t.attributes,t.get("model"))}};
var AwesomeTooltip=function(t){"use strict";var e=this,o=jQuery,i=o(t.container),a=o(t.content),n=t.direction||"top",l=t.data;e.viewport=o(t.viewport||"#wpbody"),e.args=t,e.replace_tags=function(){var t=a.prop("outerHTML");return o.each(l,function(e,o){t=t.replace_all("{{"+e+"}}",o)}),t},e.show_field=function(t){var e=model.get("styles."+model.get("layout"));o(".model-field",t).hide(),o.each(e,function(e,i){null!==i&&o("."+e,t).show()})},e.open=function(){var t='<div class="a-tooltip-wrapper at-transition at-transition-fast" data-field="##field##">            <div class="a-tooltip a-tooltip-arrow">            <div class="a-tooltip-content">            ##content##            </div>            </div>            </div>',a=e.replace_tags();a=t.replace(/##content##/g,a),a=a.replace(/##field##/g,l.field_name);var r=o(a);if(i.append(r),"undefined"!=typeof window.model&&e.show_field(r),e.args.center){var d=(ats_panel.width()-r.width())/2-30;r.css("left",d+"px")}0!==r.length&&r.addClass("tooltip-"+n)},e.destroy=function(){i.find(".a-tooltip-wrapper").remove()},e.init=function(){e.open()}};
var ATS_Animation=function(){var e=this,n=jQuery;e["delete"]=function(e){var i=n.Deferred();return n.browser.msie&&parseInt(n.browser.version,10)<=9?(e.remove(),i.resolve()):e.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(n){i.resolve(),e.remove()}).addClass("removed-item"),i},e.delete_model=function(i,t){var o=n("#panel-"+t+"s");e["delete"](i),setTimeout(function(){var e=n("#"+t+"s-list > li").length;if(0===e){var i=o.find(".empty-model");return i.css("display","block").addClass("at-transition"),setTimeout(function(){i.css("visibility","visible").css("opacity","1")},1),void o.find(".panel-heading span").remove()}o.find("> .panel-heading span").html("("+e+")")},500)}};
!function(n){"use strict";n(function(){function t(){window.preview=new AwesomeSettings,preview.init()}function e(){"undefined"!=typeof preview&&preview.destroy()}var i="settings",a=new AwesomeAjax("ats");n("#action-settings").on("click",function(){var n={id:"ats",item_id:"#",parent:"#wpcontent",html:"#settings-wrap",model_name:"settings",direction:"right",width:"67%",callback_open:t,callback_close:e};window.settings_panel=new AwesomePanel(n),settings_panel.init()}),n('[data-action="save-settings"]').on("click",function(){var t=n('[data-type="form"]',ats_panel),e=t.find('[data-type="settings-alert"]');e.attr("class","alert").hide(),window.settings_panel.hide_content(),window.settings_panel.animation_start(),a.ajax({action:"ats_update_"+i,data:{data:window.settings_model.toJSON()},success_handler:function(n){window.settings_panel.show_content(),window.settings_panel.animation_end()},success_error_handler:function(t){var i="";n.each(t,function(n,t){i+="<p>",i+=t.message,i+="</p>"}),e.addClass("alert-warning").show().html(i),window.settings_panel.show_content(),window.settings_panel.animation_end()},error_handler:function(){e.addClass("alert-warning").show().html(data),window.settings_panel.show_content(),window.settings_panel.animation_end()}})})})}(jQuery);
!function(e){"use strict";e(function(){function t(){e('[name="team_template"]',ats_panel).on("change",function(t){var a=model.get("layout"),n=e(this).val();model.set("styles."+a,templates.get(a)[n].styles),model.set("styles."+a+".template",n),preview.destroy(),preview.init()})}function a(){e('[name="team_layout"]',ats_panel).on("change",function(t){model.set("layout",e(this).val()),preview.destroy(),preview.init()})}function n(){window.preview=new AwesomeTeam,preview.init().done(function(){a(),t(),c.init()}),e('[data-action="shortcode-team"]',ats_panel).hide()}function o(){window.preview=new AwesomeTeam,preview.init().done(function(){a(),t()}),c.init(),s()}function i(){preview.destroy(),c.destroy(),e("select",ats_panel).fsdropdown("destroy")}function l(t){var a=e.Deferred(),n=model.get("employers_ids"),o=e('#teams-list li[team-id="'+model.get("id")+'"] .team-members');return e.each(n,function(e,a){o.append('<li><div class="foto">'+t[e]+"</div>")}),a.resolve(),a}function d(){var t=e.Deferred(),a=model.get("employers_ids"),n=e('#teams-list li[team-id="'+model.get("id")+'"] .team-members'),o=0==model.get("employers").length?"":model.get("employers").length+" people";return n.find('li[class!="empty"]').remove(),a.length>0?w.set_team_employers(a,"a-thumbnail",l).then(function(){t.resolve()}):t.resolve(),e('#teams-list li[team-id="'+model.get("id")+'"] span.name').html(model.get("name")),e('#teams-list li[team-id="'+model.get("id")+'"] span.employee-count').html(o),t}function s(){var t=model.get("id");if(0!==t){var a='[a-team-showcase id="'+t+'"]';e('[data-action="shortcode-team"]',ats_panel).find("input").val(a),e('[data-action="shortcode-team"]',ats_panel).show()}}var r="team",c=new AwesomeDrag,m=new AwesomeAjax("ats"),w=new ATS_Ajax,p=new ATS_Animation;e('[data-action="add-team"]').on("click",function(){var e={id:"ats",item_id:"#",parent:"#wpcontent",html:"#team-add-wrap",model_name:r,direction:"right",width:"100%",load_model:w.load_model,callback_open:n,callback_close:i};window.panel=new AwesomePanel(e),panel.init()}),e('[data-action="edit-team"]').on("click",function(){var t=e(this).parents("li[team-id]"),a=parseInt(e(t).attr("team-id")),n={id:"ats",item_id:a,parent:"#wpcontent",html:"#team-edit-wrap",model_name:r,direction:"right",width:"100%",load_model:w.load_model,callback_open:o,callback_close:i};window.panel=new AwesomePanel(n),panel.init()}),e("#team-edit-wrap .save-panel, #team-add-wrap .save-panel").on("click",function(){if(window.model.locked)return!1;var t=e('[data-type="form"]',ats_panel),a=e(t).attr("data-model"),n=t.find(".alert");n.attr("class","alert").hide(),window.model.locked=!0,window.panel.hide_content(),window.panel.animation_start();var o=window.model.clone();o.unset("grid_html"),o.unset("table_html"),o.unset("widget_html"),m.ajax({action:"ats_update_or_new_"+a,data:{data:o.toJSON()},success_handler:function(e){window.model.set("id",e),s(),d().then(function(){window.panel.show_content(),window.panel.animation_end(),window.model.locked=!1})},success_error_handler:function(t){var a="";e.each(t,function(e,t){a+="<p>",a+=t.message,a+="</p>"}),n.addClass("alert-warning").show().html(a),window.panel.show_content(),window.panel.animation_end(),window.model.locked=!1},error_handler:function(e){n.addClass("alert-warning").show().html(e),window.model.locked=!1}})}),e('[data-action="delete-team"]').on("click",function(){var t=e(this).parents("li[team-id]"),a=e(this).find(".a-spinner"),n=e(this).find("svg"),o=parseInt(t.attr("team-id")),i=r;confirm("You really want to delete team?")&&(n.hide(),a.show(),m.delete_model(o,i).then(function(){p.delete_model(t,i)}))}),e('[data-action="shortcode-team"]').on({mouseenter:function(){var t=e(this).find(".a-tooltip-wrapper");setTimeout(function(){t.find("input").select()},300)},mouseleave:function(){e(this).find(".a-tooltip-wrapper")}}),e('[data-action="random-team-style"]').on("click",function(){var t=["base","card_base","card_border","card_divider","card_shadow","card_even_row","name","position","short_bio","contacts","social"];model.random(),e.each(t,function(e,t){var a=t+"_color",n=model.get("layout");_(a,model.get("styles."+n+"."+a))})});var _=function(e,t){("phone_color"==e||"email_color"==e||"skype_color"==e)&&(e="contacts_color"),"object"==typeof window["colorpicker_"+e]&&window["colorpicker_"+e].colorpicker("setValue",t)};e('[data-action="modal"]').lightbox({minWidth:50,minHeight:100}),e('[data-toggle="collapse"]').on("click",function(){var t=e(this).attr("data-target");e(t,ats_panel).toggleClass("in")})})}(jQuery);
!function(e){"use strict";e(function(){function t(t,n){return d.load_model(t,n).then(function(){return d.init_departments().then(function(){var t=e.Deferred(),n=e.Deferred();return window.selectize_instance=e('[name="employer_department"]',ats_panel).selectize({plugins:["restore_on_backspace","remove_button"],delimiter:",",addPrecedence:!1,options:ats_employers_taxonomy_terms||[],items:model.get("department")||[],valueField:"name",labelField:"name",searchField:"name",preload:!0,onInitialize:function(){n.resolve("selectize init")},create:function(e){return{value:e,name:e}},render:{option:function(e,t){return"<div>"+t(e.name)+"</div>"}}}),d.fill_employer_panel_text(ats_panel,"employer_panel_text",model.get("custom_fields.panel_text")),e.when(n,employer_panel_text_dfd).done(function(e,n){t.resolve("both init")}),t})})}function n(){e("#employer-form-foto-remove",ats_panel).hide(),window.preview=new AwesomeEmployer,preview.init()}function a(){"undefined"!=typeof selectize_instance&&"undefined"!=typeof selectize_instance[0]&&"undefined"!=typeof selectize_instance[0].selectize&&selectize_instance[0].selectize.destroy(),"undefined"!=typeof preview&&preview.destroy(),"indefined"!=typeof tinyMCEPreInit&&(tinyMCEPreInit.mceInit={},tinyMCEPreInit.qtInit={}),e("div.employer_panel_text").html("")}function i(t){e('#employers-list li[employer-id="'+model.get("id")+'"] .foto').html(t)}function o(){var t=model.get("id");d.set_employer_photo(t,"a-small",i),e('#employers-list li[employer-id="'+t+'"] span.name').html(model.escape("name")),e('#employers-list li[employer-id="'+t+'"] span.position').html(model.escape("custom_fields.position"))}var l="employer",r=new AwesomeAjax("ats"),d=new ATS_Ajax,s=new ATS_Animation;e('[data-action="add-employer"]').on("click",function(){var e={id:"ats",item_id:"#",parent:"#wpcontent",html:"#employer-add-wrap",model_name:l,direction:"right",width:"67%",load_model:t,callback_open:n,callback_close:a};window.panel=new AwesomePanel(e),panel.init()}),e('[data-action="edit-employer"]').on("click",function(i){var o=parseInt(e(this).attr("employer-id"));if("delete-employer"!==e(i.target).parents("button").attr("class")&&"delete-employer"!==e(i.target).attr("class")){var r={id:"ats",item_id:o,parent:"#wpcontent",html:"#employer-edit-wrap",model_name:l,direction:"right",width:"67%",load_model:t,callback_open:n,callback_close:a};window.panel=new AwesomePanel(r),panel.init()}}),e("#employer-edit-wrap .save-panel, #employer-add-wrap .save-panel").on("click",function(){var t=e('[data-type="form"]',ats_panel),n=e(t).attr("data-model"),a=t.find('[data-type="employer-alert"]');a.attr("class","alert").hide(),window.panel.hide_content(),window.panel.animation_start(),r.ajax({action:"ats_update_or_new_"+n,data:{data:window.model.toJSON()},success_handler:function(e){window.model.set("id",e),o(),window.panel.show_content(),window.panel.animation_end()},success_error_handler:function(t){var n="";e.each(t,function(e,t){n+="<p>",n+=t.message,n+="</p>"}),a.addClass("alert-warning").show().html(n),window.panel.show_content(),window.panel.animation_end()},error_handler:function(){a.addClass("alert-warning").show().html(data),window.panel.show_content(),window.panel.animation_end()}})}),e(document).on("click",'[data-action="toggle-employers-search"]',function(){var t=e(this).parents(".panel").get(0),n=e(".panel-heading",t);e(this).toggleClass("active"),e("h6",n).toggle(),e(this).hasClass("active")?(e(".search .field",n).css({display:"inline-block"}),e(".search input",n).focus()):e(".search .field",n).hide()}),e(document).on("click",'[data-action="search-clear"]',function(){var t=e(this).parents(".field").get(0);e("input",t).val("").trigger("input")}),e(document).on("input",'[data-action="employers-search"]',function(){var t=e(this).parents(".panel").get(0),n=e(".employers-list > li",t),a=e(this).val().trim().toLowerCase();n.hide(),e.each(n,function(t,n){var i=e(n).attr("title").toLowerCase()||"";-1!==i.indexOf(a)&&e(n).show()})}),e("button.delete-employer").on("click",function(){var t=e(this).parents("li"),n=parseInt(t.attr("employer-id")),a=l;confirm("You really want to delete employer?")&&r.delete_model(n,a).then(function(){s.delete_model(t,a)})})})}(jQuery);
var fields={gaps:{type:"group",members:["gaps","card_gaps","card_margin"],field:{type:"size",limits:[0,10]}},card_width:{type:"percent",limits:[30,100]},photo_shape:{type:"radio",values:["square","round"]},photo_size:{type:"radio",values:["a-medium","a-thumbnail","a-small","custom"]},photo_width:{type:"size",limits:[50,100]},card_colors:{type:"group",members:["card_base_color","card_border_color","card_divider_color","card_shadow_color","card_even_row_color"],field:{group:"card",type:"color"}},text_colors:{type:"group",members:["name_color","position_color","short_bio_color","contacts_color","social_color"],field:{group:"text",type:"color"}},text_transforms:{type:"group",members:["name_text_transform","position_text_transform","short_bio_text_transform"],field:{type:"radio",values:["none","uppercase"]}},font_sizes:{type:"group",members:["name_font_size","position_font_size","short_bio_font_size"],field:{type:"size",limits:[12,20]}},bolds:{type:"group",members:["name_bold","position_bold","short_bio_bold"],field:{type:"boolean"}},italics:{type:"group",members:["name_italic","position_italic","short_bio_italic"],field:{type:"boolean"}},top_margins:{type:"group",members:["photo_top_margin","name_top_margin","position_top_margin","divider_top_margin","short_bio_top_margin","contacts_top_margin","social_top_margin"],field:{type:"size",limits:[0,15]}}},rules={grid:{exclude:[]},table:{exclude:["name_color","position_color","short_bio_color","social_color"]},widget:{exclude:["photo_size"]}},AwesomeRandom=function(){var e=this;e.number=function(e){if(!(e.length>2)){var o=e[0],r=e[1];return Math.floor(Math.random()*(r-o+1)+o)}},e["boolean"]=function(){return this.number([0,1])},e.size=function(e){return this.number(e)+"px"},e.percent=function(e){return this.number(e)+"%"},e.radio=function(e){return e.length<1?void 0:e[Math.floor(Math.random()*e.length)]},e.array=function(e){return _.shuffle(e)},e.color_delta=function(e,o){var r=parseInt(e)-o<0?0:parseInt(e)-o,t=parseInt(e)+o>255?255:parseInt(e)+o;return[r,t]},e.invert_color=function(e){var o=255^e[0],r=255^e[1],t=255^e[2];return[o,r,t]},e.black_or_white=function(e){var o=.2126*e[0]+.7152*e[1]+.0722*e[2];return o>=127?[0,0,0]:[255,255,255]},e.color=function(o){var r=[];null===o?(r[0]=[0,255],r[1]=[0,255],r[2]=[0,255]):(r[0]=e.color_delta(o[0],10),r[1]=e.color_delta(o[1],10),r[2]=e.color_delta(o[2],10));var t=Math.floor(this.number(r[0])),i=Math.floor(this.number(r[1])),a=Math.floor(this.number(r[2]));return[t,i,a]}},AwesomeModel=Backbone.NestedModel.extend({push:function(e,o){"undefined"==typeof this.get(e)&&this.set(e,[]);var r=_.clone(this.get(e));r.push(o),this.set(e,r)},unset_array:function(e,o){var r=_.clone(this.get(e));r.splice(o,1),this.set(e,r)},make_seed:function(e){var o=new AwesomeRandom,r=this,t=(e.rules,e.seed),i=e.fields,a=e.seed_card_color;return null===a&&(a=o.color(a)),$.each(i,function(e,i){if("group"==i.type){var s={};$.each(i.members,function(e,o){s[o]=i.field}),t=r.make_seed({fields:s,seed:t,seed_card_color:a})}else{var n=null;switch(i.type){case"number":n=o.number(i.limits);break;case"boolean":n=o["boolean"]();break;case"size":n=o.size(i.limits);break;case"percent":n=o.percent(i.limits);break;case"radio":n=o.radio(i.values);break;case"array":n=o.array(i.values);break;case"color":var l=null;if("card"==i.group){l="0."+o.number([0,99]);var c=o.color(a);n="rgba("+c.join(",")+","+l+")"}if("text"==i.group){if(l="0."+o.number([50,99]),null===a)return;var _=o.black_or_white(a);n="rgba("+_.join(",")+","+l+")"}}t[e]=n}}),t},random:function(){var e={},o={fields:fields,seed:e,seed_card_color:null},r=this.make_seed(o),t=model.get("layout"),i=model.get("styles."+t);$.each(i,function(e,o){$.inArray(e,rules[t].exclude)>-1||r.hasOwnProperty(e)&&model.set("styles."+t+"."+e,r[e])})}});
var Employer=Backbone.NestedModel.extend({}),Employers=Backbone.Collection.extend({model:Employer});window.ats_employers=new Employers,window.ats_employers_clone=new Employers;
var AwesomeSettings=function(){"use strict";var e=jQuery,t=this;t.bind_form=function(){var t=e.Deferred();return t.resolve(),t},t.destroy=function(){},t.init=function(){t.bind_form();var n=new AwesomeForm;n.init(settings_model),window.settings_form_view=new SettingsForm({model:window.settings_model}),settings_form_view.setElement(e("#settings-wrap",ats_panel)),settings_form_view.render(),e("select",ats_panel).fsdropdown()}};
!function(i){SettingsForm=Backbone.View.extend({bindings:function(){var i={};return i['[name="settings_capabilities"]']="capabilities",i},render:function(){return this.stickit(),this},close:function(){this.unstickit()}})}(jQuery);
var AwesomeTeam=function(){"use strict";var e=jQuery,t=this,o='<p class="hint">Notice: style settings for Skype, Phone, Email, Website and Location are common for all these fields.</p>';t.preview=e(".team-preview",ats_panel),t.employers_panel="#panel-employers",t.layout=model.get("layout"),t.colorpickers=["button","button_hover","button_text","button_text_hover","base","panel","card_base","card_border","divider","card_shadow","card_even_row","name","position","short_bio","contacts","social","skills_bar","skills_text"],t.tooltips={photo:{type:"photo",hint:""},name:{type:"font",hint:""},position:{type:"font",hint:""},short_bio:{type:"font",hint:""},divider:{type:"divider",hint:""},social:{type:"social",hint:""},contacts:{type:"font",hint:o},skills:{type:"skills",hint:""}},t.labels={grid:{name:"Card",card_divider_color:"Divider"},table:{name:"Row",card_divider_color:"Separators"},widget:{name:"Widget",card_divider_color:"Separators"}},t.show_fields=function(){var o=e.Deferred(),a=model.get("styles."+model.get("layout")+".blocks_order");return"grid"==model.get("layout")&&-1==e.inArray("body",a)&&a.push("body"),e(".team-blocks-visibility .visible").hide(),e.each(a,function(t,o){e("."+o+"_visible").show()}),a=model.get("styles."+model.get("layout")),e("#team-form .model-field").hide(),e.each(a,function(o,a){e("#team-form ."+o).show(),o in t.labels[model.get("layout")]&&e("#team-form ."+o+" .input-group-addon",ats_panel).eq(0).html(t.labels[model.get("layout")][o])}),e(".interface-styling").show(),e("h5.card-label",ats_panel).html(t.labels[model.get("layout")].name+" settings"),e("h5.layout-label",ats_panel).show(),"grid"!=model.get("layout")&&e("h5.layout-label",ats_panel).hide(),"widget"==model.get("layout")&&e(".interface-styling").hide(),e(".empty-model .hint").html("Add at least one employee from the main plugins' screen."),o.resolve(),o},t.insert_preview_html=function(){var e=model.get("layout"),o=model.get(e+"_html");t.preview.html(o)},t.bind_form=function(){var t=e.Deferred();return e(".team-align .btn",ats_panel).on("click",function(t){t.preventDefault();var o=e(this),a=o.parent(".btn-group"),i=o.find("input"),l=i.attr("data-value"),n="styles."+model.get("layout")+".align";a.find(".btn").removeClass("active"),model.set(n,l),o.addClass("active")}),e(".toggle",ats_panel).on("click",function(t){t.preventDefault();var o=e(this),a=o.find("input"),i=o.attr("data-group")||"",l=a.attr("name").split("team_"+i+"_").join("");if("styles"==i)var n=i+"."+model.get("layout")+"."+l;else var n=i+"."+l;a.prop("checked","checked"),1==a.attr("data-checked")?(model.set(n,"0"),a.val("0"),a.attr("data-checked","0")):(model.set(n,"1"),a.val("1"),a.attr("data-checked","1"))}),e(".panel-collapse-team .panel-heading").on("click",function(){var t=e(this).hasClass("a-collapse-head-open");if(t)return!1;var o=e(this).parents(".panel-collapse-team").eq(0);e(".panel-body",o).addClass("a-collapse"),e(".panel-heading",o).removeClass("a-collapse-head-open"),e(this).next(".panel-body").removeClass("a-collapse"),e(this).toggleClass("a-collapse-head-open")}),window.team_form_view=new TeamForm({model:window.model}),team_form_view.setElement(e("#team-form",ats_panel)),team_form_view.render(),t.resolve(),t},t.bind_preview=function(){var t=e.Deferred();return window.preview_view=new TeamPreview({model:window.model}),preview_view.setElement(e("#team-form",ats_panel)),preview_view.render(),t.resolve(),t},t.init_sortable_fields=function(){var o=e.Deferred(),a="table"==model.get("layout")?"x":"y",i=t.preview.find("ul li .sortable-box");return i.sortable({axis:a,forcePlaceholderSize:!0,forceHelperSize:!0,placeholder:"preview-placeholder",helper:function(t,o){var a=e(o).clone(),i=e("<div></div>");return a.css("display","table-cell"),i.css("display","table"),i.css("vertical-align","middle"),i.append(a),i.css("margin-top",e(o).css("margin-top")),i.css("width","100%"),i},start:function(e,t){t.placeholder.height(t.helper.height()),t.placeholder.width(t.helper.width()),t.placeholder.css("margin-top",t.helper.css("margin-top"))},update:function(t,o){var a=i.find(".sortable"),l=[];e.each(a,function(){var t=e(this).attr("data-block-name");l.push(t)}),e('[name="team_blocks_order"]',ats_panel).val(JSON.stringify(l)),model.set("styles."+model.get("layout")+".blocks_order",l)}}),o.resolve(),o},t.set_rgba_color=function(e,t){var o="styles."+model.get("layout")+".",a=t.toRGB();t="rgba("+a.r+","+a.g+","+a.b+","+a.a+")",model.set(o+e,t)},t.init_colorpicker=function(){var o=e.Deferred();return e.each(t.colorpickers,function(o,a){var i=e("."+a+"_color",ats_panel),l="colorpicker_"+a+"_color";window[l]=i.colorpicker({container:e("."+a+"_color .color",ats_panel)}).on("changeColor.colorpicker",function(e){t.set_rgba_color(a+"_color",e.color)})}),o},t.bind_tooltips=function(){e(".team-photo-settings select",ats_panel).on("change",function(){var t=e(this).attr("data-field"),o=e(this).val();model.set("styles."+model.get("layout")+"."+t,o)}),e('.team-photo-settings [name="team_photo_size_select"]',ats_panel).on("change",function(){var t=e(this).val(),o=model.get("layout");e(".employer_photo img",ats_panel);return"grid"!=o?!1:void e('[name="team_photo_size"]',ats_panel).val(t)}),e(".btn-group-radio .btn",ats_panel).on("click",function(t){t.preventDefault();var o=e(this),a=o.attr("data-model-node")||"",i=o.parent(".btn-group"),l=o.find("input"),n=l.attr("data-value"),r=i.attr("data-field-name");"root"==a&&(r=r),"form"==a&&(r=a+"."+r),""==a&&(r="styles."+model.get("layout")+"."+r);var s=o.attr("data-option-name");l.prop("checked","checked"),l.val(n),i.find(".btn").removeClass("active"),model.set(r+"_"+s,n),o.addClass("active")}),e(".btn-group-checkbox .btn",ats_panel).on("click",function(t){t.preventDefault();var o=e(this),a=o.find("input"),i=a.attr("name").split("team_").join("");i="styles."+model.get("layout")+"."+i,1==parseInt(a.val())?(model.set(i,"0"),a.val("0"),o.removeClass("active")):(model.set(i,"1"),a.val("1"),o.addClass("active"))}),e('[data-action="call-tooltip"]',ats_panel).on("click",function(t){t.preventDefault();var o=(e(this),e(this).parent().attr("data-tooltip-name")),a=e('[data-field="'+o+'"]',ats_panel);e(".a-tooltip-wrapper",ats_panel).css("visibility","hidden").css("opacity",0),a.css("visibility","visible").css("opacity",1)}),e(document).on("click",function(t){if("undefined"!=typeof ats_panel&&!e(t.target).parents(".a-tooltip-wrapper").length&&!e(t.target).is('[data-action="call-tooltip"]')&&!e(t.target).parents("button").is('[data-action="call-tooltip"]')){var o=e(".live-preview .a-tooltip-wrapper",ats_panel);o.is(":visible")&&o.css("visibility","hidden").css("opacity",0)}}),e.each(t.tooltips,function(t,o){var a="TeamTooltip"+o.type.capitalize(),i="view_tooltip_"+t;window[i]=new window[a]({model:window.model,el:e("."+t+"_settings",ats_panel),field_name:t}),window[i].render()})},t.init_tooltips=function(){var o=e.Deferred();return e.each(t.tooltips,function(t,o){var a={key:t,width:o.width,viewport:".a-slide-panel",direction:"bottom",container:e("#team-tooltips",ats_panel),content:"#team-"+o.type+"-settings",data:{field_name:t,hint:o.hint}};window[t+"_tooltip"]=new AwesomeTooltip(a),window[t+"_tooltip"].init()}),t.bind_tooltips(),o.resolve(),o},t.init_help=function(){var t=e.Deferred(),o=e("#preview-help").clone().removeAttr("id").attr("panel","preview-help").css({zIndex:4});return e("#team-form .col-md-4").append(o.addClass("at-transition")),t.resolve(),t},t.destroy_colorpickers=function(){e.each(t.colorpickers,function(e,t){var o="colorpicker_"+t+"_color";delete window[o]})},t.destroy=function(){e(".toggle").off(),e("select",ats_panel).fsdropdown("destroy"),e("#team-tooltips",ats_panel).html(""),preview_view.close(),team_form_view.close(),e.each(t.tooltips,function(e,t){window["view_tooltip_"+e].close()}),e.each(t.tooltips,function(e,t){window[e+"_tooltip"].destroy()})},t.reinit=function(){var e=new AwesomeForm;e.init(model),t.show_fields(),t.bind_preview(),t.init_sortable_fields()},t.init=function(){var o=new AwesomeForm,a=o.init(model),i=t.show_fields(),l=t.bind_form(),n=t.bind_preview(),r=t.init_tooltips(),s=t.init_sortable_fields(),d=e.Deferred();return e.when(a,i,l,n,r,s).then(function(){t.init_colorpicker(),e("select",ats_panel).fsdropdown(),d.resolve()}),d}};
!function(e){TeamForm=Backbone.View.extend({bindings:function(){var t={},s=model.get("layout"),a=function(t,s,a,l){if("1"==s){if("styles"==a)var _=a+"."+model.get("layout")+"."+l;else var _=a+"."+l;e('[name="group_'+a+"_"+l+'"]',ats_panel).attr("data-checked","0"),model.set(_,"0"),t.val("1"),t.attr("data-checked","1")}},l=function(e,t,s,a){e.find(".btn").removeClass("active"),e.find("input").val(t);var l=a.observe.split(".");e.find("."+l.last()+"_"+t).addClass("active")};return t['[name="team_name"]']="name",t['[name="team_title"]']="title",t['[name="team_description"]']="description",t['[name="team_custom_css"]']="custom_css",t['[name="team_order_by"]']="order_by",t['[name="team_order_direction"]']="order_direction",t['[name="team_employers"]']={observe:"employers_ids",update:function(t,s,a,l){var _=e(".employers-list .panel-heading .count",ats_panel),o=ats_employers_clone.length;_.html(""),o>0&&_.html("("+o+")")}},t['[name="team_styles_slider"]']={observe:"styles."+s+".slider",update:function(t,s,l,_){a(t,s,"styles","filter"),e(".slider-options",ats_panel).hide(),"1"==s&&e(".slider-options",ats_panel).show()}},t['[name="team_styles_filter"]']={observe:"styles."+s+".filter",update:function(e,t,s,l){a(e,t,"styles","slider")}},t['[name="team_styles_panel"]']={observe:"styles."+s+".panel",update:function(t,s,a,l){console.log(s),"0"==s?e(".panel-styling",ats_panel).hide():e(".panel-styling",ats_panel).show()}},t[".order-direction"]={observe:"order_direction",update:l.bind(this)},t['[name="team_styles_panel_theme"]']="styles."+s+".panel_theme",t['[name="team_styles_panel_contacts_visible"]']="styles."+s+".panel_contacts_visible",t['[name="team_styles_panel_social_visible"]']="styles."+s+".panel_social_visible",t['[name="team_styles_panel_color"]']="styles."+s+".panel_color",t['[name="team_styles_panel_animation"]']="styles."+s+".panel_animation",t['[name="team_styles_slider_autoplay"]']="styles."+s+".slider_autoplay",t['[name="team_styles_slider_autoplay_speed"]']="styles."+s+".slider_autoplay_speed",t['[name="team_styles_button_color"]']="styles."+s+".button_color",t['[name="team_styles_button_hover_color"]']="styles."+s+".button_hover_color",t['[name="team_styles_button_text_color"]']="styles."+s+".button_text_color",t['[name="team_styles_button_text_hover_color"]']="styles."+s+".button_text_hover_color",t['[name="team_styles_filter_font_size"]']="styles."+s+".filter_font_size",t['[name="team_styles_filter_bold"]']="styles."+s+".filter_bold",t['[name="team_styles_filter_italic"]']="styles."+s+".filter_italic",t['[name="team_styles_filter_text_transform"]']="styles."+s+".filter_text_transform",t['[name="team_styles_search"]']="styles."+s+".search",t['[name="team_styles_reveal"]']="styles."+s+".reveal",t['[name="team_styles_hover"]']="styles."+s+".hover",t['[name="team_styles_card_width"]']="styles."+s+".card_width",t['[name="team_styles_gaps"]']="styles."+s+".gaps",t['[name="team_styles_card_gaps"]']="styles."+s+".card_gaps",t['[name="team_styles_card_margin"]']="styles."+s+".card_margin",t['[name="team_styles_align"]']="styles."+s+".align",t['[name="team_styles_base_color"]']="styles."+s+".base_color",t['[name="team_styles_card_base_color"]']="styles."+s+".card_base_color",t['[name="team_styles_card_border_color"]']="styles."+s+".card_border_color",t['[name="team_styles_card_shadow_color"]']="styles."+s+".card_shadow_color",t['[name="team_styles_card_even_row_color"]']="styles."+s+".card_even_row_color",t['[name="team_styles_photo_visible"]']="styles."+s+".photo_visible",t['[name="team_styles_name_visible"]']="styles."+s+".name_visible",t['[name="team_styles_position_visible"]']="styles."+s+".position_visible",t['[name="team_styles_short_bio_visible"]']="styles."+s+".short_bio_visible",t['[name="team_styles_body_visible"]']="styles."+s+".body_visible",t},render:function(){return this.stickit(),this},close:function(){this.unstickit()}})}(jQuery);
!function(s){var t=function(s,t,o,i){s.toggle(!!+t)},o=function(o,i,e,a){var n=e.get("layout"),c=s(".photo_width"),l=s(".photo_top_margin"),r={"a-full":"100%"};t(o,i[0],e,a);var _=(o.find(".photo-wrapper"),o.find(".photo-shape")),d=o.find(".photo-container");c.hide(),"round"==i[1]&&_.addClass("ats-round"),"square"==i[1]&&_.removeClass("ats-round"),"grid"==n&&("a-full"==i[2]&&(o.css("margin","0"),_.css("width",r[i[2]]),d.css("width",r[i[2]]),d.css("padding-bottom",r[i[2]]),l.hide()),"custom"==i[2]&&(o.css("margin-top",AwesomeUtil.calc_size(i[4])),_.css("width",AwesomeUtil.calc_size(i[3])),c.show(),l.show())),"table"==n&&(o.css("width",AwesomeUtil.calc_size(i[3])),_.css("width",AwesomeUtil.calc_size(i[3])),d.css("width",AwesomeUtil.calc_size(i[3])),d.css("padding-bottom",AwesomeUtil.calc_size(i[3])),c.show()),"widget"==n&&(_.css("width",AwesomeUtil.calc_size(i[3])),_.css("min-width",AwesomeUtil.calc_size(i[3])),d.css("width",AwesomeUtil.calc_size(i[3])),d.css("padding-bottom",AwesomeUtil.calc_size(i[3])),c.show())},i=function(s,o,i,e){e.selector.replace_all(".employer_","")+"_color";t(s,o[0],i,e);var a=s.find(".team-field-content");a.css("font-weight","normal"),a.css("font-style","normal"),s.find(".font-style .btn").removeClass("active"),a.css("font-size",o[1]),a.css("color",o[2]),+o[3]&&(s.find('[data-option-name="bold"]').addClass("active"),a.css("font-weight","bold")),+o[4]&&(s.find('[data-option-name="italic"]').addClass("active"),a.css("font-style","italic")),a.css("text-transform",o[5]),a.css("text-align",o[6]),s.css("margin-top",AwesomeUtil.calc_size(o[7]))},e=function(s,t,o,i){s.css("background-color",t),s.css("border","1px solid "+o),""!==i&&(s.css("-webkit-box-shadow","0 0 5px 0 "+i),s.css("-moz-box-shadow","0 0 5px 0 "+i),s.css("box-shadow","0 0 5px 0 "+i))};TeamPreview=Backbone.View.extend({initialize:function(s){_.bindAll(this,"before_render","render","after_render");var t=this;this.render=_.wrap(this.render,function(s){return t.before_render(),s(),t.after_render(),t})},bindings:function(){var a={},n=model.get("layout"),c="styles."+n+".";return a["#team-preview .ats-layout"]={observe:c+"hover",update:function(s,t,o,i){"off"==t?s.attr("class","ats-layout-"+o.get("layout")+" ats-layout "):s.attr("class","ats-layout-"+o.get("layout")+" ats-layout ats-effect-"+t)}},a["#team-preview ul.employers-box"]={observe:[c+"gaps",c+"base_color",c+"align"],update:function(s,t,o,i){"grid"==o.get("layout")&&(s.css("background-color",t[1]),s.css("text-align",t[2]))}},a["#team-preview ul.employers-box > li > div"]={observe:[c+"card_base_color",c+"card_border_color",c+"card_shadow_color",c+"card_gaps",c+"body_visible"],update:function(s,t,o,i){s.parent("li").css("padding","0"),"grid"==o.get("layout")?(+t[4]?e(s,t[0],t[1],t[2]):(s.css("background-color","transparent"),s.css("border","none"),s.css("-webkit-box-shadow","none"),s.css("-moz-box-shadow","none"),s.css("box-shadow","none")),"a-full"==o.get("styles.grid.photo_size")&&s.css("padding","0")):(s.css("border-top-color",t[1]),s.css("border-bottom-color",t[1]))}},a[".employer_divider"]={observe:[c+"divider_visible",c+"divider_color",c+"divider_width",c+"divider_top_margin"],update:function(s,o,i,e){"grid"==i.get("layout")&&(t(s,o[0],i,e),s.find("span").css("background-color",o[1]),s.find("span").css("width",AwesomeUtil.calc_size(o[2])),s.css("margin-top",AwesomeUtil.calc_size(o[3])))}},a[".card_margin"]={observe:c+"slider",update:function(s,t,o,i){s.hide(),0===t&&"grid"==o.get("layout")&&s.show()}},a[".team-align"]={observe:c+"align",update:function(s,t,o,i){s.find(".btn").removeClass("active"),s.find(".align-"+t).addClass("active")}},a[".employer_photo"]={observe:[c+"photo_visible",c+"photo_shape",c+"photo_size",c+"photo_width",c+"photo_top_margin"],update:o},a[".employer_name"]={observe:[c+"name_visible",c+"name_font_size",c+"name_color",c+"name_bold",c+"name_italic",c+"name_text_transform",c+"name_align",c+"name_top_margin"],update:i},a[".employer_position"]={observe:[c+"position_visible",c+"position_font_size",c+"position_color",c+"position_bold",c+"position_italic",c+"position_text_transform",c+"position_align",c+"position_top_margin"],update:i},a[".employer_short_bio"]={observe:[c+"short_bio_visible",c+"short_bio_font_size",c+"short_bio_color",c+"short_bio_bold",c+"short_bio_italic",c+"short_bio_text_transform",c+"short_bio_align",c+"short_bio_top_margin"],update:i},a[".employer_phone"]={observe:[c+"phone_visible",c+"contacts_font_size",c+"contacts_color",c+"contacts_bold",c+"contacts_italic",c+"contacts_text_transform",c+"contacts_align",c+"contacts_top_margin"],update:i},a[".employer_email"]={observe:[c+"email_visible",c+"contacts_font_size",c+"contacts_color",c+"contacts_bold",c+"contacts_italic",c+"contacts_text_transform",c+"contacts_align",c+"contacts_top_margin"],update:i},a[".employer_skype"]={observe:[c+"skype_visible",c+"contacts_font_size",c+"contacts_color",c+"contacts_bold",c+"contacts_italic",c+"contacts_text_transform",c+"contacts_align",c+"contacts_top_margin"],update:i},a[".employer_link"]={observe:[c+"link_visible",c+"contacts_font_size",c+"contacts_color",c+"contacts_bold",c+"contacts_italic",c+"contacts_text_transform",c+"contacts_align",c+"contacts_top_margin"],update:i},a[".employer_location"]={observe:[c+"location_visible",c+"contacts_font_size",c+"contacts_color",c+"contacts_bold",c+"contacts_italic",c+"contacts_text_transform",c+"contacts_align",c+"contacts_top_margin"],update:i},a[".employer_social"]={observe:[c+"social_visible",c+"social_color",c+"social_size",c+"social_top_margin",c+"social_align"],update:function(s,o,i,e){t(s,o[0],i,e),s.css("color",o[1]),s.css("font-size",o[2]),s.css("margin-top",AwesomeUtil.calc_size(o[3])),s.css("text-align",o[4]),s.css("font-size","initial");var a=s.outerWidth(),n=a/6-5;s.css("font-size",AwesomeUtil.clean_number(o[2])>n?n:o[2])}},a[".employer_skills"]={observe:[c+"skills_visible",c+"skills_font_size",c+"skills_text_color",c+"skills_bold",c+"skills_italic",c+"skills_text_transform",c+"skills_align",c+"skills_top_margin"],update:i},a[".employer_skills ul"]={observe:[c+"skills_size",c+"skills_bar_color",c+"skills_type"],update:function(t,o,i,e){if(t.find("span.value").css("height",o[0]),t.find("svg").css("width",o[0]),t.find("svg").css("height",o[0]),t.find("span.value").css("background-color",o[1]),t.find("svg").css("color",o[1]),t.find(".skill-value").css("width","100%"),t.find(".skill-value").attr("class","skill-value skill-value-"+o[2]),"star"==o[2]){var a=o[0].replace(/\D+/g,"");t.find(".skill-value").css("width",AwesomeUtil.calc_size(5*a+"")),t.find(".star-fill").css("width",AwesomeUtil.calc_size(4*a+""))}t.find(".skill-value > div").hide(),t.find(".skill-value .skills-"+o[2]).show(),t.find(".skill-value-star").css("max-width","100%");var n=t.find(".star-background").outerWidth();n=10*Math.round(n/10),t.find(".skill-value-star").css("max-width",n),t.find(".star-fill").css("max-width",.8*n);var c=t.find(".star-background > *").outerWidth();t.find(".star-background > *").each(function(t,o){s(o).css("max-height",c)}),t.find(".star-fill > *").each(function(t,o){s(o).css("max-width",c),s(o).css("max-height",c)})}},a},before_render:function(){var s='<button data-action="call-tooltip">            <svg class="icon" viewBox="0 0 28 28">            <use xlink:href="#icon-pen"></use>            </svg>            </button>';this.$el.find("#team-preview .grid-container").append(s)},render:function(){return preview.insert_preview_html(),this.stickit(),this},after_render:function(){},close:function(){this.unstickit()}})}(jQuery);
!function(e){TeamTooltipPhoto=Backbone.View.extend({initialize:function(i){var t=model.get("layout");this.options=i,_.bindAll(this,"bindings");var n="styles."+t+".";e('#a-slide-panel [name="team_'+this.options.field_name+'_size_select"]').val(model.get(n+"photo_size")).fsdropdown("update"),"a-full"==model.get(n+"photo_size")&&(e("#a-slide-panel ."+this.options.field_name+"_width").hide(),e("#a-slide-panel ."+this.options.field_name+"_top_margin").hide())},bindings:function(){var e=model.get("layout"),i={},t=this.options.field_name,n="styles."+e+"."+t;return i['[name="team_'+t+'_shape"]']=n+"_shape",i['[name="team_'+t+'_size"]']=n+"_size",i['[name="team_'+t+'_width"]']=n+"_width",i['[name="team_'+t+'_top_margin"]']=n+"_top_margin",i[".btn-group-photo-shape"]={observe:n+"_shape",update:function(e,i,t,n){e.find(".btn").removeClass("active"),e.find("input").val(i),e.find("."+this.options.field_name+"_shape_"+i).addClass("active")}},i},render:function(){return this.stickit(),this},close:function(){this.unstickit()}})}(jQuery);
var $=jQuery,TeamTooltipFont=Backbone.View.extend({initialize:function(t){this.options=t,_.bindAll(this,"bindings")},bindings:function(){var t={},n=model.get("layout"),i=this.options.field_name,e="styles."+n+"."+i;return t['[name="team_'+i+'_font_size"]']=e+"_font_size",t['[name="team_'+i+'_color"]']=e+"_color",t['[name="team_'+i+'_bold"]']=e+"_bold",t['[name="team_'+i+'_italic"]']=e+"_italic",t['[name="team_'+i+'_text_transform"]']=e+"_text_transform",t['[name="team_'+i+'_align"]']=e+"_align",t['[name="team_'+i+'_top_margin"]']=e+"_top_margin",t[".btn-group-align"]={observe:e+"_align",update:function(t,n,i,e){t.find(".btn").removeClass("active"),t.find("input").val(n),t.find("."+this.options.field_name+"_align_"+n).addClass("active")}},t[".btn-bold"]={observe:e+"_bold",update:function(t,n,i,e){t.find(".btn").removeClass("active"),+n&&t.addClass("active")}},t[".btn-italic"]={observe:e+"_italic",update:function(t,n,i,e){t.find(".btn").removeClass("active"),+n&&t.addClass("active")}},t[".btn-group-text-transform"]={observe:e+"_text_transform",update:function(t,n,i,e){t.find(".btn").removeClass("active"),t.find("input").val(n),t.find("."+this.options.field_name+"_text_transform_"+n).addClass("active")}},t},render:function(){return this.stickit(),this},close:function(){this.unstickit()}});
var $=jQuery,TeamTooltipDivider=Backbone.View.extend({initialize:function(i){model.get("layout");this.options=i,_.bindAll(this,"bindings")},bindings:function(){var i=model.get("layout"),t={},n=this.options.field_name,e="styles."+i+"."+n;return t['[name="team_'+n+'_color"]']=e+"_color",t['[name="team_'+n+'_width"]']=e+"_width",t['[name="team_'+n+'_top_margin"]']=e+"_top_margin",t},render:function(){return this.stickit(),this},close:function(){this.unstickit()}});
var $=jQuery,TeamTooltipSocial=Backbone.View.extend({initialize:function(i){model.get("layout");this.options=i,_.bindAll(this,"bindings")},bindings:function(){var i=model.get("layout"),n={},t=this.options.field_name,e="styles."+i+"."+t;return n['[name="team_'+t+'_color"]']=e+"_color",n['[name="team_'+t+'_size"]']=e+"_size",n['[name="team_'+t+'_align"]']=e+"_align",n['[name="team_'+t+'_top_margin"]']=e+"_top_margin",n[".btn-group-align"]={observe:e+"_align",update:function(i,n,t,e){i.find(".btn").removeClass("active"),i.find("input").val(n),i.find("."+this.options.field_name+"_align_"+n).addClass("active")}},n},render:function(){return this.stickit(),this},close:function(){this.unstickit()}});
var $=jQuery,TeamTooltipSkills=Backbone.View.extend({initialize:function(t){model.get("layout");this.options=t,_.bindAll(this,"bindings")},bindings:function(){var t=model.get("layout"),e={},n=this.options.field_name,i="styles."+t+"."+n;return e['[name="team_'+n+'_text_color"]']=i+"_text_color",e['[name="team_'+n+'_bar_color"]']=i+"_bar_color",e['[name="team_'+n+'_font_size"]']=i+"_font_size",e['[name="team_'+n+'_size"]']=i+"_size",e['[name="team_'+n+'_type"]']=i+"_type",e['[name="team_'+n+'_bold"]']=i+"_bold",e['[name="team_'+n+'_italic"]']=i+"_italic",e['[name="team_'+n+'_text_transform"]']=i+"_text_transform",e['[name="team_'+n+'_align"]']=i+"_align",e['[name="team_'+n+'_top_margin"]']=i+"_top_margin",e[".btn-bold"]={observe:i+"_bold",update:function(t,e,n,i){t.find(".btn").removeClass("active"),+e&&t.addClass("active")}},e[".btn-italic"]={observe:i+"_italic",update:function(t,e,n,i){t.find(".btn").removeClass("active"),+e&&t.addClass("active")}},e[".btn-group-text-transform"]={observe:i+"_text_transform",update:function(t,e,n,i){t.find(".btn").removeClass("active"),t.find("input").val(e),t.find("."+this.options.field_name+"_text_transform_"+e).addClass("active")}},e[".btn-group-align"]={observe:i+"_align",update:function(t,e,n,i){t.find(".btn").removeClass("active"),t.find("input").val(e),t.find("."+this.options.field_name+"_align_"+e).addClass("active")}},e[".btn-group-type"]={observe:i+"_type",update:function(t,e,n,i){t.find(".btn").removeClass("active"),t.find("input").val(e),t.find("."+this.options.field_name+"_type_"+e).addClass("active")}},e},render:function(){return this.stickit(),this},close:function(){this.unstickit()}});
var file_frame,AwesomeEmployer=function(){"use strict";var l=new ATS_Animation,e=jQuery,i=this;i.bind_form=function(){var l=e.Deferred();return e(document).on("click",'[data-action="upload_photo"]',function(l){l.preventDefault();var i,t;return file_frame?void file_frame.open():(file_frame=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1}),file_frame.on("insert",function(){var l=e(this).parents(".foto-upload");if(i=file_frame.state().get("selection").first().toJSON(),!(0>e.trim(i.url.length))){t=i.sizes["a-thumbnail"]?i.sizes["a-thumbnail"].url:i.url;var s=e('<img src="'+t+'"/>');l.find('[name="employer_thumbnail_id"]').val(i.id),model.set("custom_fields.thumbnail_id",i.id),e(".foto-wrapper",ats_panel).html("").append(s),e("#employer-form-foto-remove",ats_panel).show(),file_frame.close()}}),file_frame.open(),!1)}),e(document).on("click",'[data-action="remove_photo"]',function(l){l.preventDefault(),e('[name="employer_thumbnail_id"]',ats_panel).val(""),e("#employer-form-foto",ats_panel).html(""),window.model.set("custom_fields.thumbnail_id",""),e(this).hide()}),l.resolve(),l},i.update_skill_order=function(){var l=(model.get("custom_fields.skills"),_.map(e(".skills-list li"),function(l){return parseInt(e(l).attr("id").replace_all("skill-",""))}));model.set("custom_fields.skills_order",l)},i.make_skill=function(l){var i=e('[name="employer_skill_name"]',l),t=e('.skill-value-percent [name="employer_skill_value"]',l).val(),s=e('[data-type="skill-alert"]',l);if(s.attr("class","alert").hide(),""==i.val())return s.addClass("alert-warning").show().html("Skill name can't be empty."),!1;var a={name:i.val(),value:t};return a},i.bind_skills=function(){e(".panel-skills").on("click",'[data-action="add-skill"]',function(){var l=e('[data-form="add-skill"]',ats_panel),t=i.make_skill(l);if(t){var s=model.get("custom_fields.skills")||[];model.push("custom_fields.skills_order",s.length),e('[name="employer_skill_name"]',l).val(""),model.push("custom_fields.skills",t)}}),e(".skills-list").on("click",'[data-action="edit-skill"]',function(){var l=e(this).parents("li"),i=l.attr("id").replace_all("skill-","");employer_form_view.edit_skill(i)}),e(".skills-list").on("click",'[data-action="cancel-skill-edit"]',function(){e(".skills-list .skill-inline-form",ats_panel).remove(),e(".skills-list li.skill .skill-box").show()}),e(".skills-list").on("click",'[data-action="save-skill"]',function(){var l=e(this).parents('[data-form="edit-skill"]'),t=e(this).parents("li.skill").attr("id").replace_all("skill-",""),s=model.get("custom_fields.skills"),a=i.make_skill(l),n=e(this).find(".a-spinner"),o=e(this).find(".text");a&&(o.css("visibility","hidden"),n.show(),s[t]=a,model.set("custom_fields.skills",s),setTimeout(function(){n.hide(),o.css("visibility","visible")},900))}),e(".skills-list").on("click",'[data-action="delete-skill"]',function(){var i=e(this).parents("li"),t=i.attr("id").replace_all("skill-",""),s=model.get("custom_fields.skills_order");l["delete"](i).done(function(){var l=_.filter(s,function(l){return l!=t});l=_.map(l,function(l){return l=parseInt(l),l>t?l-1:l}),model.set("custom_fields.skills_order",l),model.unset_array("custom_fields.skills",t)})}),e(".panel-skills").on("input",'input[name="employer_skill_value"]',function(l){var i=e(this).val();i=i.replace(/\D+/g,""),i=parseInt(i)>100?100:i,e(this).val(i)}),e(".skills-list").sortable({axis:"y",containment:"parent",forceHelperSize:!0,forcePlaceholderSize:!0,helper:"clone",update:function(l,e){i.update_skill_order()}})},i.destroy=function(){e(".panel-skills").off("click",'[data-action="add-skill"]'),e(".skills-list").off("click",'[data-action="save-skill"]'),e(".skills-list").off("click",'[data-action="edit-skill"]'),e(".skills-list").off("click",'[data-action="delete-skill"]'),e(".skills-list").off("click",'[data-action="cancel-skill-edit"]')},i.init=function(){i.bind_form(),i.bind_skills();var l=new AwesomeForm;l.init(model),window.employer_form_view=new EmployerForm({model:window.model}),employer_form_view.setElement(e("#employer-form",ats_panel)),employer_form_view.render()}};
!function(e){EmployerForm=Backbone.View.extend({defaults:{skill:{star_options:[{value:"1",label:"One"},{value:"2",label:"Two"},{value:"3",label:"Three"},{value:"4",label:"Four"},{value:"5",label:"Five"}]}},template:{skill:{add:{body:_.template('                    <div class="input-group form-group">                        <div class="display-table">                            <div class="display-table-cell name">                                <div class="input-group form-group">                                    <span class="input-group-addon">Skill:</span>                                    <input type="text" class="form-control" name="employer_skill_name" placeholder="e.g. Photoshop" value="<%= name %>">                                </div>                            </div>                            <div class="display-table-cell value">                                <%= value %>                            </div>                        </div>                        <div data-type="skill-alert" class="skill-alert"></div>                        <div class="buttons">                            <%= buttons %>                        </div>                    </div>                    '),type:_.template('                    <div class="btn-group filter_text_transform btn-group-text-transform btn-group-radio model-field" data-field-name="skill_type">                        <label type="button" class="btn btn-default <% if(percent_active){ %> active <% } %> skill_type" data-option-name="skill_type">                            <input type="radio" style="display: none;" name="employer_skill_type" checked data-value="percent" />                            <svg class="icon icon-percent" viewBox="0 0 320 320">                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-percent"></use>                            </svg>                        </label>                        <label type="button" class="btn btn-default <% if(star_active){ %> active <% } %> skill_type" data-option-name="skill_type">                            <input type="radio" style="display: none;" name="employer_skill_type" data-value="star"/>                            <svg class="icon icon-star" viewBox="0 0 1024 1024">                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-star-full"></use>                            </svg>                        </label>                    </div>'),value:_.template('                        <div class="input-group model-field skill-value-percent">                            <span class="input-group-addon">% of 100:</span>                            <input type="text" class="form-control" name="employer_skill_value" placeholder="" value="<%= value %>"/>                        </div>'),buttons:{add:_.template('                        <button class="btn btn-default" type="button" data-action="add-skill">                            Add Skill                        </button>'),edit:_.template('                        <button class="btn btn-sm btn-default" type="button" data-action="save-skill">                            <div class="a-slide-panel-spinner a-spinner" data-wr_replaced="true"  style="display: none;">                                <div class="bounce1"></div>                                <div class="bounce2"></div>                                <div class="bounce3"></div>                            </div>                            <span class="text">Save Skill</span>                        </button>                        <button class="btn btn-sm btn-default" type="button" data-action="cancel-skill-edit">                            Cancel                        </button>')}},body:_.template('                <li id="skill-<%= id %>" class="skill">                    <div class="skill-box">                    <%= value %>                    <%= name %>                        <span class="actions">                            <button class="svg" data-action="edit-skill" title="Edit skill">                                <svg class="icon" viewBox="0 0 28 28">                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-pen"></use>                                </svg>                            </button>                            <button class="svg" data-action="delete-skill" title="Delete skill">                                <svg class="icon" viewBox="0 0 28 28">                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-trash"></use>                                </svg>                            </button>                        </span>                    </div>                </li>'),value:_.template('<span class="value"><%= value %></span>'),star:'<svg class="icon icon-star" viewBox="0 0 1024 1024">                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-star-full"></use>                </svg>',name:_.template('<span class="name"><%= name %></span>')}},initialize:function(){var l=this.template.skill.add.value({value:0}),t=this.template.skill.add.buttons.add(),a=this.template.skill.add.body({name:"",value:l,buttons:t});e(".skill-form",ats_panel).html(a),e('select[name="employer_skill_value"]',ats_panel).fsdropdown()},edit_skill:function(l){var t=model.get("custom_fields.skills"),a=t[l],s=this.template.skill.add.value({value:"percent"==a.type?a.value:""}),i=this.template.skill.add.buttons.edit(),n=this.template.skill.add.body({name:a.name,value:s,buttons:i}),n=e('<div class="skill-form skill-inline-form" data-form="edit-skill">'+n+"</div>");e(".skills-list .skill-inline-form",ats_panel).remove(),e(".skills-list li.skill .skill-box").show(),e(".skills-list li#skill-"+l+" .skill-box").hide();var o="star"==a.type?a.value:1;e(".skills-list li#skill-"+l,ats_panel).prepend(n),e('select[name="employer_skill_value"]',ats_panel).val(o),e('select[name="employer_skill_value"]',ats_panel).fsdropdown()},bindings:function(){var l={},t="custom_fields.";return l['[name="employer_name"]']="name",l['[name="employer_department"]']="department",l['[name="employer_short_bio"]']="short_bio",l['[name="employer_position"]']=t+"position",l['[name="employer_thumbnail_id"]']=t+"thumbnail_id",l['[name="employer_panel_text"]']=t+"panel_text",l['[name="employer_email"]']=t+"email",l['[name="employer_phone"]']=t+"phone",l['[name="employer_skype"]']=t+"skype",l['[name="employer_link"]']=t+"link",l['[name="employer_link_text"]']=t+"link_text",l['[name="employer_location"]']=t+"location",l['[name="employer_profile"]']=t+"profile",l['[name="employer_facebook"]']=t+"facebook",l['[name="employer_twitter"]']=t+"twitter",l['[name="employer_linkedin"]']=t+"linkedin",l['[name="employer_google"]']=t+"google",l['[name="employer_instagram"]']=t+"instagram",l['[name="employer_pinterest"]']=t+"pinterest",l['[name="employer_youtube"]']=t+"youtube",l['[name="employer_vimeo"]']=t+"vimeo",l['[name="employer_dribble"]']=t+"dribble",l['[name="employer_flickr"]']=t+"flickr",l['[name="employer_github"]']=t+"github",l[".skills-list"]={observe:"custom_fields.skills",update:function(l,t,a,s){var i=this,n=a.get("custom_fields.skills_order"),o=[];if(_.each(n,function(e,l){o[l]=t[e]}),l.html(""),0!==t.length){e.each(o,function(e,t){var a=i.template.skill.name({name:t.name}),s=t.value||0;if(s+="%","star"==t.type){s="";for(var o=0;o<parseInt(t.value);o++)s+=i.template.skill.star}var s=i.template.skill.value({value:s}),p={id:n[e],value:s,name:a},r=i.template.skill.body(p);l.append(r)});var p=new AwesomeEmployer;p.update_skill_order()}}},l},render:function(){return this.stickit(),this}})}(jQuery);
//# sourceMappingURL=all.min.js.map